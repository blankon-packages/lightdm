diff -Naur lightdm-1.10.2.orig/aclocal.m4 lightdm-1.10.1/aclocal.m4
--- lightdm-1.10.2.orig/aclocal.m4	2014-09-17 11:23:20.000000000 +0700
+++ lightdm-1.10.1/aclocal.m4	2014-04-28 04:53:57.000000000 +0700
@@ -21,7 +21,7 @@
 To do so, use the procedure documented by the package, typically 'autoreconf'.])])
 
 # nls.m4 serial 5 (gettext-0.18)
-dnl Copyright (C) 1995-2003, 2005-2006, 2008-2014 Free Software Foundation,
+dnl Copyright (C) 1995-2003, 2005-2006, 2008-2013 Free Software Foundation,
 dnl Inc.
 dnl This file is free software; the Free Software Foundation
 dnl gives unlimited permission to copy and/or distribute it,
@@ -213,85 +213,14 @@
 fi[]dnl
 ])# PKG_CHECK_MODULES
 
-
-# PKG_INSTALLDIR(DIRECTORY)
-# -------------------------
-# Substitutes the variable pkgconfigdir as the location where a module
-# should install pkg-config .pc files. By default the directory is
-# $libdir/pkgconfig, but the default can be changed by passing
-# DIRECTORY. The user can override through the --with-pkgconfigdir
-# parameter.
-AC_DEFUN([PKG_INSTALLDIR],
-[m4_pushdef([pkg_default], [m4_default([$1], ['${libdir}/pkgconfig'])])
-m4_pushdef([pkg_description],
-    [pkg-config installation directory @<:@]pkg_default[@:>@])
-AC_ARG_WITH([pkgconfigdir],
-    [AS_HELP_STRING([--with-pkgconfigdir], pkg_description)],,
-    [with_pkgconfigdir=]pkg_default)
-AC_SUBST([pkgconfigdir], [$with_pkgconfigdir])
-m4_popdef([pkg_default])
-m4_popdef([pkg_description])
-]) dnl PKG_INSTALLDIR
-
-
-# PKG_NOARCH_INSTALLDIR(DIRECTORY)
-# -------------------------
-# Substitutes the variable noarch_pkgconfigdir as the location where a
-# module should install arch-independent pkg-config .pc files. By
-# default the directory is $datadir/pkgconfig, but the default can be
-# changed by passing DIRECTORY. The user can override through the
-# --with-noarch-pkgconfigdir parameter.
-AC_DEFUN([PKG_NOARCH_INSTALLDIR],
-[m4_pushdef([pkg_default], [m4_default([$1], ['${datadir}/pkgconfig'])])
-m4_pushdef([pkg_description],
-    [pkg-config arch-independent installation directory @<:@]pkg_default[@:>@])
-AC_ARG_WITH([noarch-pkgconfigdir],
-    [AS_HELP_STRING([--with-noarch-pkgconfigdir], pkg_description)],,
-    [with_noarch_pkgconfigdir=]pkg_default)
-AC_SUBST([noarch_pkgconfigdir], [$with_noarch_pkgconfigdir])
-m4_popdef([pkg_default])
-m4_popdef([pkg_description])
-]) dnl PKG_NOARCH_INSTALLDIR
-
-
-# PKG_CHECK_VAR(VARIABLE, MODULE, CONFIG-VARIABLE,
-# [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND])
-# -------------------------------------------
-# Retrieves the value of the pkg-config variable for the given module.
-AC_DEFUN([PKG_CHECK_VAR],
-[AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
-AC_ARG_VAR([$1], [value of $3 for $2, overriding pkg-config])dnl
-
-_PKG_CONFIG([$1], [variable="][$3]["], [$2])
-AS_VAR_COPY([$1], [pkg_cv_][$1])
-
-AS_VAR_IF([$1], [""], [$5], [$4])dnl
-])# PKG_CHECK_VAR
-
 AC_DEFUN([YELP_HELP_INIT],
 [
 AC_REQUIRE([AC_PROG_LN_S])
 m4_pattern_allow([AM_V_at])
 m4_pattern_allow([AM_V_GEN])
 m4_pattern_allow([AM_DEFAULT_VERBOSITY])
-
-YELP_LC_MEDIA_LINKS=true
-YELP_LC_DIST=true
-
-for yelpopt in [$1]; do
-  case $yelpopt in
-    lc-media-links)    YELP_LC_MEDIA_LINKS=true ;;
-    no-lc-media-links) YELP_LC_MEDIA_LINKS= ;;
-    lc-dist)           YELP_LC_DIST=true ;;
-    no-lc-dist)        YELP_LC_DIST= ;;
-    *) AC_MSG_ERROR([Unrecognized [YELP_HELP_INIT] option $yelpopt"]) ;;
-  esac
-done;
-AC_SUBST([YELP_LC_MEDIA_LINKS])
-AC_SUBST([YELP_LC_DIST])
-
 AC_ARG_WITH([help-dir],
-            AS_HELP_STRING([--with-help-dir=DIR],
+            AC_HELP_STRING([--with-help-dir=DIR],
                            [path where help files are installed]),,
             [with_help_dir='${datadir}/help'])
 HELP_DIR="$with_help_dir"
@@ -384,13 +313,13 @@
 
 EXTRA_DIST ?=
 EXTRA_DIST += $(_HELP_C_EXTRA) $(_HELP_C_MEDIA)
-EXTRA_DIST += $(if $(YELP_LC_DIST),$(foreach lc,$(HELP_LINGUAS),$(lc)/$(lc).stamp))
+EXTRA_DIST += $(foreach lc,$(HELP_LINGUAS),$(lc)/$(lc).stamp)
 EXTRA_DIST += $(foreach lc,$(HELP_LINGUAS),$(lc)/$(lc).po)
 EXTRA_DIST += $(foreach f,$(HELP_MEDIA),$(foreach lc,$(HELP_LINGUAS),$(wildcard $(lc)/$(f))))
 
 distdir: distdir-help-files
 distdir-help-files:
-	@for lc in C $(if $(YELP_LC_DIST),$(HELP_LINGUAS)) ; do \
+	@for lc in C $(HELP_LINGUAS); do \
 	  $(MKDIR_P) "$(distdir)/$$lc"; \
 	  for file in $(HELP_FILES); do \
 	    if test -f "$$lc/$$file"; then d=./; else d=$(srcdir)/; fi; \
@@ -448,10 +377,8 @@
 	      echo "$(INSTALL_DATA) $$d$$lc/$$f $$helpdir$$f"; \
 	      $(INSTALL_DATA) "$$d$$lc/$$f" "$$helpdir$$f" || exit 1; \
 	    elif test "x$$lc" != "xC"; then \
-	      if test "x$(YELP_LC_MEDIA_LINKS)" != "x"; then \
-	        echo "$(LN_S) -f $(HELP_DIR)/C/$(HELP_ID)/$$f $$helpdir$$f"; \
-	        $(LN_S) -f "$(HELP_DIR)/C/$(HELP_ID)/$$f" "$$helpdir$$f" || exit 1; \
-	      fi; \
+	      echo "$(LN_S) -f $(HELP_DIR)/C/$(HELP_ID)/$$f $$helpdir$$f"; \
+	      $(LN_S) -f "$(HELP_DIR)/C/$(HELP_ID)/$$f" "$$helpdir$$f" || exit 1; \
 	    fi; \
 	  done; \
 	done
@@ -1035,8 +962,7 @@
 END
     AC_MSG_ERROR([Your 'rm' program is bad, sorry.])
   fi
-fi
-])
+fi])
 
 dnl Hook into '_AC_COMPILER_EXEEXT' early to learn its expansion.  Do not
 dnl add the conditional right here, as _AC_COMPILER_EXEEXT may be further
diff -Naur lightdm-1.10.2.orig/common/configuration.c lightdm-1.10.1/common/configuration.c
--- lightdm-1.10.2.orig/common/configuration.c	2014-09-08 06:44:01.000000000 +0700
+++ lightdm-1.10.1/common/configuration.c	2014-04-08 11:30:25.000000000 +0700
@@ -15,10 +15,7 @@
 
 struct ConfigurationPrivate
 {
-    gchar *dir;
     GKeyFile *key_file;
-    GList *sources;
-    GHashTable *key_sources;
 };
 
 G_DEFINE_TYPE (Configuration, config, G_TYPE_OBJECT);
@@ -37,7 +34,7 @@
 config_load_from_file (Configuration *config, const gchar *path, GError **error)
 {
     GKeyFile *key_file;
-    gchar *source_path, **groups;
+    gchar **groups;
     int i;
 
     key_file = g_key_file_new ();
@@ -47,9 +44,6 @@
         return FALSE;
     }
 
-    source_path = g_strdup (path);
-    config->priv->sources = g_list_append (config->priv->sources, source_path);
-
     groups = g_key_file_get_groups (key_file, NULL);
     for (i = 0; groups[i]; i++)
     {
@@ -59,17 +53,14 @@
         keys = g_key_file_get_keys (key_file, groups[i], NULL, error);
         if (!keys)
             break;
-
+      
         for (j = 0; keys[j]; j++)
         {
-            gchar *value, *k;
+            gchar *value;
 
             value = g_key_file_get_value (key_file, groups[i], keys[j], NULL);
             g_key_file_set_value (config->priv->key_file, groups[i], keys[j], value);
             g_free (value);
-
-            k = g_strdup_printf ("%s]%s", groups[i], keys[j]);
-            g_hash_table_insert (config->priv->key_sources, k, source_path);
         }
 
         g_strfreev (keys);
@@ -168,59 +159,53 @@
 gboolean
 config_load_from_standard_locations (Configuration *config, const gchar *config_path, GList **messages)
 {
-    gchar *config_d_dir = NULL, *path;
+    gchar *config_dir, *config_d_dir = NULL;
+    gboolean explicit_config = FALSE;
     gboolean success = TRUE;
     GError *error = NULL;
 
-    g_return_val_if_fail (config->priv->dir == NULL, FALSE);
-
     load_config_directories (g_get_system_data_dirs (), messages);
     load_config_directories (g_get_system_config_dirs (), messages);
 
     if (config_path)
     {
-        path = g_strdup (config_path);
-        config->priv->dir = path_make_absolute (g_path_get_basename (config_path));
+        config_dir = g_path_get_basename (config_path);
+        config_dir = path_make_absolute (config_dir);
+        explicit_config = TRUE;
     }
     else
     {
-        config->priv->dir = g_strdup (CONFIG_DIR);
-        config_d_dir = g_build_filename (config->priv->dir, "lightdm.conf.d", NULL);
-        path = g_build_filename (config->priv->dir, "lightdm.conf", NULL);
+        config_dir = g_strdup (CONFIG_DIR);
+        config_d_dir = g_build_filename (config_dir, "lightdm.conf.d", NULL);
+        config_path = g_build_filename (config_dir, "lightdm.conf", NULL);
     }
+    config_set_string (config, "LightDM", "config-directory", config_dir);
+    g_free (config_dir);
 
     if (config_d_dir)
         load_config_directory (config_d_dir, messages);
+    g_free (config_d_dir);
 
     if (messages)
-        *messages = g_list_append (*messages, g_strdup_printf ("Loading configuration from %s", path));
-    if (!config_load_from_file (config, path, &error))
+        *messages = g_list_append (*messages, g_strdup_printf ("Loading configuration from %s", config_path));
+    if (!config_load_from_file (config, config_path, &error))
     {
         gboolean is_empty;
 
         is_empty = error && g_error_matches (error, G_FILE_ERROR, G_FILE_ERROR_NOENT);
 
-        if (config_path || !is_empty)
+        if (explicit_config || !is_empty)
         {
             if (error)
-                g_printerr ("Failed to load configuration from %s: %s\n", path, error->message);
+                g_printerr ("Failed to load configuration from %s: %s\n", config_path, error->message);
             success = FALSE;
         }
     }
     g_clear_error (&error);
 
-    g_free (config_d_dir);
-    g_free (path);
-
     return success;
 }
 
-const gchar *
-config_get_directory (Configuration *config)
-{
-    return config->priv->dir;
-}
-
 gchar **
 config_get_groups (Configuration *config)
 {
@@ -239,25 +224,6 @@
     return g_key_file_has_key (config->priv->key_file, section, key, NULL);
 }
 
-GList *
-config_get_sources (Configuration *config)
-{
-    return config->priv->sources;
-}
-
-const gchar *
-config_get_source (Configuration *config, const gchar *section, const gchar *key)
-{
-    gchar *k;
-    const gchar *source;
-
-    k = g_strdup_printf ("%s]%s", section, key);
-    source = g_hash_table_lookup (config->priv->key_sources, k);
-    g_free (k);
-
-    return source;
-}
-
 void
 config_set_string (Configuration *config, const gchar *section, const gchar *key, const gchar *value)
 {
@@ -310,8 +276,7 @@
 config_init (Configuration *config)
 {
     config->priv = G_TYPE_INSTANCE_GET_PRIVATE (config, CONFIGURATION_TYPE, ConfigurationPrivate);
-    config->priv->key_file = g_key_file_new ();
-    config->priv->key_sources = g_hash_table_new_full (g_str_hash, g_str_equal, g_free, g_free);
+    config->priv->key_file = g_key_file_new ();  
 }
 
 static void
@@ -321,10 +286,7 @@
 
     self = CONFIGURATION (object);
 
-    g_free (self->priv->dir);
     g_key_file_free (self->priv->key_file);
-    g_list_free_full (self->priv->sources, g_free);
-    g_hash_table_destroy (self->priv->key_sources);
 
     G_OBJECT_CLASS (config_parent_class)->finalize (object);  
 }
diff -Naur lightdm-1.10.2.orig/common/configuration.h lightdm-1.10.1/common/configuration.h
--- lightdm-1.10.2.orig/common/configuration.h	2014-09-08 06:39:20.000000000 +0700
+++ lightdm-1.10.1/common/configuration.h	2014-04-08 11:30:25.000000000 +0700
@@ -40,18 +40,12 @@
 
 gboolean config_load_from_standard_locations (Configuration *config, const gchar *config_path, GList **messages);
 
-const gchar *config_get_directory (Configuration *config);
-
 gchar **config_get_groups (Configuration *config);
 
 gchar **config_get_keys (Configuration *config, const gchar *group_name);
 
 gboolean config_has_key (Configuration *config, const gchar *section, const gchar *key);
 
-GList *config_get_sources (Configuration *config);
-
-const gchar *config_get_source (Configuration *config, const gchar *section, const gchar *key);
-
 void config_set_string (Configuration *config, const gchar *section, const gchar *key, const gchar *value);
 
 gchar *config_get_string (Configuration *config, const gchar *section, const gchar *key);
diff -Naur lightdm-1.10.2.orig/common/Makefile.in lightdm-1.10.1/common/Makefile.in
--- lightdm-1.10.2.orig/common/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/common/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -298,8 +298,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/configure lightdm-1.10.1/configure
--- lightdm-1.10.2.orig/configure	2014-09-17 11:23:21.000000000 +0700
+++ lightdm-1.10.1/configure	2014-04-28 04:53:58.000000000 +0700
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.69 for lightdm 1.10.2.
+# Generated by GNU Autoconf 2.69 for lightdm 1.10.1.
 #
 #
 # Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.
@@ -587,8 +587,8 @@
 # Identity of this package.
 PACKAGE_NAME='lightdm'
 PACKAGE_TARNAME='lightdm'
-PACKAGE_VERSION='1.10.2'
-PACKAGE_STRING='lightdm 1.10.2'
+PACKAGE_VERSION='1.10.1'
+PACKAGE_STRING='lightdm 1.10.1'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -673,8 +673,6 @@
 XMLLINT
 ITSTOOL
 HELP_DIR
-YELP_LC_DIST
-YELP_LC_MEDIA_LINKS
 GTK_DOC_USE_REBASE_FALSE
 GTK_DOC_USE_REBASE_TRUE
 GTK_DOC_USE_LIBTOOL_FALSE
@@ -1470,7 +1468,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures lightdm 1.10.2 to adapt to many kinds of systems.
+\`configure' configures lightdm 1.10.1 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1540,7 +1538,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of lightdm 1.10.2:";;
+     short | recursive ) echo "Configuration of lightdm 1.10.1:";;
    esac
   cat <<\_ACEOF
 
@@ -1712,7 +1710,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-lightdm configure 1.10.2
+lightdm configure 1.10.1
 generated by GNU Autoconf 2.69
 
 Copyright (C) 2012 Free Software Foundation, Inc.
@@ -2198,7 +2196,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by lightdm $as_me 1.10.2, which was
+It was created by lightdm $as_me 1.10.1, which was
 generated by GNU Autoconf 2.69.  Invocation command line was
 
   $ $0 $@
@@ -3064,7 +3062,7 @@
 
 # Define the identity of the package.
  PACKAGE='lightdm'
- VERSION='1.10.2'
+ VERSION='1.10.1'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -3156,7 +3154,6 @@
     as_fn_error $? "Your 'rm' program is bad, sorry." "$LINENO" 5
   fi
 fi
-
 # Check whether --enable-silent-rules was given.
 if test "${enable_silent_rules+set}" = set; then :
   enableval=$enable_silent_rules;
@@ -17629,22 +17626,6 @@
 
 
 
-YELP_LC_MEDIA_LINKS=true
-YELP_LC_DIST=true
-
-for yelpopt in ; do
-  case $yelpopt in
-    lc-media-links)    YELP_LC_MEDIA_LINKS=true ;;
-    no-lc-media-links) YELP_LC_MEDIA_LINKS= ;;
-    lc-dist)           YELP_LC_DIST=true ;;
-    no-lc-dist)        YELP_LC_DIST= ;;
-    *) as_fn_error $? "Unrecognized YELP_HELP_INIT option $yelpopt\"" "$LINENO" 5 ;;
-  esac
-done;
-
-
-
-
 # Check whether --with-help-dir was given.
 if test "${with_help_dir+set}" = set; then :
   withval=$with_help_dir;
@@ -17814,13 +17795,13 @@
 
 EXTRA_DIST ?=
 EXTRA_DIST += $(_HELP_C_EXTRA) $(_HELP_C_MEDIA)
-EXTRA_DIST += $(if $(YELP_LC_DIST),$(foreach lc,$(HELP_LINGUAS),$(lc)/$(lc).stamp))
+EXTRA_DIST += $(foreach lc,$(HELP_LINGUAS),$(lc)/$(lc).stamp)
 EXTRA_DIST += $(foreach lc,$(HELP_LINGUAS),$(lc)/$(lc).po)
 EXTRA_DIST += $(foreach f,$(HELP_MEDIA),$(foreach lc,$(HELP_LINGUAS),$(wildcard $(lc)/$(f))))
 
 distdir: distdir-help-files
 distdir-help-files:
-	@for lc in C $(if $(YELP_LC_DIST),$(HELP_LINGUAS)) ; do \
+	@for lc in C $(HELP_LINGUAS); do \
 	  $(MKDIR_P) "$(distdir)/$$lc"; \
 	  for file in $(HELP_FILES); do \
 	    if test -f "$$lc/$$file"; then d=./; else d=$(srcdir)/; fi; \
@@ -17878,10 +17859,8 @@
 	      echo "$(INSTALL_DATA) $$d$$lc/$$f $$helpdir$$f"; \
 	      $(INSTALL_DATA) "$$d$$lc/$$f" "$$helpdir$$f" || exit 1; \
 	    elif test "x$$lc" != "xC"; then \
-	      if test "x$(YELP_LC_MEDIA_LINKS)" != "x"; then \
-	        echo "$(LN_S) -f $(HELP_DIR)/C/$(HELP_ID)/$$f $$helpdir$$f"; \
-	        $(LN_S) -f "$(HELP_DIR)/C/$(HELP_ID)/$$f" "$$helpdir$$f" || exit 1; \
-	      fi; \
+	      echo "$(LN_S) -f $(HELP_DIR)/C/$(HELP_ID)/$$f $$helpdir$$f"; \
+	      $(LN_S) -f "$(HELP_DIR)/C/$(HELP_ID)/$$f" "$$helpdir$$f" || exit 1; \
 	    fi; \
 	  done; \
 	done
@@ -19089,7 +19068,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by lightdm $as_me 1.10.2, which was
+This file was extended by lightdm $as_me 1.10.1, which was
 generated by GNU Autoconf 2.69.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -19155,7 +19134,7 @@
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
-lightdm config.status 1.10.2
+lightdm config.status 1.10.1
 configured by $0, generated by GNU Autoconf 2.69,
   with options \\"\$ac_cs_config\\"
 
diff -Naur lightdm-1.10.2.orig/configure.ac lightdm-1.10.1/configure.ac
--- lightdm-1.10.2.orig/configure.ac	2014-09-17 11:21:42.000000000 +0700
+++ lightdm-1.10.1/configure.ac	2014-04-28 04:53:47.000000000 +0700
@@ -1,6 +1,6 @@
 dnl Process this file with autoconf to produce a configure script.
 
-AC_INIT(lightdm, 1.10.2)
+AC_INIT(lightdm, 1.10.1)
 AC_CONFIG_MACRO_DIR(m4)
 AC_CONFIG_HEADER(config.h)
 AM_INIT_AUTOMAKE([1.11 no-dist-gzip dist-xz foreign])
diff -Naur lightdm-1.10.2.orig/data/lightdm.conf lightdm-1.10.1/data/lightdm.conf
--- lightdm-1.10.2.orig/data/lightdm.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/data/lightdm.conf	2014-10-01 19:57:55.098901000 +0700
@@ -18,7 +18,7 @@
 # greeters-directory = Directory to find greeters
 #
 [LightDM]
-#start-default-seat=true
+start-default-seat=true
 #greeter-user=lightdm
 #minimum-display-number=0
 #minimum-vt=7
@@ -96,12 +96,12 @@
 #xdmcp-key=
 #unity-compositor-command=unity-system-compositor
 #unity-compositor-timeout=60
-#greeter-session=example-gtk-gnome
+greeter-session=lightdm-webkit-greeter
 #greeter-hide-users=false
 #greeter-allow-guest=true
 #greeter-show-manual-login=false
 #greeter-show-remote-login=true
-#user-session=default
+user-session=blankon
 #allow-user-switching=true
 #allow-guest=true
 #guest-session=
diff -Naur lightdm-1.10.2.orig/data/Makefile.in lightdm-1.10.1/data/Makefile.in
--- lightdm-1.10.2.orig/data/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/data/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -283,8 +283,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/data/users.conf lightdm-1.10.1/data/users.conf
--- lightdm-1.10.2.orig/data/users.conf	2014-05-20 03:11:31.000000000 +0700
+++ lightdm-1.10.1/data/users.conf	2014-04-08 11:30:25.000000000 +0700
@@ -8,7 +8,7 @@
 # hidden-users = Users that are not shown to the user
 # hidden-shells = Shells that indicate a user cannot login
 #
-[UserList]
+[UserAccounts]
 minimum-uid=500
 hidden-users=nobody nobody4 noaccess
 hidden-shells=/bin/false /usr/sbin/nologin
diff -Naur lightdm-1.10.2.orig/doc/html/core.html lightdm-1.10.1/doc/html/core.html
--- lightdm-1.10.2.orig/doc/html/core.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/core.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,11 +8,11 @@
 <link rel="up" href="index.html" title="LightDM Reference Manual">
 <link rel="prev" href="index.html" title="LightDM Reference Manual">
 <link rel="next" href="lightdm-gobject-1-Greeter-Interface.html" title="Greeter Interface">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts"></td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><img src="up-insensitive.png" width="16" height="16" border="0"></td>
@@ -51,6 +51,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/index.html lightdm-1.10.1/doc/html/index.html
--- lightdm-1.10.2.orig/doc/html/index.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/index.html	2014-04-28 04:57:13.000000000 +0700
@@ -6,7 +6,7 @@
 <meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
 <link rel="home" href="index.html" title="LightDM Reference Manual">
 <link rel="next" href="core.html" title="Part I. liblightdm-gobject">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
@@ -44,6 +44,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/index.sgml lightdm-1.10.1/doc/html/index.sgml
--- lightdm-1.10.2.orig/doc/html/index.sgml	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/index.sgml	2014-04-28 04:57:13.000000000 +0700
@@ -1,6 +1,7 @@
 <ANCHOR id="lightdm-gobject-1-Greeter-Interface" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html">
 <ANCHOR id="lightdm-gobject-1-Greeter-Interface.functions" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#lightdm-gobject-1-Greeter-Interface.functions">
 <ANCHOR id="lightdm-gobject-1-Greeter-Interface.other" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#lightdm-gobject-1-Greeter-Interface.other">
+<ANCHOR id="lightdm-gobject-1-Greeter-Interface.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#lightdm-gobject-1-Greeter-Interface.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-Greeter-Interface.includes" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#lightdm-gobject-1-Greeter-Interface.includes">
 <ANCHOR id="lightdm-gobject-1-Greeter-Interface.description" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#lightdm-gobject-1-Greeter-Interface.description">
 <ANCHOR id="lightdm-gobject-1-Greeter-Interface.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#lightdm-gobject-1-Greeter-Interface.functions_details">
@@ -40,6 +41,7 @@
 <ANCHOR id="LightDMPromptType" href="lightdm-gobject-1/lightdm-gobject-1-Greeter-Interface.html#LightDMPromptType">
 <ANCHOR id="lightdm-gobject-1-Languages" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html">
 <ANCHOR id="lightdm-gobject-1-Languages.functions" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html#lightdm-gobject-1-Languages.functions">
+<ANCHOR id="lightdm-gobject-1-Languages.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html#lightdm-gobject-1-Languages.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-Languages.includes" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html#lightdm-gobject-1-Languages.includes">
 <ANCHOR id="lightdm-gobject-1-Languages.description" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html#lightdm-gobject-1-Languages.description">
 <ANCHOR id="lightdm-gobject-1-Languages.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html#lightdm-gobject-1-Languages.functions_details">
@@ -52,6 +54,7 @@
 <ANCHOR id="lightdm-gobject-1-Languages.other_details" href="lightdm-gobject-1/lightdm-gobject-1-Languages.html#lightdm-gobject-1-Languages.other_details">
 <ANCHOR id="lightdm-gobject-1-Keyboard-Layout" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html">
 <ANCHOR id="lightdm-gobject-1-Keyboard-Layout.functions" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html#lightdm-gobject-1-Keyboard-Layout.functions">
+<ANCHOR id="lightdm-gobject-1-Keyboard-Layout.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html#lightdm-gobject-1-Keyboard-Layout.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-Keyboard-Layout.includes" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html#lightdm-gobject-1-Keyboard-Layout.includes">
 <ANCHOR id="lightdm-gobject-1-Keyboard-Layout.description" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html#lightdm-gobject-1-Keyboard-Layout.description">
 <ANCHOR id="lightdm-gobject-1-Keyboard-Layout.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html#lightdm-gobject-1-Keyboard-Layout.functions_details">
@@ -64,6 +67,7 @@
 <ANCHOR id="lightdm-gobject-1-Keyboard-Layout.other_details" href="lightdm-gobject-1/lightdm-gobject-1-Keyboard-Layout.html#lightdm-gobject-1-Keyboard-Layout.other_details">
 <ANCHOR id="lightdm-gobject-1-Sessions" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html">
 <ANCHOR id="lightdm-gobject-1-Sessions.functions" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html#lightdm-gobject-1-Sessions.functions">
+<ANCHOR id="lightdm-gobject-1-Sessions.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html#lightdm-gobject-1-Sessions.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-Sessions.includes" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html#lightdm-gobject-1-Sessions.includes">
 <ANCHOR id="lightdm-gobject-1-Sessions.description" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html#lightdm-gobject-1-Sessions.description">
 <ANCHOR id="lightdm-gobject-1-Sessions.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html#lightdm-gobject-1-Sessions.functions_details">
@@ -76,6 +80,7 @@
 <ANCHOR id="lightdm-gobject-1-Sessions.other_details" href="lightdm-gobject-1/lightdm-gobject-1-Sessions.html#lightdm-gobject-1-Sessions.other_details">
 <ANCHOR id="lightdm-gobject-1-User-Accounts" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html">
 <ANCHOR id="lightdm-gobject-1-User-Accounts.functions" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html#lightdm-gobject-1-User-Accounts.functions">
+<ANCHOR id="lightdm-gobject-1-User-Accounts.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html#lightdm-gobject-1-User-Accounts.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-User-Accounts.includes" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html#lightdm-gobject-1-User-Accounts.includes">
 <ANCHOR id="lightdm-gobject-1-User-Accounts.description" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html#lightdm-gobject-1-User-Accounts.description">
 <ANCHOR id="lightdm-gobject-1-User-Accounts.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html#lightdm-gobject-1-User-Accounts.functions_details">
@@ -102,6 +107,7 @@
 <ANCHOR id="lightdm-gobject-1-User-Accounts.other_details" href="lightdm-gobject-1/lightdm-gobject-1-User-Accounts.html#lightdm-gobject-1-User-Accounts.other_details">
 <ANCHOR id="lightdm-gobject-1-Power-Management" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html">
 <ANCHOR id="lightdm-gobject-1-Power-Management.functions" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html#lightdm-gobject-1-Power-Management.functions">
+<ANCHOR id="lightdm-gobject-1-Power-Management.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html#lightdm-gobject-1-Power-Management.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-Power-Management.includes" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html#lightdm-gobject-1-Power-Management.includes">
 <ANCHOR id="lightdm-gobject-1-Power-Management.description" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html#lightdm-gobject-1-Power-Management.description">
 <ANCHOR id="lightdm-gobject-1-Power-Management.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html#lightdm-gobject-1-Power-Management.functions_details">
@@ -116,6 +122,7 @@
 <ANCHOR id="lightdm-gobject-1-Power-Management.other_details" href="lightdm-gobject-1/lightdm-gobject-1-Power-Management.html#lightdm-gobject-1-Power-Management.other_details">
 <ANCHOR id="lightdm-gobject-1-System-Information" href="lightdm-gobject-1/lightdm-gobject-1-System-Information.html">
 <ANCHOR id="lightdm-gobject-1-System-Information.functions" href="lightdm-gobject-1/lightdm-gobject-1-System-Information.html#lightdm-gobject-1-System-Information.functions">
+<ANCHOR id="lightdm-gobject-1-System-Information.object-hierarchy" href="lightdm-gobject-1/lightdm-gobject-1-System-Information.html#lightdm-gobject-1-System-Information.object-hierarchy">
 <ANCHOR id="lightdm-gobject-1-System-Information.includes" href="lightdm-gobject-1/lightdm-gobject-1-System-Information.html#lightdm-gobject-1-System-Information.includes">
 <ANCHOR id="lightdm-gobject-1-System-Information.description" href="lightdm-gobject-1/lightdm-gobject-1-System-Information.html#lightdm-gobject-1-System-Information.description">
 <ANCHOR id="lightdm-gobject-1-System-Information.functions_details" href="lightdm-gobject-1/lightdm-gobject-1-System-Information.html#lightdm-gobject-1-System-Information.functions_details">
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Greeter-Interface.html lightdm-1.10.1/doc/html/lightdm-gobject-1-Greeter-Interface.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Greeter-Interface.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-Greeter-Interface.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,14 +8,15 @@
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="next" href="lightdm-gobject-1-Languages.html" title="Languages">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-Greeter-Interface.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Greeter-Interface.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Greeter-Interface.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -305,6 +306,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-Greeter-Interface.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-Greeter-Interface.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -317,7 +323,7 @@
 <p>
 </p>
 <div class="example">
-<a name="id-1.2.2.6.3.1"></a><p class="title"><b>Example 1. Example Greeter</b></p>
+<a name="id-1.2.2.7.3.1"></a><p class="title"><b>Example 1. Example Greeter</b></p>
 <div class="example-contents"><pre class="programlisting">
 int main ()
 {
@@ -401,7 +407,7 @@
 lightdm_greeter_new (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Create a new greeter.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.6.5"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.6.5"></a><h4>Returns</h4>
 <p> the new <span class="type">LightDMGreeter</span></p>
 <p></p>
 </div>
@@ -414,7 +420,7 @@
                               <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
 <p>Connects the greeter to the display manager.  Will block until connected.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.7.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.7.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -436,7 +442,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.7.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.7.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if successfully connected</p>
 <p></p>
 </div>
@@ -459,7 +465,7 @@
 greeters only need to call this method if they want to store something in
 the directory themselves.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.8.6"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.8.6"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -481,8 +487,8 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.8.7"></a><h4>Returns</h4>
-<p> The path to the shared directory, free with g_free.</p>
+<a name="id-1.2.2.8.8.7"></a><h4>Returns</h4>
+<p> The path to the shared directory, free with g_free</p>
 <p></p>
 </div>
 </div>
@@ -494,7 +500,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Get the default session to use.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.9.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.9.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -509,7 +515,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.9.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.9.6"></a><h4>Returns</h4>
 <p> The session name</p>
 <p></p>
 </div>
@@ -522,7 +528,7 @@
                           <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *name</code></em>);</pre>
 <p>Get a hint.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.10.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.10.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -544,7 +550,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.10.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.10.6"></a><h4>Returns</h4>
 <p> The value for this hint or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if not set.</p>
 <p></p>
 </div>
@@ -556,7 +562,7 @@
 lightdm_greeter_get_lock_hint (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Check if the greeter is acting as a lock screen.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.11.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.11.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -571,7 +577,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.11.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.11.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the greeter was triggered by locking the seat.</p>
 <p></p>
 </div>
@@ -584,7 +590,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Check if guest sessions are supported.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.12.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.12.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -599,7 +605,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.12.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.12.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if guest sessions are supported.</p>
 <p></p>
 </div>
@@ -616,7 +622,7 @@
 <p>If this option is shown the greeter should only allow these users to be
 chosen for login unless the manual login hint is set.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.13.6"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.13.6"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -631,7 +637,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.13.7"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.13.7"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the available users should not be shown.</p>
 <p></p>
 </div>
@@ -647,7 +653,7 @@
 Without this hint a greeter which is showing a user list can
 limit logins to only those users.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.14.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.14.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -662,7 +668,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.14.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.14.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if a manual login option should be shown.</p>
 <p></p>
 </div>
@@ -676,7 +682,7 @@
 <p>Check if a remote login option should be shown.  If set the GUI
 should provide a way for a user to log into a remote desktop server.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.15.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.15.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -691,7 +697,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.15.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.15.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if a remote login option should be shown.</p>
 <p></p>
 </div>
@@ -703,7 +709,7 @@
 lightdm_greeter_get_select_user_hint (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Get the user to select by default.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.16.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.16.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -718,7 +724,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.16.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.16.6"></a><h4>Returns</h4>
 <p> A username</p>
 <p></p>
 </div>
@@ -730,7 +736,7 @@
 lightdm_greeter_get_select_guest_hint (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Check if the guest account should be selected by default.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.17.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.17.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -745,7 +751,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.17.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.17.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the guest account should be selected by default.</p>
 <p></p>
 </div>
@@ -758,7 +764,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Get the user account to automatically logg into when the timer expires.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.18.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.18.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -773,7 +779,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.18.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.18.6"></a><h4>Returns</h4>
 <p> The user account to automatically log into.</p>
 <p></p>
 </div>
@@ -786,7 +792,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Check if the guest account should be automatically logged into when the timer expires.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.19.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.19.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -801,7 +807,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.19.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.19.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the guest account should be automatically logged into.</p>
 <p></p>
 </div>
@@ -814,7 +820,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Get the number of seconds to wait before automaitcally logging in.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.20.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.20.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -829,7 +835,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.20.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.20.6"></a><h4>Returns</h4>
 <p> The number of seconds to wait before automatically logging in or 0 for no timeout.</p>
 <p></p>
 </div>
@@ -842,7 +848,7 @@
                               <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *language</code></em>);</pre>
 <p>Set the language for the currently authenticated user.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.21.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.21.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -871,7 +877,7 @@
 lightdm_greeter_cancel_autologin (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Cancel the automatic login.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.22.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.22.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -894,7 +900,7 @@
                               <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *username</code></em>);</pre>
 <p>Starts the authentication procedure for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.23.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.23.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -923,7 +929,7 @@
 lightdm_greeter_authenticate_as_guest (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Starts the authentication procedure for the guest user.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.24.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.24.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -946,7 +952,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Starts the authentication procedure for the automatic login user.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.25.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.25.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -970,7 +976,7 @@
                                      <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *username</code></em>);</pre>
 <p>Start authentication for a remote session type.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.26.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.26.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1005,7 +1011,7 @@
                          <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *response</code></em>);</pre>
 <p>Provide response to a prompt.  May be one in a series.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.27.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.27.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1034,7 +1040,7 @@
 lightdm_greeter_cancel_authentication (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Cancel the current user authentication.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.28.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.28.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1056,7 +1062,7 @@
 lightdm_greeter_get_in_authentication (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Checks if the greeter is in the process of authenticating.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.29.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.29.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1071,7 +1077,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.29.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.29.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the greeter is authenticating a user.</p>
 <p></p>
 </div>
@@ -1083,7 +1089,7 @@
 lightdm_greeter_get_is_authenticated (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Checks if the greeter has successfully authenticated.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.30.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.30.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1098,7 +1104,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.30.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.30.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the greeter is authenticated for login.</p>
 <p></p>
 </div>
@@ -1111,7 +1117,7 @@
                                (<em class="parameter"><code><span class="type">LightDMGreeter</span> *greeter</code></em>);</pre>
 <p>Get the user that is being authenticated.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.31.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.31.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1126,7 +1132,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.31.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.31.6"></a><h4>Returns</h4>
 <p> The username of the authentication user being authenticated or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if no authentication in progress.</p>
 <p></p>
 </div>
@@ -1140,7 +1146,7 @@
                                     <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
 <p>Start a session for the authenticated user.</p>
 <div class="refsect3">
-<a name="id-1.2.2.7.32.5"></a><h4>Parameters</h4>
+<a name="id-1.2.2.8.32.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -1167,7 +1173,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.2.7.32.6"></a><h4>Returns</h4>
+<a name="id-1.2.2.8.32.6"></a><h4>Returns</h4>
 <p> TRUE if the session was started.</p>
 <p></p>
 </div>
@@ -1178,7 +1184,7 @@
 <div class="refsect2">
 <a name="LightDMMessageType"></a><h3>enum LightDMMessageType</h3>
 <div class="refsect3">
-<a name="id-1.2.2.8.2.3"></a><h4>Members</h4>
+<a name="id-1.2.2.9.2.3"></a><h4>Members</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="300px" class="enum_members_name">
@@ -1208,7 +1214,7 @@
 <div class="refsect2">
 <a name="LightDMPromptType"></a><h3>enum LightDMPromptType</h3>
 <div class="refsect3">
-<a name="id-1.2.2.8.3.3"></a><h4>Members</h4>
+<a name="id-1.2.2.9.3.3"></a><h4>Members</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="300px" class="enum_members_name">
@@ -1238,6 +1244,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Keyboard-Layout.html lightdm-1.10.1/doc/html/lightdm-gobject-1-Keyboard-Layout.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Keyboard-Layout.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-Keyboard-Layout.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,14 +8,15 @@
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="lightdm-gobject-1-Languages.html" title="Languages">
 <link rel="next" href="lightdm-gobject-1-Sessions.html" title="User Sessions">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-Keyboard-Layout.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Keyboard-Layout.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Keyboard-Layout.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -88,6 +89,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-Keyboard-Layout.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-Keyboard-Layout.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -106,7 +112,7 @@
 lightdm_get_layouts (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get a list of keyboard layouts to present to the user.</p>
 <div class="refsect3">
-<a name="id-1.2.4.6.2.5"></a><h4>Returns</h4>
+<a name="id-1.2.4.7.2.5"></a><h4>Returns</h4>
 <p> A list of <span class="type">LightDMLayout</span> that should be presented to the user. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/element-type"><span class="acronym">element-type</span></a> LightDMLayout][<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -118,7 +124,7 @@
 lightdm_get_layout (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get the current keyboard layout.</p>
 <div class="refsect3">
-<a name="id-1.2.4.6.3.5"></a><h4>Returns</h4>
+<a name="id-1.2.4.7.3.5"></a><h4>Returns</h4>
 <p> The currently active layout for this user. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -130,7 +136,7 @@
 lightdm_set_layout (<em class="parameter"><code><span class="type">LightDMLayout</span> *layout</code></em>);</pre>
 <p>Set the layout for this session.</p>
 <div class="refsect3">
-<a name="id-1.2.4.6.4.5"></a><h4>Parameters</h4>
+<a name="id-1.2.4.7.4.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -152,7 +158,7 @@
 lightdm_layout_get_name (<em class="parameter"><code><span class="type">LightDMLayout</span> *layout</code></em>);</pre>
 <p>Get the name of a layout.</p>
 <div class="refsect3">
-<a name="id-1.2.4.6.5.5"></a><h4>Parameters</h4>
+<a name="id-1.2.4.7.5.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -167,7 +173,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.4.6.5.6"></a><h4>Returns</h4>
+<a name="id-1.2.4.7.5.6"></a><h4>Returns</h4>
 <p> The name of the layout</p>
 <p></p>
 </div>
@@ -179,7 +185,7 @@
 lightdm_layout_get_short_description (<em class="parameter"><code><span class="type">LightDMLayout</span> *layout</code></em>);</pre>
 <p>Get the short description of a layout.</p>
 <div class="refsect3">
-<a name="id-1.2.4.6.6.5"></a><h4>Parameters</h4>
+<a name="id-1.2.4.7.6.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -194,7 +200,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.4.6.6.6"></a><h4>Returns</h4>
+<a name="id-1.2.4.7.6.6"></a><h4>Returns</h4>
 <p> A short description of the layout</p>
 <p></p>
 </div>
@@ -206,7 +212,7 @@
 lightdm_layout_get_description (<em class="parameter"><code><span class="type">LightDMLayout</span> *layout</code></em>);</pre>
 <p>Get the long description of a layout.</p>
 <div class="refsect3">
-<a name="id-1.2.4.6.7.5"></a><h4>Parameters</h4>
+<a name="id-1.2.4.7.7.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -221,7 +227,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.4.6.7.6"></a><h4>Returns</h4>
+<a name="id-1.2.4.7.7.6"></a><h4>Returns</h4>
 <p> A long description of the layout</p>
 <p></p>
 </div>
@@ -233,6 +239,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Languages.html lightdm-1.10.1/doc/html/lightdm-gobject-1-Languages.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Languages.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-Languages.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,14 +8,15 @@
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="lightdm-gobject-1-Greeter-Interface.html" title="Greeter Interface">
 <link rel="next" href="lightdm-gobject-1-Keyboard-Layout.html" title="Keyboard Layouts">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-Languages.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Languages.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Languages.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -88,6 +89,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-Languages.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-Languages.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -106,7 +112,7 @@
 lightdm_get_languages (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get a list of languages to present to the user.</p>
 <div class="refsect3">
-<a name="id-1.2.3.6.2.5"></a><h4>Returns</h4>
+<a name="id-1.2.3.7.2.5"></a><h4>Returns</h4>
 <p> A list of <span class="type">LightDMLanguage</span> that should be presented to the user. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/element-type"><span class="acronym">element-type</span></a> LightDMLanguage][<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -118,7 +124,7 @@
 lightdm_get_language (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get the current language.</p>
 <div class="refsect3">
-<a name="id-1.2.3.6.3.5"></a><h4>Returns</h4>
+<a name="id-1.2.3.7.3.5"></a><h4>Returns</h4>
 <p> The current language or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if no language. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -130,7 +136,7 @@
 lightdm_language_get_code (<em class="parameter"><code><span class="type">LightDMLanguage</span> *language</code></em>);</pre>
 <p>Get the code of a language (e.g. "de_DE.UTF-8")</p>
 <div class="refsect3">
-<a name="id-1.2.3.6.4.5"></a><h4>Parameters</h4>
+<a name="id-1.2.3.7.4.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -145,7 +151,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.3.6.4.6"></a><h4>Returns</h4>
+<a name="id-1.2.3.7.4.6"></a><h4>Returns</h4>
 <p> The code of the language</p>
 <p></p>
 </div>
@@ -157,7 +163,7 @@
 lightdm_language_get_name (<em class="parameter"><code><span class="type">LightDMLanguage</span> *language</code></em>);</pre>
 <p>Get the name of a language.</p>
 <div class="refsect3">
-<a name="id-1.2.3.6.5.5"></a><h4>Parameters</h4>
+<a name="id-1.2.3.7.5.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -172,7 +178,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.3.6.5.6"></a><h4>Returns</h4>
+<a name="id-1.2.3.7.5.6"></a><h4>Returns</h4>
 <p> The name of the language</p>
 <p></p>
 </div>
@@ -184,7 +190,7 @@
 lightdm_language_get_territory (<em class="parameter"><code><span class="type">LightDMLanguage</span> *language</code></em>);</pre>
 <p>Get the territory the language is used in.</p>
 <div class="refsect3">
-<a name="id-1.2.3.6.6.5"></a><h4>Parameters</h4>
+<a name="id-1.2.3.7.6.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -199,7 +205,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.3.6.6.6"></a><h4>Returns</h4>
+<a name="id-1.2.3.7.6.6"></a><h4>Returns</h4>
 <p> The territory the language is used in.</p>
 <p></p>
 </div>
@@ -212,7 +218,7 @@
                           <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *code</code></em>);</pre>
 <p>Check if a language code matches this language.</p>
 <div class="refsect3">
-<a name="id-1.2.3.6.7.5"></a><h4>Parameters</h4>
+<a name="id-1.2.3.7.7.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -234,7 +240,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.3.6.7.6"></a><h4>Returns</h4>
+<a name="id-1.2.3.7.7.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the code matches this language.</p>
 <p></p>
 </div>
@@ -246,6 +252,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Power-Management.html lightdm-1.10.1/doc/html/lightdm-gobject-1-Power-Management.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Power-Management.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-Power-Management.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,14 +8,15 @@
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="lightdm-gobject-1-User-Accounts.html" title="User Accounts">
 <link rel="next" href="lightdm-gobject-1-System-Information.html" title="System Information">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-Power-Management.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Power-Management.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Power-Management.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -107,6 +108,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-Power-Management.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-Power-Management.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -124,7 +130,7 @@
 lightdm_get_can_suspend (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Checks if authorized to do a system suspend.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.2.5"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.2.5"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if can suspend the system</p>
 <p></p>
 </div>
@@ -136,7 +142,7 @@
 lightdm_suspend (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
 <p>Triggers a system suspend.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.3.5"></a><h4>Parameters</h4>
+<a name="id-1.2.7.7.3.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -151,7 +157,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.7.6.3.6"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.3.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if suspend initiated.</p>
 <p></p>
 </div>
@@ -163,7 +169,7 @@
 lightdm_get_can_hibernate (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Checks if is authorized to do a system hibernate.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.4.5"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.4.5"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if can hibernate the system</p>
 <p></p>
 </div>
@@ -175,7 +181,7 @@
 lightdm_hibernate (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
 <p>Triggers a system hibernate.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.5.5"></a><h4>Parameters</h4>
+<a name="id-1.2.7.7.5.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -190,7 +196,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.7.6.5.6"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.5.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if hibernate initiated.</p>
 <p></p>
 </div>
@@ -202,7 +208,7 @@
 lightdm_get_can_restart (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Checks if is authorized to do a system restart.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.6.5"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.6.5"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if can restart the system</p>
 <p></p>
 </div>
@@ -214,7 +220,7 @@
 lightdm_restart (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
 <p>Triggers a system restart.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.7.5"></a><h4>Parameters</h4>
+<a name="id-1.2.7.7.7.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -229,7 +235,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.7.6.7.6"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.7.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if restart initiated.</p>
 <p></p>
 </div>
@@ -241,7 +247,7 @@
 lightdm_get_can_shutdown (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Checks if is authorized to do a system shutdown.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.8.5"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.8.5"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if can shutdown the system</p>
 <p></p>
 </div>
@@ -253,7 +259,7 @@
 lightdm_shutdown (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
 <p>Triggers a system shutdown.</p>
 <div class="refsect3">
-<a name="id-1.2.7.6.9.5"></a><h4>Parameters</h4>
+<a name="id-1.2.7.7.9.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -268,7 +274,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.7.6.9.6"></a><h4>Returns</h4>
+<a name="id-1.2.7.7.9.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if shutdown initiated.</p>
 <p></p>
 </div>
@@ -280,6 +286,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Sessions.html lightdm-1.10.1/doc/html/lightdm-gobject-1-Sessions.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-Sessions.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-Sessions.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,14 +8,15 @@
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="lightdm-gobject-1-Keyboard-Layout.html" title="Keyboard Layouts">
 <link rel="next" href="lightdm-gobject-1-User-Accounts.html" title="User Accounts">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-Sessions.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Sessions.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-Sessions.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -87,6 +88,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-Sessions.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-Sessions.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -105,7 +111,7 @@
 lightdm_get_remote_sessions (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get the available remote sessions.</p>
 <div class="refsect3">
-<a name="id-1.2.5.6.2.5"></a><h4>Returns</h4>
+<a name="id-1.2.5.7.2.5"></a><h4>Returns</h4>
 <p> A list of <span class="type">LightDMSession</span>. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/element-type"><span class="acronym">element-type</span></a> LightDMSession][<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -117,7 +123,7 @@
 lightdm_get_sessions (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get the available sessions.</p>
 <div class="refsect3">
-<a name="id-1.2.5.6.3.5"></a><h4>Returns</h4>
+<a name="id-1.2.5.7.3.5"></a><h4>Returns</h4>
 <p> A list of <span class="type">LightDMSession</span>. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/element-type"><span class="acronym">element-type</span></a> LightDMSession][<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -129,7 +135,7 @@
 lightdm_session_get_key (<em class="parameter"><code><span class="type">LightDMSession</span> *session</code></em>);</pre>
 <p>Get the key for a session</p>
 <div class="refsect3">
-<a name="id-1.2.5.6.4.5"></a><h4>Parameters</h4>
+<a name="id-1.2.5.7.4.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -144,7 +150,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.5.6.4.6"></a><h4>Returns</h4>
+<a name="id-1.2.5.7.4.6"></a><h4>Returns</h4>
 <p> The session key</p>
 <p></p>
 </div>
@@ -156,7 +162,7 @@
 lightdm_session_get_session_type (<em class="parameter"><code><span class="type">LightDMSession</span> *session</code></em>);</pre>
 <p>Get the type a session</p>
 <div class="refsect3">
-<a name="id-1.2.5.6.5.5"></a><h4>Parameters</h4>
+<a name="id-1.2.5.7.5.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -171,7 +177,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.5.6.5.6"></a><h4>Returns</h4>
+<a name="id-1.2.5.7.5.6"></a><h4>Returns</h4>
 <p> The session type, e.g. x or mir</p>
 <p></p>
 </div>
@@ -183,7 +189,7 @@
 lightdm_session_get_name (<em class="parameter"><code><span class="type">LightDMSession</span> *session</code></em>);</pre>
 <p>Get the name for a session</p>
 <div class="refsect3">
-<a name="id-1.2.5.6.6.5"></a><h4>Parameters</h4>
+<a name="id-1.2.5.7.6.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -198,7 +204,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.5.6.6.6"></a><h4>Returns</h4>
+<a name="id-1.2.5.7.6.6"></a><h4>Returns</h4>
 <p> The session name</p>
 <p></p>
 </div>
@@ -210,7 +216,7 @@
 lightdm_session_get_comment (<em class="parameter"><code><span class="type">LightDMSession</span> *session</code></em>);</pre>
 <p>Get the comment for a session</p>
 <div class="refsect3">
-<a name="id-1.2.5.6.7.5"></a><h4>Parameters</h4>
+<a name="id-1.2.5.7.7.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -225,7 +231,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.5.6.7.6"></a><h4>Returns</h4>
+<a name="id-1.2.5.7.7.6"></a><h4>Returns</h4>
 <p> The session comment</p>
 <p></p>
 </div>
@@ -237,6 +243,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-System-Information.html lightdm-1.10.1/doc/html/lightdm-gobject-1-System-Information.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-System-Information.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-System-Information.html	2014-04-28 04:57:13.000000000 +0700
@@ -7,14 +7,15 @@
 <link rel="home" href="index.html" title="LightDM Reference Manual">
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="lightdm-gobject-1-Power-Management.html" title="Power Management">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-System-Information.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-System-Information.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-System-Information.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -47,6 +48,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-System-Information.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-System-Information.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -63,7 +69,7 @@
 <pre class="programlisting">const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="returnvalue">gchar</span></a> *
 lightdm_get_hostname (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <div class="refsect3">
-<a name="id-1.2.8.6.2.4"></a><h4>Returns</h4>
+<a name="id-1.2.8.7.2.4"></a><h4>Returns</h4>
 <p> The name of the host we are running on.</p>
 <p></p>
 </div>
@@ -75,6 +81,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-User-Accounts.html lightdm-1.10.1/doc/html/lightdm-gobject-1-User-Accounts.html
--- lightdm-1.10.2.orig/doc/html/lightdm-gobject-1-User-Accounts.html	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/lightdm-gobject-1-User-Accounts.html	2014-04-28 04:57:13.000000000 +0700
@@ -8,14 +8,15 @@
 <link rel="up" href="core.html" title="Part I. liblightdm-gobject">
 <link rel="prev" href="lightdm-gobject-1-Sessions.html" title="User Sessions">
 <link rel="next" href="lightdm-gobject-1-Power-Management.html" title="Power Management">
-<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
+<meta name="generator" content="GTK-Doc V1.20 (XML mode)">
 <link rel="stylesheet" href="style.css" type="text/css">
 </head>
 <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
-<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
+<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="10"><tr valign="middle">
 <td width="100%" align="left" class="shortcuts">
-<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
-                  <a href="#lightdm-gobject-1-User-Accounts.description" class="shortcut">Description</a></span>
+<a href="#" class="shortcut">Top</a><span id="nav_description"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-User-Accounts.description" class="shortcut">Description</a></span><span id="nav_hierarchy"> <span class="dim">|</span> 
+                  <a href="#lightdm-gobject-1-User-Accounts.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
 </td>
 <td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
 <td><a accesskey="u" href="core.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
@@ -193,6 +194,11 @@
 </table></div>
 </div>
 <div class="refsect1">
+<a name="lightdm-gobject-1-User-Accounts.object-hierarchy"></a><h2>Object Hierarchy</h2>
+<pre class="screen">
+</pre>
+</div>
+<div class="refsect1">
 <a name="lightdm-gobject-1-User-Accounts.includes"></a><h2>Includes</h2>
 <pre class="synopsis">#include &lt;lightdm.h&gt;
 </pre>
@@ -230,7 +236,7 @@
 lightdm_user_get_background (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the background file path for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.3.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.3.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -245,7 +251,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.3.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.3.6"></a><h4>Returns</h4>
 <p> The background file path for the given user or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if no path</p>
 <p></p>
 </div>
@@ -257,7 +263,7 @@
 lightdm_user_get_display_name (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the display name of a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.4.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.4.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -272,7 +278,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.4.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.4.6"></a><h4>Returns</h4>
 <p> The display name of the given user</p>
 <p></p>
 </div>
@@ -284,7 +290,7 @@
 lightdm_user_get_has_messages (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Check if a user has waiting messages.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.5.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.5.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -299,7 +305,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.5.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.5.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the user has waiting messages.</p>
 <p></p>
 </div>
@@ -311,7 +317,7 @@
 lightdm_user_get_home_directory (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the home directory for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.6.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.6.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -326,7 +332,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.6.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.6.6"></a><h4>Returns</h4>
 <p> The users home directory</p>
 <p></p>
 </div>
@@ -338,7 +344,7 @@
 lightdm_user_get_image (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the image URI for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.7.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.7.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -353,7 +359,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.7.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.7.6"></a><h4>Returns</h4>
 <p> The image URI for the given user or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if no URI</p>
 <p></p>
 </div>
@@ -365,7 +371,7 @@
 lightdm_user_get_language (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the language for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.8.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.8.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -380,7 +386,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.8.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.8.6"></a><h4>Returns</h4>
 <p> The language in the form of a local specification (e.g. "de_DE.UTF-8") for the given user or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if using the system default locale.</p>
 <p></p>
 </div>
@@ -392,7 +398,7 @@
 lightdm_user_get_layout (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the keyboard layout for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.9.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.9.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -407,7 +413,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.9.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.9.6"></a><h4>Returns</h4>
 <p> The keyboard layout for the given user or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if using system defaults.  Copy the value if you want to use it long term.</p>
 <p></p>
 </div>
@@ -419,7 +425,7 @@
 lightdm_user_get_layouts (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the configured keyboard layouts for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.10.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.10.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -434,7 +440,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.10.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.10.6"></a><h4>Returns</h4>
 <p> A NULL-terminated array of keyboard layouts for the given user.  Copy the values if you want to use them long term. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -446,7 +452,7 @@
 lightdm_user_get_logged_in (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Check if a user is logged in.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.11.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.11.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -461,7 +467,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.11.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.11.6"></a><h4>Returns</h4>
 <p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><span class="type">TRUE</span></a> if the user is currently logged in.</p>
 <p></p>
 </div>
@@ -473,7 +479,7 @@
 lightdm_user_get_name (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the name of a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.12.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.12.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -488,7 +494,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.12.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.12.6"></a><h4>Returns</h4>
 <p> The name of the given user</p>
 <p></p>
 </div>
@@ -500,7 +506,7 @@
 lightdm_user_get_real_name (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the real name of a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.13.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.13.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -515,7 +521,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.13.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.13.6"></a><h4>Returns</h4>
 <p> The real name of the given user</p>
 <p></p>
 </div>
@@ -527,7 +533,7 @@
 lightdm_user_get_session (<em class="parameter"><code><span class="type">LightDMUser</span> *user</code></em>);</pre>
 <p>Get the session for a user.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.14.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.14.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -542,7 +548,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.14.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.14.6"></a><h4>Returns</h4>
 <p> The session for the given user or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if using system defaults.</p>
 <p></p>
 </div>
@@ -581,7 +587,7 @@
 lightdm_user_list_get_instance (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
 <p>Get the user list.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.18.5"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.18.5"></a><h4>Returns</h4>
 <p> the <span class="type">LightDMUserList</span>. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -592,7 +598,7 @@
 <pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
 lightdm_user_list_get_length (<em class="parameter"><code><span class="type">LightDMUserList</span> *user_list</code></em>);</pre>
 <div class="refsect3">
-<a name="id-1.2.6.6.19.4"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.19.4"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -607,7 +613,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.19.5"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.19.5"></a><h4>Returns</h4>
 <p> The number of users able to log in</p>
 <p></p>
 </div>
@@ -620,7 +626,7 @@
                                     <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *username</code></em>);</pre>
 <p>Get infomation about a given user or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><span class="type">NULL</span></a> if this user doesn't exist.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.20.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.20.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -642,7 +648,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.20.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.20.6"></a><h4>Returns</h4>
 <p> A <span class="type">LightDMUser</span> entry for the given user. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -655,7 +661,7 @@
 <p>Get a list of users to present to the user.  This list may be a subset of the
 available users and may be empty depending on the server configuration.</p>
 <div class="refsect3">
-<a name="id-1.2.6.6.21.5"></a><h4>Parameters</h4>
+<a name="id-1.2.6.7.21.5"></a><h4>Parameters</h4>
 <div class="informaltable"><table width="100%" border="0">
 <colgroup>
 <col width="150px" class="parameters_name">
@@ -670,7 +676,7 @@
 </table></div>
 </div>
 <div class="refsect3">
-<a name="id-1.2.6.6.21.6"></a><h4>Returns</h4>
+<a name="id-1.2.6.7.21.6"></a><h4>Returns</h4>
 <p> A list of <span class="type">LightDMUser</span> that should be presented to the user. </p>
 <p><span class="annotation">[<a href="http://foldoc.org/element-type"><span class="acronym">element-type</span></a> LightDMUser][<a href="http://foldoc.org/transfer%20none"><span class="acronym">transfer none</span></a>]</span></p>
 </div>
@@ -682,6 +688,6 @@
 </div>
 <div class="footer">
 <hr>
-          Generated by GTK-Doc V1.21</div>
+          Generated by GTK-Doc V1.20</div>
 </body>
 </html>
\ No newline at end of file
diff -Naur lightdm-1.10.2.orig/doc/html/style.css lightdm-1.10.1/doc/html/style.css
--- lightdm-1.10.2.orig/doc/html/style.css	2014-09-17 11:25:31.000000000 +0700
+++ lightdm-1.10.1/doc/html/style.css	2014-04-28 04:57:13.000000000 +0700
@@ -30,6 +30,127 @@
   vertical-align: top;
 }
 
+@media screen {
+  sup a.footnote
+  {
+    position: relative;
+    top: 0em ! important;
+  }
+  /* this is needed so that the local anchors are displayed below the naviagtion */
+  div.footnote a[name], div.refnamediv a[name], div.refsect1 a[name], div.refsect2 a[name], div.index a[name], div.glossary a[name], div.sect1 a[name]
+  {
+    display: inline-block;
+    position: relative;
+    top:-5em;
+  }
+  /* this seems to be a bug in the xsl style sheets when generating indexes */
+  div.index div.index
+  {
+    top: 0em;
+  }
+  /* make space for the fixed navigation bar and add space at the bottom so that
+   * link targets appear somewhat close to top
+   */
+  body
+  {
+    padding-top: 5em;
+    padding-bottom: 500px;
+    max-width: 60em;
+  }
+  p
+  {
+    max-width: 60em;
+  }
+  /* style and size the navigation bar */
+  table.navigation#top
+  {
+    position: fixed;
+    background: #e2e2e2;
+    border-bottom: solid 1px #babdb6;
+    margin-top: 0;
+    margin-bottom: 0;
+    top: 0;
+    left: 0;
+    height: 3em;
+    z-index: 10;
+  }
+  .navigation a, .navigation a:visited
+  {
+    /* tango:sky blue 3 */
+    color: #204a87;
+  }
+  .navigation a:hover
+  {
+    /* tango:sky blue 2 */
+    color: #3465a4;
+  }
+  td.shortcuts
+  {
+    /* tango:sky blue 2 */
+    color: #3465a4;
+    font-size: 80%;
+    white-space: nowrap;
+  }
+  td.shortcuts .dim
+  {
+    color: #babdb6;
+  }
+}
+@media screen and (min-width: 60em) {
+  /* screen larger than 60em */
+  body { margin: auto; }
+}
+@media screen and (max-width: 60em) {
+  /* screen less than 60em */
+  #nav_hierarchy { display: none; }
+  #nav_interfaces { display: none; }
+  #nav_prerequisites { display: none; }
+  #nav_derived_interfaces { display: none; }
+  #nav_implementations { display: none; }
+  #nav_child_properties { display: none; }
+  #nav_style_properties { display: none; }
+  #nav_index { display: none; }
+  #nav_glossary { display: none; }
+  .gallery_image { display: none; }
+  .property_flags { display: none; }
+  .signal_flags { display: none; }
+  .parameter_annotations { display: none; }
+  .enum_member_annotations { display: none; }
+  .struct_member_annotations { display: none; }
+  .union_member_annotations { display: none; }
+  /* now that a column is hidden, optimize space */
+  col.parameters_name { width: auto; }
+  col.parameters_description { width: auto; }
+  col.struct_members_name { width: auto; }
+  col.struct_members_description { width: auto; }
+  col.enum_members_name { width: auto; }
+  col.enum_members_description { width: auto; }
+  col.union_members_name { width: auto; }
+  col.union_members_description { width: auto; }
+}
+@media print {
+  table.navigation {
+    visibility: collapse;
+    display: none;
+  }
+  div.titlepage table.navigation {
+    visibility: visible;
+    display: table;
+    background: #e2e2e2;
+    border: solid 1px #babdb6;
+    margin-top: 0;
+    margin-bottom: 0;
+    top: 0;
+    left: 0;
+    height: 3em;
+  }
+}
+
+.navigation .title
+{
+  font-size: 120%;
+}
+
 div.gallery-float
 {
   float: left;
@@ -60,7 +181,7 @@
 div.informaltable table
 {
   border-collapse: separate;
-  border-spacing: 1em 0.5em;
+  border-spacing: 20px 3px;
   border: none;
 }
 
@@ -118,11 +239,6 @@
  color: #729fcf;
 }
 
-td p
-{
-  margin: 0.25em;
-}
-
 div.table table
 {
   border-collapse: collapse;
@@ -288,28 +404,21 @@
   font-weight: normal;
 }
 
-acronym,abbr 
-{
-  border-bottom: 1px dotted gray;
-}
-
 /* code listings */
 
-.listing_code .programlisting .normal,
-.listing_code .programlisting .normal a,
-.listing_code .programlisting .number,
-.listing_code .programlisting .cbracket,
-.listing_code .programlisting .symbol     { color: #555753; }
-.listing_code .programlisting .comment,
+.listing_code .programlisting .cbracket   { color: #a40000; } /* tango: scarlet red 3 */
+.listing_code .programlisting .comment    { color: #a1a39d; } /* tango: aluminium 4 */
+.listing_code .programlisting .function   { color: #000000; font-weight: bold; }
+.listing_code .programlisting .function a { color: #11326b; font-weight: bold; } /* tango: sky blue 4 */
+.listing_code .programlisting .keyword    { color: #4e9a06; } /* tango: chameleon 3  */
 .listing_code .programlisting .linenum    { color: #babdb6; } /* tango: aluminium 3 */
-.listing_code .programlisting .function,
-.listing_code .programlisting .function a,
+.listing_code .programlisting .normal     { color: #000000; }
+.listing_code .programlisting .number     { color: #75507b; } /* tango: plum 2 */
 .listing_code .programlisting .preproc    { color: #204a87; } /* tango: sky blue 3  */
-.listing_code .programlisting .string     { color: #ad7fa8; } /* tango: plum */
-.listing_code .programlisting .keyword,
-.listing_code .programlisting .usertype,
-.listing_code .programlisting .type,
-.listing_code .programlisting .type a     { color: #4e9a06; } /* tango: chameleon 3  */
+.listing_code .programlisting .string     { color: #c17d11; } /* tango: chocolate 2 */
+.listing_code .programlisting .type       { color: #000000; }
+.listing_code .programlisting .type a     { color: #11326b; } /* tango: sky blue 4 */
+.listing_code .programlisting .symbol     { color: #ce5c00; } /* tango: orange 3 */
 
 .listing_frame {
   /* tango:sky blue 1 */
@@ -324,6 +433,11 @@
   padding: 0.5em;
 }
 .listing_lines {
+  /* this just adds visual clutter and
+     takes precious room from small screens */
+  display: none;
+}
+.listing_lines {
   /* tango:sky blue 0.5 */
   background: #a6c5e3;
   background: rgba(114, 159, 207, 0.2);
@@ -345,132 +459,3 @@
   margin: 0px;
 }
 
-@media screen {
-  sup a.footnote
-  {
-    position: relative;
-    top: 0em ! important;
-  }
-  /* this is needed so that the local anchors are displayed below the naviagtion */
-  div.footnote a[name], div.refnamediv a[name], div.refsect1 a[name], div.refsect2 a[name], div.index a[name], div.glossary a[name], div.sect1 a[name]
-  {
-    display: inline-block;
-    position: relative;
-    top:-5em;
-  }
-  /* this seems to be a bug in the xsl style sheets when generating indexes */
-  div.index div.index
-  {
-    top: 0em;
-  }
-  /* make space for the fixed navigation bar and add space at the bottom so that
-   * link targets appear somewhat close to top
-   */
-  body
-  {
-    padding-top: 2.5em;
-    padding-bottom: 500px;
-    max-width: 60em;
-  }
-  p
-  {
-    max-width: 60em;
-  }
-  /* style and size the navigation bar */
-  table.navigation#top
-  {
-    position: fixed;
-    background: #e2e2e2;
-    border-bottom: solid 1px #babdb6;
-    border-spacing: 5px;
-    margin-top: 0;
-    margin-bottom: 0;
-    top: 0;
-    left: 0;
-    z-index: 10;
-  }
-  table.navigation#top td
-  {
-    padding-left: 6px;
-    padding-right: 6px;
-  }
-  .navigation a, .navigation a:visited
-  {
-    /* tango:sky blue 3 */
-    color: #204a87;
-  }
-  .navigation a:hover
-  {
-    /* tango:sky blue 2 */
-    color: #3465a4;
-  }
-  td.shortcuts
-  {
-    /* tango:sky blue 2 */
-    color: #3465a4;
-    font-size: 80%;
-    white-space: nowrap;
-  }
-  td.shortcuts .dim
-  {
-    color: #babdb6;
-  }
-  .navigation .title
-  {
-    font-size: 80%;
-    max-width: none;
-    margin: 0px;
-    font-weight: normal;
-  }
-}
-@media screen and (min-width: 60em) {
-  /* screen larger than 60em */
-  body { margin: auto; }
-}
-@media screen and (max-width: 60em) {
-  /* screen less than 60em */
-  #nav_hierarchy { display: none; }
-  #nav_interfaces { display: none; }
-  #nav_prerequisites { display: none; }
-  #nav_derived_interfaces { display: none; }
-  #nav_implementations { display: none; }
-  #nav_child_properties { display: none; }
-  #nav_style_properties { display: none; }
-  #nav_index { display: none; }
-  #nav_glossary { display: none; }
-  .gallery_image { display: none; }
-  .property_flags { display: none; }
-  .signal_flags { display: none; }
-  .parameter_annotations { display: none; }
-  .enum_member_annotations { display: none; }
-  .struct_member_annotations { display: none; }
-  .union_member_annotations { display: none; }
-  /* now that a column is hidden, optimize space */
-  col.parameters_name { width: auto; }
-  col.parameters_description { width: auto; }
-  col.struct_members_name { width: auto; }
-  col.struct_members_description { width: auto; }
-  col.enum_members_name { width: auto; }
-  col.enum_members_description { width: auto; }
-  col.union_members_name { width: auto; }
-  col.union_members_description { width: auto; }
-  .listing_lines { display: none; }
-}
-@media print {
-  table.navigation {
-    visibility: collapse;
-    display: none;
-  }
-  div.titlepage table.navigation {
-    visibility: visible;
-    display: table;
-    background: #e2e2e2;
-    border: solid 1px #babdb6;
-    margin-top: 0;
-    margin-bottom: 0;
-    top: 0;
-    left: 0;
-    height: 3em;
-  }
-}
-
diff -Naur lightdm-1.10.2.orig/doc/Makefile.in lightdm-1.10.1/doc/Makefile.in
--- lightdm-1.10.2.orig/doc/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/doc/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -248,8 +248,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/help/Makefile.in lightdm-1.10.1/help/Makefile.in
--- lightdm-1.10.2.orig/help/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/help/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -241,8 +241,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/liblightdm-gobject/greeter.c lightdm-1.10.1/liblightdm-gobject/greeter.c
--- lightdm-1.10.2.orig/liblightdm-gobject/greeter.c	2014-09-08 07:40:15.000000000 +0700
+++ lightdm-1.10.1/liblightdm-gobject/greeter.c	2014-04-08 11:30:25.000000000 +0700
@@ -45,26 +45,16 @@
 
 typedef struct
 {
-    /* Channel to write to daemon */
-    GIOChannel *to_server_channel;
-
-    /* Channel to read from daemon */
-    GIOChannel *from_server_channel;
+    gboolean connected;
 
-    /* Data read from the daemon */
+    GIOChannel *to_server_channel, *from_server_channel;
     guint8 *read_buffer;
     gsize n_read;
 
     gsize n_responses_waiting;
     GList *responses_received;
 
-    /* TRUE if have got a connect response */
-    gboolean connected;
-
-    /* Hints provided by the daemon */
     GHashTable *hints;
-
-    /* Timeout source to notify greeter to autologin */
     guint autologin_timeout;
 
     gchar *authentication_user;
@@ -113,7 +103,7 @@
  * Return value: the new #LightDMGreeter
  **/
 LightDMGreeter *
-lightdm_greeter_new (void)
+lightdm_greeter_new ()
 {
     return g_object_new (LIGHTDM_TYPE_GREETER, NULL);
 }
@@ -229,8 +219,7 @@
 write_message (LightDMGreeter *greeter, guint8 *message, gsize message_length)
 {
     LightDMGreeterPrivate *priv = GET_PRIVATE (greeter);
-    gchar *data;
-    gsize data_length;
+    GIOStatus status;
     GError *error = NULL;
     guint32 stated_length;
 
@@ -246,29 +235,13 @@
         return;
     }
 
-    data = (gchar *) message;
-    data_length = message_length;
-    while (data_length > 0)
-    {
-        GIOStatus status;
-        gsize n_written;
-
-        status = g_io_channel_write_chars (priv->to_server_channel, data, data_length, &n_written, &error);
-        if (error)
-            g_warning ("Error writing to daemon: %s", error->message);
-        g_clear_error (&error);
-        if (status != G_IO_STATUS_NORMAL)
-            return;
-
-        data_length -= n_written;
-        data += n_written;
-    }
-
-    g_debug ("Wrote %zi bytes to daemon", message_length);
-    g_io_channel_flush (priv->to_server_channel, &error);
+    status = g_io_channel_write_chars (priv->to_server_channel, (gchar *) message, message_length, NULL, &error);
     if (error)
-        g_warning ("Failed to flush data to daemon: %s", error->message);
+        g_warning ("Error writing to daemon: %s", error->message);
     g_clear_error (&error);
+    if (status == G_IO_STATUS_NORMAL)
+        g_debug ("Wrote %zi bytes to daemon", message_length);
+    g_io_channel_flush (priv->to_server_channel, NULL);
 }
 
 static void
@@ -965,23 +938,27 @@
 
     if (priv->n_responses_waiting == 0)
     {
-        guint32 msg_length;
-        GList *iter;
+      guint32 msg_length;
+      GList *iter;
 
-        g_debug ("Providing response to display manager");
+      g_debug ("Providing response to display manager");
 
-        msg_length = int_length ();
-        for (iter = priv->responses_received; iter; iter = iter->next)
-            msg_length += string_length ((gchar *)iter->data);
-
-        write_header (message, MAX_MESSAGE_LENGTH, GREETER_MESSAGE_CONTINUE_AUTHENTICATION, msg_length, &offset);
-        write_int (message, MAX_MESSAGE_LENGTH, g_list_length (priv->responses_received), &offset);
-        for (iter = priv->responses_received; iter; iter = iter->next)
-            write_string (message, MAX_MESSAGE_LENGTH, (gchar *)iter->data, &offset);
-        write_message (greeter, message, offset);
+      msg_length = int_length ();
+      for (iter = priv->responses_received; iter; iter = iter->next)
+      {
+          msg_length += string_length ((gchar *)iter->data);
+      }
+
+      write_header (message, MAX_MESSAGE_LENGTH, GREETER_MESSAGE_CONTINUE_AUTHENTICATION, msg_length, &offset);
+      write_int (message, MAX_MESSAGE_LENGTH, g_list_length (priv->responses_received), &offset);
+      for (iter = priv->responses_received; iter; iter = iter->next)
+      {
+          write_string (message, MAX_MESSAGE_LENGTH, (gchar *)iter->data, &offset);
+      }
+      write_message (greeter, message, offset);
 
-        g_list_free_full (priv->responses_received, g_free);
-        priv->responses_received = NULL;
+      g_list_free_full (priv->responses_received, g_free);
+      priv->responses_received = NULL;
     }
 }
 
@@ -1147,7 +1124,7 @@
  * greeters only need to call this method if they want to store something in
  * the directory themselves.
  *
- * Return value: The path to the shared directory, free with g_free.
+ * Return value: The path to the shared directory, free with g_free
  **/
 gchar *
 lightdm_greeter_ensure_shared_data_dir_sync (LightDMGreeter *greeter, const gchar *username)
diff -Naur lightdm-1.10.2.orig/liblightdm-gobject/liblightdm-gobject-1.vapi lightdm-1.10.1/liblightdm-gobject/liblightdm-gobject-1.vapi
--- lightdm-1.10.2.orig/liblightdm-gobject/liblightdm-gobject-1.vapi	2014-09-08 07:43:07.000000000 +0700
+++ lightdm-1.10.1/liblightdm-gobject/liblightdm-gobject-1.vapi	2014-04-08 11:30:25.000000000 +0700
@@ -100,7 +100,6 @@
         public bool logged_in { get; }
         public unowned string name { get; }
         public unowned string real_name { get; }
-        public unowned Posix.uid_t uid { get; }
         public unowned string home_directory { get; }
         public unowned string session { get; }
         public unowned string background { get; }
diff -Naur lightdm-1.10.2.orig/liblightdm-gobject/lightdm/greeter.h lightdm-1.10.1/liblightdm-gobject/lightdm/greeter.h
--- lightdm-1.10.2.orig/liblightdm-gobject/lightdm/greeter.h	2014-09-08 07:37:37.000000000 +0700
+++ lightdm-1.10.1/liblightdm-gobject/lightdm/greeter.h	2014-04-08 11:30:25.000000000 +0700
@@ -16,7 +16,7 @@
 G_BEGIN_DECLS
 
 #define LIGHTDM_TYPE_GREETER            (lightdm_greeter_get_type())
-#define LIGHTDM_GREETER(obj)            (G_TYPE_CHECK_INSTANCE_CAST ((obj), LIGHTDM_TYPE_GREETER, LightDMGreeter))
+#define LIGHTDM_GREETER(obj)            (G_TYPE_CHECK_INSTANCE_CAST ((obj), LIGHTDM_TYPE_GREETER, LightDMGreeter));
 #define LIGHTDM_GREETER_CLASS(klass)    (G_TYPE_CHECK_CLASS_CAST ((klass), LIGHTDM_TYPE_GREETER, LightDMGreeterClass))
 #define LIGHTDM_IS_GREETER(obj)         (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LIGHTDM_TYPE_GREETER))
 #define LIGHTDM_IS_GREETER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LIGHTDM_TYPE_GREETER))
diff -Naur lightdm-1.10.2.orig/liblightdm-gobject/lightdm/user.h lightdm-1.10.1/liblightdm-gobject/lightdm/user.h
--- lightdm-1.10.2.orig/liblightdm-gobject/lightdm/user.h	2014-09-08 07:43:07.000000000 +0700
+++ lightdm-1.10.1/liblightdm-gobject/lightdm/user.h	2014-04-08 11:30:25.000000000 +0700
@@ -106,8 +106,6 @@
 
 gboolean lightdm_user_get_has_messages (LightDMUser *user);
 
-uid_t lightdm_user_get_uid (LightDMUser *user);
-
 G_END_DECLS
 
 #endif /* LIGHTDM_USER_H_ */
diff -Naur lightdm-1.10.2.orig/liblightdm-gobject/Makefile.in lightdm-1.10.1/liblightdm-gobject/Makefile.in
--- lightdm-1.10.2.orig/liblightdm-gobject/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/liblightdm-gobject/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -344,8 +344,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/liblightdm-gobject/user.c lightdm-1.10.1/liblightdm-gobject/user.c
--- lightdm-1.10.2.orig/liblightdm-gobject/user.c	2014-09-08 07:43:07.000000000 +0700
+++ lightdm-1.10.1/liblightdm-gobject/user.c	2014-04-08 11:30:25.000000000 +0700
@@ -38,8 +38,7 @@
     USER_PROP_LAYOUTS,
     USER_PROP_SESSION,
     USER_PROP_LOGGED_IN,
-    USER_PROP_HAS_MESSAGES,
-    USER_PROP_UID,
+    USER_PROP_HAS_MESSAGES
 };
 
 enum
@@ -527,21 +526,6 @@
     return common_user_get_has_messages (GET_USER_PRIVATE (user)->common_user);
 }
 
-/**
- * lightdm_user_get_uid:
- * @user: A #LightDMUser
- * 
- * Get the uid of a user.
- * 
- * Return value: The uid of the given user
- **/
-uid_t
-lightdm_user_get_uid (LightDMUser *user)
-{
-    g_return_val_if_fail (LIGHTDM_IS_USER (user), NULL);
-    return common_user_get_uid (GET_USER_PRIVATE (user)->common_user);
-}
-
 static void
 lightdm_user_init (LightDMUser *user)
 {
@@ -615,9 +599,6 @@
     case USER_PROP_HAS_MESSAGES:
         g_value_set_boolean (value, lightdm_user_get_has_messages (self));
         break;
-    case USER_PROP_UID:
-        g_value_set_uint64 (value, lightdm_user_get_uid (self));
-        break;
     default:
         G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
         break;
@@ -639,7 +620,7 @@
 lightdm_user_class_init (LightDMUserClass *klass)
 {
     GObjectClass *object_class = G_OBJECT_CLASS (klass);
-
+  
     g_type_class_add_private (klass, sizeof (LightDMUserPrivate));
 
     object_class->set_property = lightdm_user_set_property;
@@ -737,13 +718,6 @@
                                                            "TRUE if the user is has waiting messages",
                                                            FALSE,
                                                            G_PARAM_READWRITE));
-    g_object_class_install_property (object_class,
-                                     USER_PROP_UID,
-                                     g_param_spec_string ("uid",
-                                                          "uid",
-                                                          "User UID",
-                                                          NULL,
-                                                          G_PARAM_READABLE));
 
     /**
      * LightDMUser::changed:
diff -Naur lightdm-1.10.2.orig/liblightdm-qt/Makefile.in lightdm-1.10.1/liblightdm-qt/Makefile.in
--- lightdm-1.10.2.orig/liblightdm-qt/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/liblightdm-qt/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -401,8 +401,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/liblightdm-qt/QLightDM/usersmodel.h lightdm-1.10.1/liblightdm-qt/QLightDM/usersmodel.h
--- lightdm-1.10.2.orig/liblightdm-qt/QLightDM/usersmodel.h	2014-09-08 07:43:07.000000000 +0700
+++ lightdm-1.10.1/liblightdm-qt/QLightDM/usersmodel.h	2014-04-08 11:30:25.000000000 +0700
@@ -37,8 +37,7 @@
                          SessionRole,
                          HasMessagesRole,
                          ImagePathRole,
-                         BackgroundPathRole,
-                         UidRole
+                         BackgroundPathRole
     };
 
     int rowCount(const QModelIndex &parent) const;
diff -Naur lightdm-1.10.2.orig/liblightdm-qt/usersmodel.cpp lightdm-1.10.1/liblightdm-qt/usersmodel.cpp
--- lightdm-1.10.2.orig/liblightdm-qt/usersmodel.cpp	2014-09-08 07:43:07.000000000 +0700
+++ lightdm-1.10.1/liblightdm-qt/usersmodel.cpp	2014-04-08 11:30:25.000000000 +0700
@@ -29,7 +29,6 @@
     QString session;
     bool isLoggedIn;
     bool hasMessages;
-    quint64 uid;
     QString displayName() const;
 };
 
@@ -67,7 +66,7 @@
 {
 #if !defined(GLIB_VERSION_2_36)
     g_type_init();
-#endif
+#endif  
 }
 
 UsersModelPrivate::~UsersModelPrivate()
@@ -100,7 +99,6 @@
             user.session = QString::fromUtf8(lightdm_user_get_session(ldmUser));
             user.isLoggedIn = lightdm_user_get_logged_in(ldmUser);
             user.hasMessages = lightdm_user_get_has_messages(ldmUser);
-            user.uid = (quint64)lightdm_user_get_uid(ldmUser);
             users.append(user);
         }
 
@@ -111,6 +109,8 @@
     g_signal_connect(lightdm_user_list_get_instance(), "user-removed", G_CALLBACK (cb_userRemoved), this);
 }
 
+
+
 void UsersModelPrivate::cb_userAdded(LightDMUserList *user_list, LightDMUser *ldmUser, gpointer data)
 {
     Q_UNUSED(user_list)
@@ -126,7 +126,6 @@
     user.background = QString::fromUtf8(lightdm_user_get_background(ldmUser));
     user.isLoggedIn = lightdm_user_get_logged_in(ldmUser);
     user.hasMessages = lightdm_user_get_has_messages(ldmUser);
-    user.uid = (quint64)lightdm_user_get_uid(ldmUser);
     that->users.append(user);
 
     that->q_func()->endInsertRows();
@@ -149,7 +148,6 @@
             that->users[i].background = QString::fromUtf8(lightdm_user_get_background(ldmUser));
             that->users[i].isLoggedIn = lightdm_user_get_logged_in(ldmUser);
             that->users[i].hasMessages = lightdm_user_get_has_messages(ldmUser);
-            that->users[i].uid = (quint64)lightdm_user_get_uid(ldmUser);
 
             QModelIndex index = that->q_ptr->createIndex(i, 0);
             that->q_ptr->dataChanged(index, index);
@@ -191,7 +189,6 @@
     roles[SessionRole] = "session";
     roles[HasMessagesRole] = "hasMessages";
     roles[ImagePathRole] = "imagePath";
-    roles[UidRole] = "uid";
     setRoleNames(roles);
     d->loadUsers();
 
@@ -243,8 +240,6 @@
         return d->users[row].hasMessages;
     case UsersModel::ImagePathRole:
         return d->users[row].image;
-    case UsersModel::UidRole:
-        return d->users[row].uid;
     }
 
     return QVariant();
diff -Naur lightdm-1.10.2.orig/ltmain.sh lightdm-1.10.1/ltmain.sh
--- lightdm-1.10.2.orig/ltmain.sh	2014-09-17 11:23:18.000000000 +0700
+++ lightdm-1.10.1/ltmain.sh	2014-04-28 04:53:55.000000000 +0700
@@ -70,7 +70,7 @@
 #         compiler:		$LTCC
 #         compiler flags:		$LTCFLAGS
 #         linker:		$LD (gnu? $with_gnu_ld)
-#         $progname:	(GNU libtool) 2.4.2 Debian-2.4.2-1.10ubuntu1
+#         $progname:	(GNU libtool) 2.4.2 Debian-2.4.2-1.7ubuntu1
 #         automake:	$automake_version
 #         autoconf:	$autoconf_version
 #
@@ -80,7 +80,7 @@
 
 PROGRAM=libtool
 PACKAGE=libtool
-VERSION="2.4.2 Debian-2.4.2-1.10ubuntu1"
+VERSION="2.4.2 Debian-2.4.2-1.7ubuntu1"
 TIMESTAMP=""
 package_revision=1.3337
 
diff -Naur lightdm-1.10.2.orig/Makefile.in lightdm-1.10.1/Makefile.in
--- lightdm-1.10.2.orig/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -83,7 +83,7 @@
 DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Makefile.am \
 	$(top_srcdir)/configure $(am__configure_deps) \
 	$(srcdir)/config.h.in NEWS compile config.guess config.sub \
-	depcomp install-sh missing ltmain.sh
+	install-sh missing ltmain.sh
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/m4/gtk-doc.m4 \
 	$(top_srcdir)/m4/intltool.m4 $(top_srcdir)/m4/introspection.m4 \
@@ -327,8 +327,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/NEWS lightdm-1.10.1/NEWS
--- lightdm-1.10.2.orig/NEWS	2014-09-17 11:21:34.000000000 +0700
+++ lightdm-1.10.1/NEWS	2014-04-28 04:56:41.000000000 +0700
@@ -1,24 +1,3 @@
-Overview of changes in lightdm 1.10.2
-
-    * Use logind to provide the list of seats to use. This is disabled unless
-      logind-load-seats (in [LightDM] section) is set to true. This is the
-      default behaviour in lightdm 1.12.
-    * Fix crash if running script hooks with non-X display servers.
-    * Add a seat option 'allow-user-switching' that can disable all user
-      switching for that seat
-    * Make PAM services configurable
-    * Add liblightdm method to get user UID
-    * Add a new session type 'mir-container' that allows the session to run
-      inside a custom system compositor.
-    * Add --show-config option that shows combined configuration.
-    * Use XDG_SESSION_ID from PAM instead of using the logind D-Bus API.
-    * Make socket writing code used between greeter and daemon more robust to
-      errors.
-    * Correct section name in default users.conf file.
-    * Fix tests failing with Qt 5.3 due to it checking getuid/geteuid which we are faking.
-    * Fix small memory leaks.
-    * Test improvements
-
 Overview of changes in lightdm 1.10.1
 
     * When switching to an existing session refresh PAM credentials and end
diff -Naur lightdm-1.10.2.orig/src/display-manager.c lightdm-1.10.1/src/display-manager.c
--- lightdm-1.10.2.orig/src/display-manager.c	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/display-manager.c	2014-04-08 11:30:25.000000000 +0700
@@ -57,22 +57,6 @@
     return manager->priv->seats;
 }
 
-Seat *
-display_manager_get_seat (DisplayManager *manager, const gchar *name)
-{
-    GList *link;
-
-    for (link = manager->priv->seats; link; link = link->next)
-    {
-        Seat *seat = link->data;
-
-        if (strcmp (seat_get_name (seat), name) == 0)
-            return seat;
-    }
-
-    return NULL;
-}
-
 static void
 check_stopped (DisplayManager *manager)
 {
diff -Naur lightdm-1.10.2.orig/src/display-manager.h lightdm-1.10.1/src/display-manager.h
--- lightdm-1.10.2.orig/src/display-manager.h	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/display-manager.h	2014-04-08 11:30:25.000000000 +0700
@@ -46,8 +46,6 @@
 
 GList *display_manager_get_seats (DisplayManager *manager);
 
-Seat *display_manager_get_seat (DisplayManager *manager, const gchar *name);
-
 void display_manager_start (DisplayManager *manager);
 
 void display_manager_stop (DisplayManager *manager);
diff -Naur lightdm-1.10.2.orig/src/dm-tool.c lightdm-1.10.1/src/dm-tool.c
--- lightdm-1.10.2.orig/src/dm-tool.c	2014-09-08 07:22:12.000000000 +0700
+++ lightdm-1.10.1/src/dm-tool.c	2014-04-08 11:30:25.000000000 +0700
@@ -210,7 +210,7 @@
     {
         gchar *username, *session = "";
 
-        if (n_options < 1 || n_options > 2)
+        if (n_options > 2)
         {
             g_printerr ("Usage switch-to-user USERNAME [SESSION]\n");
             usage ();
diff -Naur lightdm-1.10.2.orig/src/greeter.c lightdm-1.10.1/src/greeter.c
--- lightdm-1.10.2.orig/src/greeter.c	2014-09-08 06:29:36.000000000 +0700
+++ lightdm-1.10.1/src/greeter.c	2014-04-08 11:30:25.000000000 +0700
@@ -172,31 +172,13 @@
 static void
 write_message (Greeter *greeter, guint8 *message, gsize message_length)
 {
-    gchar *data;
-    gsize data_length;
     GError *error = NULL;
 
-    data = (gchar *) message;
-    data_length = message_length;
-    while (data_length > 0)
-    {
-        GIOStatus status;
-        gsize n_written;
-
-        status = g_io_channel_write_chars (greeter->priv->to_greeter_channel, data, data_length, &n_written, &error);
-        if (error)
-            l_warning (greeter, "Error writing to greeter: %s", error->message);
-        g_clear_error (&error);
-        if (status != G_IO_STATUS_NORMAL)
-            return;
-        data_length -= n_written;
-        data += n_written;
-    }
-
-    g_io_channel_flush (greeter->priv->to_greeter_channel, &error);
+    g_io_channel_write_chars (greeter->priv->to_greeter_channel, (gchar *) message, message_length, NULL, &error);
     if (error)
-        l_warning (greeter, "Failed to flush data to greeter: %s", error->message);
+        l_warning (greeter, "Error writing to greeter: %s", error->message);
     g_clear_error (&error);
+    g_io_channel_flush (greeter->priv->to_greeter_channel, NULL);
 }
 
 static void
diff -Naur lightdm-1.10.2.orig/src/lightdm.c lightdm-1.10.1/src/lightdm.c
--- lightdm-1.10.2.orig/src/lightdm.c	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/lightdm.c	2014-04-08 11:30:25.000000000 +0700
@@ -32,7 +32,6 @@
 #include "session-child.h"
 #include "shared-data-manager.h"
 #include "user-list.h"
-#include "login1.h"
 
 static gchar *config_path = NULL;
 static GMainLoop *loop = NULL;
@@ -64,8 +63,6 @@
 
 #define LIGHTDM_BUS_NAME "org.freedesktop.DisplayManager"
 
-static gboolean update_login1_seat (Login1Seat *login1_seat);
-
 static void
 log_cb (const gchar *log_domain, GLogLevelFlags log_level, const gchar *message, gpointer data)
 {
@@ -440,58 +437,45 @@
     if (g_strcmp0 (method_name, "SwitchToGreeter") == 0)
     {
         if (!g_variant_is_of_type (parameters, G_VARIANT_TYPE ("()")))
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_INVALID_ARGS, "Invalid arguments");
+            return;
 
-        if (seat_switch_to_greeter (seat))
-            g_dbus_method_invocation_return_value (invocation, NULL);
-        else// FIXME: Need to make proper error
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "Failed to switch to greeter");
+        seat_switch_to_greeter (seat);
+        g_dbus_method_invocation_return_value (invocation, NULL);
     }
     else if (g_strcmp0 (method_name, "SwitchToUser") == 0)
     {
         const gchar *username, *session_name;
 
         if (!g_variant_is_of_type (parameters, G_VARIANT_TYPE ("(ss)")))
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_INVALID_ARGS, "Invalid arguments");
+            return;
 
         g_variant_get (parameters, "(&s&s)", &username, &session_name);
         if (strcmp (session_name, "") == 0)
             session_name = NULL;
 
-        if (seat_switch_to_user (seat, username, session_name))
-            g_dbus_method_invocation_return_value (invocation, NULL);
-        else// FIXME: Need to make proper error
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "Failed to switch to user");
+        seat_switch_to_user (seat, username, session_name);
+        g_dbus_method_invocation_return_value (invocation, NULL);
     }
     else if (g_strcmp0 (method_name, "SwitchToGuest") == 0)
     {
         const gchar *session_name;
 
         if (!g_variant_is_of_type (parameters, G_VARIANT_TYPE ("(s)")))
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_INVALID_ARGS, "Invalid arguments");
+            return;
 
         g_variant_get (parameters, "(&s)", &session_name);
         if (strcmp (session_name, "") == 0)
             session_name = NULL;
 
-        if (seat_switch_to_guest (seat, session_name))
-            g_dbus_method_invocation_return_value (invocation, NULL);
-        else// FIXME: Need to make proper error
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "Failed to switch to guest");
+        seat_switch_to_guest (seat, session_name);
+        g_dbus_method_invocation_return_value (invocation, NULL);
     }
     else if (g_strcmp0 (method_name, "Lock") == 0)
     {
-        if (!g_variant_is_of_type (parameters, G_VARIANT_TYPE ("()")))
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_INVALID_ARGS, "Invalid arguments");
-
         /* FIXME: Should only allow locks if have a session on this seat */
-        if (seat_lock (seat, NULL))
-            g_dbus_method_invocation_return_value (invocation, NULL);
-        else// FIXME: Need to make proper error
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "Failed to lock seat");
+        seat_lock (seat, NULL);
+        g_dbus_method_invocation_return_value (invocation, NULL);
     }
-    else
-        g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_UNKNOWN_METHOD, "Unknown method");
 }
 
 static Seat *
@@ -844,12 +828,14 @@
         key_name = config_get_string (config_get_instance (), "XDMCPServer", "key");
         if (key_name)
         {
-            gchar *path;
+            gchar *dir, *path;
             GKeyFile *keys;
             gboolean result;
             GError *error = NULL;
 
-            path = g_build_filename (config_get_directory (config_get_instance ()), "keys.conf", NULL);
+            dir = config_get_string (config_get_instance (), "LightDM", "config-directory");
+            path = g_build_filename (dir, "keys.conf", NULL);
+            g_free (dir);
 
             keys = g_key_file_new ();
             result = g_key_file_load_from_file (keys, path, G_KEY_FILE_NONE, &error);
@@ -917,154 +903,14 @@
     exit (EXIT_FAILURE);
 }
 
-static gboolean
-add_login1_seat (Login1Seat *login1_seat)
-{
-    const gchar *seat_name = login1_seat_get_id (login1_seat);
-    gchar **groups, **i;
-    gchar *config_section = NULL;
-    gchar **types = NULL, **type;
-    Seat *seat = NULL;
-    gboolean is_seat0, started = FALSE;
-
-    g_debug ("New seat added from logind: %s", seat_name);
-    is_seat0 = strcmp (seat_name, "seat0") == 0;
-
-    groups = config_get_groups (config_get_instance ());
-    for (i = groups; !config_section && *i; i++)
-    {
-        if (g_str_has_prefix (*i, "Seat:") &&
-            g_str_has_suffix (*i, seat_name))
-        {
-            config_section = g_strdup (*i);
-            break;
-        }
-    }
-    g_strfreev (groups);
-
-    if (config_section)
-    {
-        g_debug ("Loading properties from config section %s", config_section);
-        types = config_get_string_list (config_get_instance (), config_section, "type");
-    }
-
-    if (!types)
-        types = config_get_string_list (config_get_instance (), "SeatDefaults", "type");
-    for (type = types; !seat && type && *type; type++)
-        seat = seat_new (*type);
-    g_strfreev (types);
-
-    if (seat)
-    {
-        seat_set_property (seat, "xdg-seat", seat_name);
-        set_seat_properties (seat, NULL);
-
-        if (!login1_seat_get_can_multi_session (login1_seat))
-        {
-            g_debug ("Seat %s has property CanMultiSession=no", seat_name);
-            seat_set_property (seat, "allow-user-switching", "false");
-        }
-
-        if (config_section)
-            set_seat_properties (seat, config_section);
-
-        if (is_seat0)
-            seat_set_property (seat, "exit-on-failure", "true");
-    }
-    else
-        g_debug ("Unable to create seat: %s", seat_name);
-
-    if (seat)
-    {
-        started = display_manager_add_seat (display_manager, seat);
-        if (!started)
-            g_debug ("Failed to start seat: %s", seat_name);
-    }
-
-    g_free (config_section);
-    g_object_unref (seat);
-  
-    return started;
-}
-
-static void
-remove_login1_seat (Login1Seat *login1_seat)
-{
-    Seat *seat;
-
-    seat = display_manager_get_seat (display_manager, login1_seat_get_id (login1_seat));
-    if (seat)
-        seat_stop (seat);
-}
-
-static void
-seat_stopped_cb (Seat *seat, Login1Seat *login1_seat)
-{
-    update_login1_seat (login1_seat);
-    g_signal_handlers_disconnect_matched (seat, G_SIGNAL_MATCH_DATA, 0, 0, NULL, NULL, login1_seat);
-}
-
-static gboolean
-update_login1_seat (Login1Seat *login1_seat)
-{
-    if (!config_get_boolean (config_get_instance (), "LightDM", "logind-check-graphical") ||
-        login1_seat_get_can_graphical (login1_seat))
-    {
-        Seat *seat;
-
-        /* Wait for existing seat to stop or ignore if we already have a valid seat */
-        seat = display_manager_get_seat (display_manager, login1_seat_get_id (login1_seat));
-        if (seat)
-        {
-            if (seat_get_is_stopping (seat))
-                g_signal_connect (seat, "stopped", G_CALLBACK (seat_stopped_cb), login1_seat);
-            return TRUE;
-        }
-
-        return add_login1_seat (login1_seat);
-    }
-    else
-    {
-        remove_login1_seat (login1_seat);
-        return TRUE;
-    }
-}
-
-static void
-login1_can_graphical_changed_cb (Login1Seat *login1_seat)
-{
-    g_debug ("Seat %s changes graphical state to %s", login1_seat_get_id (login1_seat), login1_seat_get_can_graphical (login1_seat) ? "true" : "false");
-    update_login1_seat (login1_seat);
-}
-
-static void
-login1_service_seat_added_cb (Login1Service *service, Login1Seat *login1_seat)
-{
-    if (login1_seat_get_can_graphical (login1_seat))
-        g_debug ("Seat %s added from logind", login1_seat_get_id (login1_seat));
-    else
-        g_debug ("Seat %s added from logind without graphical output", login1_seat_get_id (login1_seat));
-
-    if (config_get_boolean (config_get_instance (), "LightDM", "logind-check-graphical"))
-        g_signal_connect (login1_seat, "can-graphical-changed", G_CALLBACK (login1_can_graphical_changed_cb), NULL);
-    update_login1_seat (login1_seat);
-}
-
-static void
-login1_service_seat_removed_cb (Login1Service *service, Login1Seat *login1_seat)
-{
-    g_debug ("Seat %s removed from logind", login1_seat_get_id (login1_seat));
-    g_signal_handlers_disconnect_matched (login1_seat, G_SIGNAL_MATCH_FUNC, 0, 0, NULL, login1_can_graphical_changed_cb, NULL);
-    remove_login1_seat (login1_seat);
-}
-
 int
 main (int argc, char **argv)
 {
     FILE *pid_file;
     GOptionContext *option_context;
     gboolean result;
-    gchar *dir;
+    gchar **groups, **i, *dir;
+    gint n_seats = 0;
     gboolean test_mode = FALSE;
     gchar *pid_path = "/var/run/lightdm.pid";
     gchar *log_dir = NULL;
@@ -1073,9 +919,8 @@
     gchar *default_log_dir = g_strdup (LOG_DIR);
     gchar *default_run_dir = g_strdup (RUN_DIR);
     gchar *default_cache_dir = g_strdup (CACHE_DIR);
-    gboolean show_config = FALSE, show_version = FALSE;
+    gboolean show_version = FALSE;
     GList *link, *messages = NULL;
-    gboolean connected;
     GOptionEntry options[] =
     {
         { "config", 'c', 0, G_OPTION_ARG_STRING, &config_path,
@@ -1099,9 +944,6 @@
         { "cache-dir", 0, 0, G_OPTION_ARG_STRING, &cache_dir,
           /* Help string for command line --cache-dir flag */
           N_("Directory to cache information"), "DIRECTORY" },
-        { "show-config", 0, 0, G_OPTION_ARG_NONE, &show_config,
-          /* Help string for command line --show-config flag */
-          N_("Show combined configuration"), NULL },
         { "version", 'v', 0, G_OPTION_ARG_NONE, &show_version,
           /* Help string for command line --version flag */
           N_("Show release version"), NULL },
@@ -1138,82 +980,6 @@
         return EXIT_FAILURE;
     }
 
-    /* Show combined configuration if user requested it */
-    if (show_config)
-    {
-        GList *sources, *link;
-        gchar **groups, *last_source, *empty_source;
-        GHashTable *source_ids;
-        int i;
-
-        if (!config_load_from_standard_locations (config_get_instance (), config_path, NULL))
-            return EXIT_FAILURE;
-
-        /* Number sources */
-        sources = config_get_sources (config_get_instance ());
-        source_ids = g_hash_table_new_full (g_str_hash, g_str_equal, g_free, g_free);
-        last_source = "";
-        for (i = 0, link = sources; link; i++, link = link->next)
-        {
-            gchar *path, *id;
-
-            path = link->data;
-            if (i < 26)
-                id = g_strdup_printf ("%c", 'A' + i);
-            else
-                id = g_strdup_printf ("%d", i);
-            g_hash_table_insert (source_ids, g_strdup (path), id);
-            last_source = id;
-        }
-        empty_source = g_strdup (last_source);
-        for (i = 0; empty_source[i] != '\0'; i++)
-            empty_source[i] = ' ';
-
-        /* Print out keys */
-        groups = config_get_groups (config_get_instance ());
-        for (i = 0; groups[i]; i++)
-        {
-            gchar **keys;
-            int j;
-
-            if (i != 0)
-                g_printerr ("\n");
-            g_printerr ("%s  [%s]\n", empty_source, groups[i]);
-
-            keys = config_get_keys (config_get_instance (), groups[i]);
-            for (j = 0; keys[j]; j++)
-            {
-                const gchar *source, *id;
-                gchar *value;
-
-                source = config_get_source (config_get_instance (), groups[i], keys[j]);
-                id = source ? g_hash_table_lookup (source_ids, source) : empty_source;
-                value = config_get_string (config_get_instance (), groups[i], keys[j]);
-                g_printerr ("%s  %s=%s\n", id, keys[j], value);
-                g_free (value);
-            }
-
-            g_strfreev (keys);
-        }
-        g_strfreev (groups);
-
-        /* Show mapping from source number to path */
-        g_printerr ("\n");
-        g_printerr ("Sources:\n");
-        for (link = sources; link; link = link->next)
-        {
-            const gchar *path = link->data;
-            const gchar *source;
-
-            source = g_hash_table_lookup (source_ids, path);
-            g_printerr ("%s  %s\n", source, path);
-        }
-
-        g_hash_table_destroy (source_ids);
-
-        return EXIT_SUCCESS;
-    }
-
     if (show_version)
     {
         /* NOTE: Is not translated so can be easily parsed */
@@ -1292,12 +1058,6 @@
         config_set_boolean (config_get_instance (), "LightDM", "lock-memory", TRUE);
     if (!config_has_key (config_get_instance (), "SeatDefaults", "type"))
         config_set_string (config_get_instance (), "SeatDefaults", "type", "xlocal");
-    if (!config_has_key (config_get_instance (), "SeatDefaults", "pam-service"))
-        config_set_string (config_get_instance (), "SeatDefaults", "pam-service", "lightdm");
-    if (!config_has_key (config_get_instance (), "SeatDefaults", "pam-autologin-service"))
-        config_set_string (config_get_instance (), "SeatDefaults", "pam-autologin-service", "lightdm-autologin");
-    if (!config_has_key (config_get_instance (), "SeatDefaults", "pam-greeter-service"))
-        config_set_string (config_get_instance (), "SeatDefaults", "pam-greeter-service", "lightdm-greeter");
     if (!config_has_key (config_get_instance (), "SeatDefaults", "xserver-command"))
         config_set_string (config_get_instance (), "SeatDefaults", "xserver-command", "X");
     if (!config_has_key (config_get_instance (), "SeatDefaults", "xserver-share"))
@@ -1306,8 +1066,6 @@
         config_set_string (config_get_instance (), "SeatDefaults", "unity-compositor-command", "unity-system-compositor");
     if (!config_has_key (config_get_instance (), "SeatDefaults", "start-session"))
         config_set_boolean (config_get_instance (), "SeatDefaults", "start-session", TRUE);
-    if (!config_has_key (config_get_instance (), "SeatDefaults", "allow-user-switching"))
-        config_set_boolean (config_get_instance (), "SeatDefaults", "allow-user-switching", TRUE);
     if (!config_has_key (config_get_instance (), "SeatDefaults", "allow-guest"))
         config_set_boolean (config_get_instance (), "SeatDefaults", "allow-guest", TRUE);
     if (!config_has_key (config_get_instance (), "SeatDefaults", "greeter-allow-guest"))
@@ -1389,139 +1147,76 @@
 
     shared_data_manager_start (shared_data_manager_get_instance ());
 
-    /* Connect to logind */
-    connected = login1_service_connect (login1_service_get_instance ());
-
-    /* Load dynamic seats from logind */
-    if (config_get_boolean (config_get_instance (), "LightDM", "logind-load-seats"))
+    /* Load the static display entries */
+    groups = config_get_groups (config_get_instance ());
+    for (i = groups; *i; i++)
     {
-        if (connected)
-        {
-            /* Load dynamic seats from logind */
-            g_debug ("Monitoring logind for seats");
+        gchar *config_section = *i;
+        gchar **types;
+        gchar **type;
+        Seat *seat = NULL;
+        const gchar *const seatpfx = "Seat:";
 
-            if (config_get_boolean (config_get_instance (), "LightDM", "start-default-seat"))
-            {
-                g_signal_connect (login1_service_get_instance (), "seat-added", G_CALLBACK (login1_service_seat_added_cb), NULL);
-                g_signal_connect (login1_service_get_instance (), "seat-removed", G_CALLBACK (login1_service_seat_removed_cb), NULL);
+        if (!g_str_has_prefix (config_section, seatpfx))
+            continue;
 
-                for (link = login1_service_get_seats (login1_service_get_instance ()); link; link = link->next)
-                {
-                    Login1Seat *login1_seat = link->data;
-                    if (config_get_boolean (config_get_instance (), "LightDM", "logind-check-graphical"))
-                        g_signal_connect (login1_seat, "can-graphical-changed", G_CALLBACK (login1_can_graphical_changed_cb), NULL);
-                    if (!update_login1_seat (login1_seat))
-                        return EXIT_FAILURE;
-                }
-            }
+        g_debug ("Loading seat %s", config_section);
+        types = config_get_string_list (config_get_instance (), config_section, "type");
+        if (!types)
+            types = config_get_string_list (config_get_instance (), "SeatDefaults", "type");
+        for (type = types; type && *type; type++)
+        {
+            seat = seat_new (*type);
+            if (seat)
+                break;
         }
-        else if (config_get_boolean (config_get_instance (), "LightDM", "start-default-seat"))
+        g_strfreev (types);
+        if (seat)
         {
-            gchar **types;
-            gchar **type;
-            Seat *seat = NULL;
+            const gsize seatpfxlen = strlen(seatpfx);
+            gchar *seatname = config_section + seatpfxlen;
 
-            g_debug ("Adding default seat");
+            seat_set_property (seat, "seat-name", seatname);
 
-            types = config_get_string_list (config_get_instance (), "SeatDefaults", "type");
-            for (type = types; type && *type; type++)
-            {
-                seat = seat_new (*type);
-                if (seat)
-                    break;
-            }
-            g_strfreev (types);
-            if (seat)
-            {
-                set_seat_properties (seat, NULL);
-                seat_set_property (seat, "exit-on-failure", "true");
-                if (!display_manager_add_seat (display_manager, seat))
-                    return EXIT_FAILURE;
-                g_object_unref (seat);
-            }
-            else
-            {
-                g_warning ("Failed to create default seat");
-                return EXIT_FAILURE;
-            }
+            set_seat_properties (seat, config_section);
+            display_manager_add_seat (display_manager, seat);
+            g_object_unref (seat);
+            n_seats++;
         }
+        else
+            g_warning ("Failed to create seat %s", config_section);
     }
-    else
-    {
-        gchar **groups, **i;
-        gint n_seats = 0;
-
-        /* Load the static seat entries */
-        groups = config_get_groups (config_get_instance ());
-        for (i = groups; *i; i++)
-        {
-            gchar *config_section = *i;
-            gchar **types;
-            gchar **type;
-            Seat *seat = NULL;
-            const gchar *const seatpfx = "Seat:";
-
-            if (!g_str_has_prefix (config_section, seatpfx))
-                continue;
-
-            g_debug ("Loading seat %s", config_section);
-            types = config_get_string_list (config_get_instance (), config_section, "type");
-            if (!types)
-                types = config_get_string_list (config_get_instance (), "SeatDefaults", "type");
-            for (type = types; type && *type; type++)
-            {
-                seat = seat_new (*type);
-                if (seat)
-                    break;
-            }
-            g_strfreev (types);
-            if (seat)
-            {
-                const gsize seatpfxlen = strlen(seatpfx);
-                gchar *seatname = config_section + seatpfxlen;
+    g_strfreev (groups);
 
-                seat_set_property (seat, "seat-name", seatname);
+    /* If no seats start a default one */
+    if (n_seats == 0 && config_get_boolean (config_get_instance (), "LightDM", "start-default-seat"))
+    {
+        gchar **types;
+        gchar **type;
+        Seat *seat = NULL;
 
-                set_seat_properties (seat, config_section);
-                display_manager_add_seat (display_manager, seat);
-                g_object_unref (seat);
-                n_seats++;
-            }
-            else
-                g_warning ("Failed to create seat %s", config_section);
-        }
-        g_strfreev (groups);
+        g_debug ("Adding default seat");
 
-        /* If no seats start a default one */
-        if (n_seats == 0 && config_get_boolean (config_get_instance (), "LightDM", "start-default-seat"))
+        types = config_get_string_list (config_get_instance (), "SeatDefaults", "type");
+        for (type = types; type && *type; type++)
         {
-            gchar **types;
-            gchar **type;
-            Seat *seat = NULL;
-
-            g_debug ("Adding default seat");
-
-            types = config_get_string_list (config_get_instance (), "SeatDefaults", "type");
-            for (type = types; type && *type; type++)
-            {
-                seat = seat_new (*type);
-                if (seat)
-                    break;
-            }
-            g_strfreev (types);
+            seat = seat_new (*type);
             if (seat)
-            {
-                set_seat_properties (seat, NULL);
-                seat_set_property (seat, "exit-on-failure", "true");
-                if (!display_manager_add_seat (display_manager, seat))
-                    return EXIT_FAILURE;
-                g_object_unref (seat);
-            }
-            else
-            {
-                g_warning ("Failed to create default seat");
+                break;
+        }
+        g_strfreev (types);
+        if (seat)
+        {
+            set_seat_properties (seat, NULL);
+            seat_set_property (seat, "exit-on-failure", "true");
+            if (!display_manager_add_seat (display_manager, seat))
                 return EXIT_FAILURE;
-            }
+            g_object_unref (seat);
+        }
+        else
+        {
+            g_warning ("Failed to create default seat");
+            return EXIT_FAILURE;
         }
     }
 
diff -Naur lightdm-1.10.2.orig/src/login1.c lightdm-1.10.1/src/login1.c
--- lightdm-1.10.2.orig/src/login1.c	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/login1.c	2014-04-08 11:30:25.000000000 +0700
@@ -10,340 +10,83 @@
  * license.
  */
 
-#include <string.h>
 #include <gio/gio.h>
 
 #include "login1.h"
 
-#define LOGIN1_SERVICE_NAME "org.freedesktop.login1"
-#define LOGIN1_OBJECT_NAME "/org/freedesktop/login1"
-#define LOGIN1_MANAGER_INTERFACE_NAME "org.freedesktop.login1.Manager"
-
-enum {
-    SEAT_ADDED,
-    SEAT_REMOVED,
-    LAST_SERVICE_SIGNAL
-};
-static guint service_signals[LAST_SERVICE_SIGNAL] = { 0 };
-
-struct Login1ServicePrivate
-{
-    /* Connection to bus service is running on */
-    GDBusConnection *connection;
-
-    /* TRUE if have connected to service */
-    gboolean connected;
-
-    /* Seats the service is reporting */
-    GList *seats;
-
-    /* Handle to signal subscription */
-    guint signal_id;
-};
-
-enum {
-    CAN_GRAPHICAL_CHANGED,
-    LAST_SEAT_SIGNAL
-};
-static guint seat_signals[LAST_SEAT_SIGNAL] = { 0 };
-
-struct Login1SeatPrivate
-{
-    /* Connection to bus seat is running on */
-    GDBusConnection *connection;
-
-    /* Seat Id */
-    gchar *id;
-
-    /* D-Bus path for this seat */
-    gchar *path;
-
-    /* Handle to signal subscription */
-    guint signal_id;
-
-    /* TRUE if can run a graphical display on this seat */
-    gboolean can_graphical;
-
-    /* TRUE if can do session switching */
-    gboolean can_multi_session;
-};
-
-G_DEFINE_TYPE (Login1Service, login1_service, G_TYPE_OBJECT);
-G_DEFINE_TYPE (Login1Seat, login1_seat, G_TYPE_OBJECT);
-
-static Login1Service *singleton = NULL;
-
-Login1Service *
-login1_service_get_instance (void)
-{
-    if (!singleton)
-        singleton = g_object_new (LOGIN1_SERVICE_TYPE, NULL);
-    return singleton;
-}
-
-static void
-seat_properties_changed_cb (GDBusConnection *connection,
-                            const gchar *sender_name,
-                            const gchar *object_path,
-                            const gchar *interface_name,
-                            const gchar *signal_name,
-                            GVariant *parameters,
-                            gpointer user_data)
-{
-    Login1Seat *seat = user_data;
-    GVariantIter *invalidated_properties;
-    const gchar *property_name;
-
-    g_variant_get (parameters, "(sa{sv}as)", NULL, NULL, &invalidated_properties);
-    while (g_variant_iter_loop (invalidated_properties, "&s", &property_name))
-    {
-        if (strcmp (property_name, "CanGraphical") == 0)
-        {
-            GVariant *result;
-            GError *error = NULL;
-
-            result = g_dbus_connection_call_sync (connection,
-                                                  LOGIN1_SERVICE_NAME,
-                                                  seat->priv->path,
-                                                  "org.freedesktop.DBus.Properties",
-                                                  "Get",
-                                                  g_variant_new ("(ss)", "org.freedesktop.login1.Seat", property_name),
-                                                  G_VARIANT_TYPE ("(v)"),
-                                                  G_DBUS_CALL_FLAGS_NONE,
-                                                  -1,
-                                                  NULL,
-                                                  &error);
-            if (error)
-                g_warning ("Error updating CanGraphical: %s", error->message);
-            g_clear_error (&error);
-            if (result)
-            {
-                GVariant *value;
-
-                g_variant_get (result, "(v)", &value);
-                seat->priv->can_graphical = g_variant_get_boolean (value);
-                g_variant_unref (value);
-
-                g_signal_emit (seat, seat_signals[CAN_GRAPHICAL_CHANGED], 0);
-
-                g_variant_unref (result);
-            }
-        }
-    }
-    g_variant_iter_free (invalidated_properties);
-}
-
-static Login1Seat *
-add_seat (Login1Service *service, const gchar *id, const gchar *path)
-{
-    Login1Seat *seat;
-    GVariant *result;
-    GError *error = NULL;
-
-    seat = g_object_new (LOGIN1_SEAT_TYPE, NULL);
-    seat->priv->connection = g_object_ref (service->priv->connection);
-    seat->priv->id = g_strdup (id);
-    seat->priv->path = g_strdup (path);
-
-    seat->priv->signal_id = g_dbus_connection_signal_subscribe (seat->priv->connection,
-                                                                LOGIN1_SERVICE_NAME,
-                                                                "org.freedesktop.DBus.Properties",
-                                                                "PropertiesChanged",
-                                                                path,
-                                                                "org.freedesktop.login1.Seat",
-                                                                G_DBUS_SIGNAL_FLAGS_NONE,
-                                                                seat_properties_changed_cb,
-                                                                g_object_ref (seat),
-                                                                g_object_unref);
-
-    /* Get properties for this seat */
-    result = g_dbus_connection_call_sync (seat->priv->connection,
-                                          LOGIN1_SERVICE_NAME,
-                                          path,
-                                          "org.freedesktop.DBus.Properties",
-                                          "GetAll",
-                                          g_variant_new ("(s)", "org.freedesktop.login1.Seat"),
-                                          G_VARIANT_TYPE ("(a{sv})"),
-                                          G_DBUS_CALL_FLAGS_NONE,
-                                          -1,
-                                          NULL,
-                                          &error);
-    if (error)
-        g_warning ("Failed to get seat properties: %s", error->message);
-    g_clear_error (&error);
-    if (result)
-    {
-        GVariantIter *properties;
-        const gchar *name;
-        GVariant *value;
-
-        g_variant_get (result, "(a{sv})", &properties);
-        while (g_variant_iter_loop (properties, "{&sv}", &name, &value))
-        {
-            if (strcmp (name, "CanGraphical") == 0 && g_variant_is_of_type (value, G_VARIANT_TYPE_BOOLEAN))
-                seat->priv->can_graphical = g_variant_get_boolean (value);
-            else if (strcmp (name, "CanMultiSession") == 0 && g_variant_is_of_type (value, G_VARIANT_TYPE_BOOLEAN))
-                seat->priv->can_multi_session = g_variant_get_boolean (value);
-        }
-        g_variant_iter_free (properties);
-        g_variant_unref (result);
-    }
-
-    service->priv->seats = g_list_append (service->priv->seats, seat);
-
-    return seat;
-}
-
-static void
-signal_cb (GDBusConnection *connection,
-           const gchar *sender_name,
-           const gchar *object_path,
-           const gchar *interface_name,
-           const gchar *signal_name,
-           GVariant *parameters,
-           gpointer user_data)
+gboolean
+login1_is_running (void)
 {
-    Login1Service *service = user_data;
-
-    if (strcmp (signal_name, "SeatNew") == 0)
-    {
-        const gchar *id, *path;
-        Login1Seat *seat;
-
-        g_variant_get (parameters, "(&s&o)", &id, &path);
-        seat = login1_service_get_seat (service, id);
-        if (!seat)
-        {
-            seat = add_seat (service, id, path);
-            g_signal_emit (service, service_signals[SEAT_ADDED], 0, seat);
-        }
-    }
-    else if (strcmp (signal_name, "SeatRemoved") == 0)
-    {
-        const gchar *id, *path;
-        Login1Seat *seat;
-
-        g_variant_get (parameters, "(&s&o)", &id, &path);
-        seat = login1_service_get_seat (service, id);
-        if (seat)
-        {
-            service->priv->seats = g_list_remove (service->priv->seats, seat);            
-            g_signal_emit (service, service_signals[SEAT_REMOVED], 0, seat);
-            g_object_unref (seat);
-        }                        
-    } 
+    return access ("/run/systemd/seats/", F_OK) >= 0;
 }
 
-gboolean
-login1_service_connect (Login1Service *service)
+gchar *
+login1_get_session_id (void)
 {
+    GDBusConnection *bus;
     GVariant *result;
-    GVariantIter *seat_iter;
-    const gchar *id, *path;
+    gchar *session_path;
     GError *error = NULL;
 
-    g_return_val_if_fail (service != NULL, FALSE);
-
-    if (service->priv->connected)
-        return TRUE;
-
-    service->priv->connection = g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, &error);
+    bus = g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, &error);
     if (error)
         g_warning ("Failed to get system bus: %s", error->message);
     g_clear_error (&error);
-    if (!service->priv->connection)
-        return FALSE;
-
-    service->priv->signal_id = g_dbus_connection_signal_subscribe (service->priv->connection,
-                                                                   LOGIN1_SERVICE_NAME,
-                                                                   LOGIN1_MANAGER_INTERFACE_NAME,
-                                                                   NULL,
-                                                                   LOGIN1_OBJECT_NAME,
-                                                                   NULL,
-                                                                   G_DBUS_SIGNAL_FLAGS_NONE,
-                                                                   signal_cb,
-                                                                   g_object_ref (service),
-                                                                   g_object_unref);
-
-    result = g_dbus_connection_call_sync (service->priv->connection,
-                                          LOGIN1_SERVICE_NAME,
-                                          LOGIN1_OBJECT_NAME,
-                                          LOGIN1_MANAGER_INTERFACE_NAME,
-                                          "ListSeats",
-                                          g_variant_new ("()"),
-                                          G_VARIANT_TYPE ("(a(so))"),
+    if (!bus)
+        return NULL;
+    result = g_dbus_connection_call_sync (bus,
+                                          "org.freedesktop.login1",
+                                          "/org/freedesktop/login1",
+                                          "org.freedesktop.login1.Manager",
+                                          "GetSessionByPID",
+                                          g_variant_new ("(u)", getpid()),
+                                          G_VARIANT_TYPE ("(o)"),
                                           G_DBUS_CALL_FLAGS_NONE,
                                           -1,
                                           NULL,
                                           &error);
+    g_object_unref (bus);
+
     if (error)
-        g_warning ("Failed to get list of logind seats: %s", error->message);
+        g_warning ("Failed to open login1 session: %s", error->message);
     g_clear_error (&error);
     if (!result)
-        return FALSE;
+        return NULL;
 
-    g_variant_get (result, "(a(so))", &seat_iter);
-    while (g_variant_iter_loop (seat_iter, "(&s&o)", &id, &path))
-        add_seat (service, id, path);
-    g_variant_iter_free (seat_iter);
+    g_variant_get (result, "(o)", &session_path);
     g_variant_unref (result);
+    g_debug ("Got login1 session id: %s", session_path);
 
-    service->priv->connected = TRUE;
-
-    return TRUE;
-}
-
-gboolean
-login1_service_get_is_connected (Login1Service *service)
-{
-    g_return_val_if_fail (service != NULL, FALSE);
-    return service->priv->connected;
-}
-
-GList *
-login1_service_get_seats (Login1Service *service)
-{
-    g_return_val_if_fail (service != NULL, NULL);
-    return service->priv->seats;
-}
-
-Login1Seat *
-login1_service_get_seat (Login1Service *service, const gchar *id)
-{
-    GList *link;
-
-    g_return_val_if_fail (service != NULL, NULL);
-
-    for (link = service->priv->seats; link; link = link->next)
-    {
-        Login1Seat *seat = link->data;
-        if (strcmp (seat->priv->id, id) == 0)
-            return seat;
-    }
-
-    return NULL;
+    return session_path;
 }
 
 void
-login1_service_lock_session (Login1Service *service, const gchar *session_id)
+login1_lock_session (const gchar *session_path)
 {
+    GDBusConnection *bus;
     GError *error = NULL;
 
-    g_return_if_fail (service != NULL);
-    g_return_if_fail (session_id != NULL);
+    g_return_if_fail (session_path != NULL);
 
-    g_debug ("Locking login1 session %s", session_id);
+    g_debug ("Locking login1 session %s", session_path);
 
-    if (session_id)
+    bus = g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, &error);
+    if (error)
+        g_warning ("Failed to get system bus: %s", error->message);
+    g_clear_error (&error);
+    if (!bus)
+        return;
+
+    if (session_path)
     {
         GVariant *result;
 
-        result = g_dbus_connection_call_sync (service->priv->connection,
-                                              LOGIN1_SERVICE_NAME,
-                                              LOGIN1_OBJECT_NAME,
-                                              LOGIN1_MANAGER_INTERFACE_NAME,
-                                              "LockSession",
-                                              g_variant_new ("(s)", session_id),
+        result = g_dbus_connection_call_sync (bus,
+                                              "org.freedesktop.login1",
+                                              session_path,
+                                              "org.freedesktop.login1.Session",
+                                              "Lock",
+                                              g_variant_new ("()"),
                                               G_VARIANT_TYPE ("()"),
                                               G_DBUS_CALL_FLAGS_NONE,
                                               -1,
@@ -355,28 +98,36 @@
         if (result)
             g_variant_unref (result);
     }
+    g_object_unref (bus);
 }
 
 void
-login1_service_unlock_session (Login1Service *service, const gchar *session_id)
+login1_unlock_session (const gchar *session_path)
 {
+    GDBusConnection *bus;
     GError *error = NULL;
 
-    g_return_if_fail (service != NULL);
-    g_return_if_fail (session_id != NULL);
+    g_return_if_fail (session_path != NULL);
 
-    g_debug ("Unlocking login1 session %s", session_id);
+    g_debug ("Unlocking login1 session %s", session_path);
+
+    bus = g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, &error);
+    if (error)
+        g_warning ("Failed to get system bus: %s", error->message);
+    g_clear_error (&error);
+    if (!bus)
+        return;
 
-    if (session_id)
+    if (session_path)
     {
         GVariant *result;
 
-        result = g_dbus_connection_call_sync (service->priv->connection,
-                                              LOGIN1_SERVICE_NAME,
-                                              LOGIN1_OBJECT_NAME,
-                                              LOGIN1_MANAGER_INTERFACE_NAME,
-                                              "UnlockSession",
-                                              g_variant_new ("(s)", session_id),
+        result = g_dbus_connection_call_sync (bus,
+                                              "org.freedesktop.login1",
+                                              session_path,
+                                              "org.freedesktop.login1.Session",
+                                              "Unlock",
+                                              g_variant_new ("()"),
                                               G_VARIANT_TYPE ("()"),
                                               G_DBUS_CALL_FLAGS_NONE,
                                               -1,
@@ -388,28 +139,36 @@
         if (result)
             g_variant_unref (result);
     }
+    g_object_unref (bus);
 }
 
 void
-login1_service_activate_session (Login1Service *service, const gchar *session_id)
+login1_activate_session (const gchar *session_path)
 {
+    GDBusConnection *bus;
     GError *error = NULL;
 
-    g_return_if_fail (service != NULL);
-    g_return_if_fail (session_id != NULL);
+    g_return_if_fail (session_path != NULL);
+
+    g_debug ("Activating login1 session %s", session_path);
 
-    g_debug ("Activating login1 session %s", session_id);
+    bus = g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, &error);
+    if (error)
+        g_warning ("Failed to get system bus: %s", error->message);
+    g_clear_error (&error);
+    if (!bus)
+        return;
 
-    if (session_id)
+    if (session_path)
     {
         GVariant *result;
 
-        result = g_dbus_connection_call_sync (service->priv->connection,
-                                              LOGIN1_SERVICE_NAME,
-                                              LOGIN1_OBJECT_NAME,
-                                              LOGIN1_MANAGER_INTERFACE_NAME,
-                                              "ActivateSession",
-                                              g_variant_new ("(s)", session_id),
+        result = g_dbus_connection_call_sync (bus,
+                                              "org.freedesktop.login1",
+                                              session_path,
+                                              "org.freedesktop.login1.Session",
+                                              "Activate",
+                                              g_variant_new ("()"),
                                               G_VARIANT_TYPE ("()"),
                                               G_DBUS_CALL_FLAGS_NONE,
                                               -1,
@@ -421,108 +180,5 @@
         if (result)
             g_variant_unref (result);
     }
-}
-
-static void
-login1_service_init (Login1Service *service)
-{
-    service->priv = G_TYPE_INSTANCE_GET_PRIVATE (service, LOGIN1_SERVICE_TYPE, Login1ServicePrivate);
-}
-
-static void
-login1_service_finalize (GObject *object)
-{
-    Login1Service *self = LOGIN1_SERVICE (object);
-
-    g_list_free_full (self->priv->seats, g_object_unref);
-    g_dbus_connection_signal_unsubscribe (self->priv->connection, self->priv->signal_id);
-    g_object_unref (self->priv->connection);
-
-    G_OBJECT_CLASS (login1_service_parent_class)->finalize (object);
-}
-
-static void
-login1_service_class_init (Login1ServiceClass *klass)
-{
-    GObjectClass *object_class = G_OBJECT_CLASS (klass);
-
-    object_class->finalize = login1_service_finalize;
-
-    g_type_class_add_private (klass, sizeof (Login1ServicePrivate));
-
-    service_signals[SEAT_ADDED] =
-        g_signal_new ("seat-added",
-                      G_TYPE_FROM_CLASS (klass),
-                      G_SIGNAL_RUN_LAST,
-                      G_STRUCT_OFFSET (Login1ServiceClass, seat_added),
-                      NULL, NULL,
-                      NULL,
-                      G_TYPE_NONE, 1, LOGIN1_SEAT_TYPE);
-    service_signals[SEAT_REMOVED] =
-        g_signal_new ("seat-removed",
-                      G_TYPE_FROM_CLASS (klass),
-                      G_SIGNAL_RUN_LAST,
-                      G_STRUCT_OFFSET (Login1ServiceClass, seat_removed),
-                      NULL, NULL,
-                      NULL,
-                      G_TYPE_NONE, 1, LOGIN1_SEAT_TYPE);
-}
-
-const gchar *
-login1_seat_get_id (Login1Seat *seat)
-{
-    g_return_val_if_fail (seat != NULL, NULL);
-    return seat->priv->id;
-}
-
-gboolean
-login1_seat_get_can_graphical (Login1Seat *seat)
-{
-    g_return_val_if_fail (seat != NULL, FALSE);
-    return seat->priv->can_graphical;
-}
-
-gboolean
-login1_seat_get_can_multi_session (Login1Seat *seat)
-{
-    g_return_val_if_fail (seat != NULL, FALSE);
-    return seat->priv->can_multi_session;
-}
-
-static void
-login1_seat_init (Login1Seat *seat)
-{
-    seat->priv = G_TYPE_INSTANCE_GET_PRIVATE (seat, LOGIN1_SEAT_TYPE, Login1SeatPrivate);
-}
-
-static void
-login1_seat_finalize (GObject *object)
-{
-    Login1Seat *self = LOGIN1_SEAT (object);
-
-    g_free (self->priv->id);
-    g_free (self->priv->path);
-    g_dbus_connection_signal_unsubscribe (self->priv->connection, self->priv->signal_id);
-    g_object_unref (self->priv->connection);
-
-    G_OBJECT_CLASS (login1_seat_parent_class)->finalize (object);
-}
-
-static void
-login1_seat_class_init (Login1SeatClass *klass)
-{
-    GObjectClass *object_class = G_OBJECT_CLASS (klass);
-
-    object_class->finalize = login1_seat_finalize;
-
-    g_type_class_add_private (klass, sizeof (Login1SeatPrivate));
-
-    seat_signals[CAN_GRAPHICAL_CHANGED] =
-        g_signal_new ("can-graphical-changed",
-                      G_TYPE_FROM_CLASS (klass),
-                      G_SIGNAL_RUN_LAST,
-                      G_STRUCT_OFFSET (Login1SeatClass, can_graphical_changed),
-                      NULL, NULL,
-                      NULL,
-                      G_TYPE_NONE, 0);
+    g_object_unref (bus);
 }
diff -Naur lightdm-1.10.2.orig/src/login1.h lightdm-1.10.1/src/login1.h
--- lightdm-1.10.2.orig/src/login1.h	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/login1.h	2014-04-08 11:30:25.000000000 +0700
@@ -16,66 +16,15 @@
 
 G_BEGIN_DECLS
 
-#define LOGIN1_SEAT_TYPE (login1_seat_get_type())
-#define LOGIN1_SEAT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LOGIN1_SEAT_TYPE, Login1Seat));
+gboolean login1_is_running (void);
 
-#define LOGIN1_SERVICE_TYPE (login1_service_get_type())
-#define LOGIN1_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LOGIN1_SERVICE_TYPE, Login1Service));
+gchar *login1_get_session_id (void);
 
-typedef struct Login1SeatPrivate Login1SeatPrivate;
+void login1_lock_session (const gchar *session_path);
 
-typedef struct
-{
-    GObject            parent_instance;
-    Login1SeatPrivate *priv;
-} Login1Seat;
+void login1_unlock_session (const gchar *session_path);
 
-typedef struct
-{
-    GObjectClass parent_class;
-    void (*can_graphical_changed)(Login1Seat *seat);
-} Login1SeatClass;
-
-typedef struct Login1ServicePrivate Login1ServicePrivate;
-
-typedef struct
-{
-    GObject               parent_instance;
-    Login1ServicePrivate *priv;
-} Login1Service;
-
-typedef struct
-{
-    GObjectClass parent_class;
-    void (*seat_added)(Login1Service *service, Login1Seat *seat);
-    void (*seat_removed)(Login1Service *service, Login1Seat *seat);
-} Login1ServiceClass;
-
-GType login1_service_get_type (void);
-
-GType login1_seat_get_type (void);
-
-Login1Service *login1_service_get_instance (void);
-
-gboolean login1_service_connect (Login1Service *service);
-
-gboolean login1_service_get_is_connected (Login1Service *service);
-
-GList *login1_service_get_seats (Login1Service *service);
-
-Login1Seat *login1_service_get_seat (Login1Service *service, const gchar *id);
-
-void login1_service_lock_session (Login1Service *service, const gchar *session_id);
-
-void login1_service_unlock_session (Login1Service *service, const gchar *session_id);
-
-void login1_service_activate_session (Login1Service *service, const gchar *session_id);
-
-const gchar *login1_seat_get_id (Login1Seat *seat);
-
-gboolean login1_seat_get_can_graphical (Login1Seat *seat);
-
-gboolean login1_seat_get_can_multi_session (Login1Seat *seat);
+void login1_activate_session (const gchar *session_path);
 
 G_END_DECLS
 
diff -Naur lightdm-1.10.2.orig/src/Makefile.in lightdm-1.10.1/src/Makefile.in
--- lightdm-1.10.2.orig/src/Makefile.in	2014-09-17 11:23:22.000000000 +0700
+++ lightdm-1.10.1/src/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -340,8 +340,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
diff -Naur lightdm-1.10.2.orig/src/process.c lightdm-1.10.1/src/process.c
--- lightdm-1.10.2.orig/src/process.c	2014-09-08 06:21:24.000000000 +0700
+++ lightdm-1.10.1/src/process.c	2014-04-08 11:30:25.000000000 +0700
@@ -177,7 +177,7 @@
     gchar **argv;
     gchar **env_keys, **env_values;
     guint i, env_length;
-    GList *keys, *link;
+    GList *link;
     pid_t pid;
     int log_fd = -1;
     GError *error = NULL;
@@ -211,13 +211,11 @@
     env_length = g_hash_table_size (process->priv->env);
     env_keys = g_malloc (sizeof (gchar *) * env_length);
     env_values = g_malloc (sizeof (gchar *) * env_length);
-    keys = g_hash_table_get_keys (process->priv->env);
-    for (i = 0, link = keys; i < env_length; i++, link = link->next)
+    for (i = 0, link = g_hash_table_get_keys (process->priv->env); i < env_length; i++, link = link->next)
     {
         env_keys[i] = link->data;
         env_values[i] = g_hash_table_lookup (process->priv->env, env_keys[i]);
     }
-    g_list_free (keys);
 
     pid = fork ();
     if (pid == 0)
diff -Naur lightdm-1.10.2.orig/src/seat.c lightdm-1.10.1/src/seat.c
--- lightdm-1.10.2.orig/src/seat.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/seat.c	2014-04-14 04:30:10.000000000 +0700
@@ -33,8 +33,8 @@
     /* Configuration for this seat */
     GHashTable *properties;
 
-    /* TRUE if this seat can run multiple sessions at once */
-    gboolean supports_multi_session;
+    /* TRUE if able to switch users */
+    gboolean can_switch;
 
     /* TRUE if display server can be shared for sessions */
     gboolean share_display_server;
@@ -64,6 +64,11 @@
     gboolean stopped;
 };
 
+/* PAM services to use */
+#define GREETER_SERVICE   "lightdm-greeter"
+#define USER_SERVICE      "lightdm"
+#define AUTOLOGIN_SERVICE "lightdm-autologin"
+
 static void seat_logger_iface_init (LoggerInterface *iface);
 
 G_DEFINE_TYPE_WITH_CODE (Seat, seat, G_TYPE_OBJECT,
@@ -78,7 +83,7 @@
 static GHashTable *seat_modules = NULL;
 
 // FIXME: Make a get_display_server() that re-uses display servers if supported
-static DisplayServer *create_display_server (Seat *seat, Session *session);
+static DisplayServer *create_display_server (Seat *seat, const gchar *session_type);
 static Greeter *create_greeter_session (Seat *seat);
 static void start_session (Seat *seat, Session *session);
 
@@ -165,16 +170,18 @@
 }
 
 void
-seat_set_supports_multi_session (Seat *seat, gboolean supports_multi_session)
+seat_set_can_switch (Seat *seat, gboolean can_switch)
 {
     g_return_if_fail (seat != NULL);
-    seat->priv->supports_multi_session = supports_multi_session;
+
+    seat->priv->can_switch = can_switch;
 }
 
 void
 seat_set_share_display_server (Seat *seat, gboolean share_display_server)
 {
     g_return_if_fail (seat != NULL);
+
     seat->priv->share_display_server = share_display_server;
 }
 
@@ -182,13 +189,9 @@
 seat_start (Seat *seat)
 {
     g_return_val_if_fail (seat != NULL, FALSE);
-
-    l_debug (seat, "Starting");
-
+  
     SEAT_GET_CLASS (seat)->setup (seat);
-    seat->priv->started = SEAT_GET_CLASS (seat)->start (seat);
-
-    return seat->priv->started;
+    return SEAT_GET_CLASS (seat)->start (seat);
 }
 
 GList *
@@ -252,7 +255,7 @@
 seat_get_can_switch (Seat *seat)
 {
     g_return_val_if_fail (seat != NULL, FALSE);
-    return seat_get_boolean_property (seat, "allow-user-switching") && seat->priv->supports_multi_session;
+    return seat->priv->can_switch;
 }
 
 gboolean
@@ -348,6 +351,12 @@
     }
 }
 
+static gboolean
+get_start_local_sessions (Seat *seat)
+{
+    return SEAT_GET_CLASS (seat)->get_start_local_sessions (seat);
+}
+
 static void
 display_server_stopped_cb (DisplayServer *display_server, Seat *seat)
 {
@@ -397,7 +406,7 @@
     }
     g_list_free_full (list, g_object_unref);
 
-    if (!seat->priv->stopping)
+    if (!seat->priv->stopping && get_start_local_sessions (seat))
     {
         /* If we were the active session, switch to a greeter */
         active_session = seat_get_active_session (seat);
@@ -441,7 +450,7 @@
     {
         DisplayServer *display_server;
 
-        display_server = create_display_server (seat, session);
+        display_server = create_display_server (seat, session_get_session_type (session));
         session_set_display_server (session, display_server);
         if (!display_server_start (display_server))
         {
@@ -850,7 +859,7 @@
 {
     const gchar *desktop_name;
 
-    session_set_config (session, config);
+    session_set_session_type (session, session_config_get_session_type (config));
     session_set_env (session, "DESKTOP_SESSION", session_name);
     session_set_env (session, "GDMSESSION", session_name);
     desktop_name = session_config_get_desktop_name (config);
@@ -975,7 +984,7 @@
     Session *session;
 
     session = create_session (seat, FALSE);
-    session_set_config (session, session_get_config (SESSION (greeter)));
+    session_set_session_type (session, session_get_session_type (SESSION (greeter)));
     session_set_display_server (session, session_get_display_server (SESSION (greeter)));
 
     return g_object_ref (session);
@@ -994,7 +1003,7 @@
         session = create_guest_session (seat, session_name);
         if (!session)
             return FALSE;
-        session_set_pam_service (session, seat_get_string_property (seat, "pam-autologin-service"));
+        session_set_pam_service (session, AUTOLOGIN_SERVICE);
     }
     else
     {
@@ -1081,7 +1090,7 @@
     /* Otherwise start a new display server for this session */
     else
     {
-        display_server = create_display_server (seat, session);
+        display_server = create_display_server (seat, session_get_session_type (session));
         session_set_display_server (session, display_server);
         if (!display_server_start (display_server))
         {
@@ -1120,7 +1129,7 @@
     }
 
     greeter_session = SEAT_GET_CLASS (seat)->create_greeter_session (seat);
-    session_set_config (SESSION (greeter_session), session_config);
+    session_set_session_type (SESSION (greeter_session), session_config_get_session_type (session_config));
     seat->priv->sessions = g_list_append (seat->priv->sessions, SESSION (greeter_session));
     g_signal_connect (greeter_session, "notify::active-username", G_CALLBACK (greeter_active_username_changed_cb), seat);
     g_signal_connect (greeter_session, "authentication-complete", G_CALLBACK (session_authentication_complete_cb), seat);
@@ -1129,7 +1138,7 @@
     set_session_env (SESSION (greeter_session));
     session_set_env (SESSION (greeter_session), "XDG_SESSION_CLASS", "greeter");
 
-    session_set_pam_service (SESSION (greeter_session), seat_get_string_property (seat, "pam-greeter-service"));
+    session_set_pam_service (SESSION (greeter_session), GREETER_SERVICE);
     if (getuid () == 0)
     {
         gchar *greeter_user;      
@@ -1145,9 +1154,7 @@
     session_set_argv (SESSION (greeter_session), argv);
     g_strfreev (argv);
 
-    greeter_set_pam_services (greeter_session,
-                              seat_get_string_property (seat, "pam-service"),
-                              seat_get_string_property (seat, "pam-autologin-service"));
+    greeter_set_pam_services (greeter_session, USER_SERVICE, AUTOLOGIN_SERVICE);
     g_signal_connect (greeter_session, "create-session", G_CALLBACK (greeter_create_session_cb), seat);
     g_signal_connect (greeter_session, "start-session", G_CALLBACK (greeter_start_session_cb), seat);
 
@@ -1194,6 +1201,10 @@
         return;
     }
 
+    /* Stop if don't need to run a session */
+    if (!get_start_local_sessions (seat))
+        return;
+
     emit_upstart_signal ("login-session-start");
 
     /* Start the session waiting for this display server */
@@ -1219,13 +1230,13 @@
 }
 
 static DisplayServer *
-create_display_server (Seat *seat, Session *session)
+create_display_server (Seat *seat, const gchar *session_type)
 {
     DisplayServer *display_server;
 
-    l_debug (seat, "Creating display server of type %s", session_get_session_type (session));
+    l_debug (seat, "Creating display server of type %s", session_type);
 
-    display_server = SEAT_GET_CLASS (seat)->create_display_server (seat, session);
+    display_server = SEAT_GET_CLASS (seat)->create_display_server (seat, session_type);
     if (!display_server)
         return NULL;
 
@@ -1259,7 +1270,7 @@
 
     g_return_val_if_fail (seat != NULL, FALSE);
 
-    if (!seat_get_can_switch (seat))
+    if (!seat->priv->can_switch)
         return FALSE;
 
     /* Switch to greeter if one open (shouldn't be though) */
@@ -1279,7 +1290,7 @@
         g_object_unref (seat->priv->session_to_activate);
     seat->priv->session_to_activate = g_object_ref (greeter_session);
 
-    display_server = create_display_server (seat, SESSION (greeter_session));
+    display_server = create_display_server (seat, session_get_session_type (SESSION (greeter_session)));
     session_set_display_server (SESSION (greeter_session), display_server);
     if (!display_server_start (display_server))
         return FALSE;
@@ -1312,7 +1323,7 @@
             if (seat->priv->session_to_activate)
                 g_object_unref (seat->priv->session_to_activate);
             seat->priv->session_to_activate = g_object_ref (session);
-            display_server = create_display_server (seat, session);
+            display_server = create_display_server (seat, session_get_session_type (session));
             session_set_display_server (session, display_server);
             display_server_start (display_server);
         }
@@ -1333,7 +1344,7 @@
         g_object_unref (seat->priv->session_to_activate);
     seat->priv->session_to_activate = g_object_ref (greeter_session);
 
-    display_server = create_display_server (seat, SESSION (greeter_session));
+    display_server = create_display_server (seat, session_get_session_type (SESSION (greeter_session)));
     session_set_display_server (SESSION (greeter_session), display_server);
     display_server_start (display_server);
 }
@@ -1346,7 +1357,7 @@
     g_return_val_if_fail (seat != NULL, FALSE);
     g_return_val_if_fail (username != NULL, FALSE);
 
-    if (!seat_get_can_switch (seat))
+    if (!seat->priv->can_switch)
         return FALSE;
 
     /* If we're already on this session, then ignore */
@@ -1359,9 +1370,10 @@
     /* Attempt to authenticate them */
     session = create_user_session (seat, username, FALSE);
     g_signal_connect (session, "authentication-complete", G_CALLBACK (switch_authentication_complete_cb), seat);
-    session_set_pam_service (session, seat_get_string_property (seat, "pam-service"));
+    session_set_pam_service (session, USER_SERVICE);
+    session_start (session);
 
-    return session_start (session);
+    return FALSE;
 }
 
 static Session *
@@ -1387,7 +1399,7 @@
 
     g_return_val_if_fail (seat != NULL, FALSE);
 
-    if (!seat_get_can_switch (seat) || !seat_get_allow_guest (seat))
+    if (!seat->priv->can_switch || !seat_get_allow_guest (seat))
         return FALSE;
 
     /* Switch to session if one open */
@@ -1403,12 +1415,12 @@
     if (!session)
         return FALSE;
 
-    display_server = create_display_server (seat, session);
+    display_server = create_display_server (seat, session_get_session_type (session));
 
     if (seat->priv->session_to_activate)
         g_object_unref (seat->priv->session_to_activate);
     seat->priv->session_to_activate = g_object_ref (session);
-    session_set_pam_service (session, seat_get_string_property (seat, "pam-autologin-service"));
+    session_set_pam_service (session, AUTOLOGIN_SERVICE);
     session_set_display_server (session, display_server);
 
     return display_server_start (display_server);
@@ -1422,7 +1434,7 @@
 
     g_return_val_if_fail (seat != NULL, FALSE);
 
-    if (!seat_get_can_switch (seat))
+    if (!seat->priv->can_switch)
         return FALSE;
 
     l_debug (seat, "Locking");
@@ -1440,7 +1452,7 @@
     if (!greeter_session)
         return FALSE;
 
-    display_server = create_display_server (seat, SESSION (greeter_session));
+    display_server = create_display_server (seat, session_get_session_type (SESSION (greeter_session)));
 
     if (seat->priv->session_to_activate)
         g_object_unref (seat->priv->session_to_activate);
@@ -1473,6 +1485,12 @@
     return seat->priv->stopping;
 }
 
+static gboolean
+seat_real_get_start_local_sessions (Seat *seat)
+{
+    return TRUE;
+}
+
 static void
 seat_real_setup (Seat *seat)
 {
@@ -1487,6 +1505,16 @@
     gboolean autologin_in_background;
     Session *session = NULL, *background_session = NULL;
 
+    l_debug (seat, "Starting");
+
+    /* If this display server doesn't have a session running on it, just start it */
+    if (!get_start_local_sessions (seat))
+    {
+        DisplayServer *display_server;
+        display_server = create_display_server (seat, "x"); // FIXME: Not necessarily an X seat, but not sure what to put here
+        return display_server_start (display_server);
+    }
+
     /* Get autologin settings */
     autologin_username = seat_get_string_property (seat, "autologin-user");
     if (g_strcmp0 (autologin_username, "") == 0)
@@ -1504,7 +1532,7 @@
             session = create_user_session (seat, autologin_username, TRUE);
 
         if (session)
-            session_set_pam_service (session, seat_get_string_property (seat, "pam-autologin-service"));
+            session_set_pam_service (session, AUTOLOGIN_SERVICE);
 
         /* Load in background if required */
         if (autologin_in_background && session)
@@ -1521,7 +1549,7 @@
                 g_object_unref (seat->priv->session_to_activate);
             seat->priv->session_to_activate = g_object_ref (session);
 
-            display_server = create_display_server (seat, session);
+            display_server = create_display_server (seat, session_get_session_type (session));
             session_set_display_server (session, display_server);
             if (!display_server || !display_server_start (display_server))
             {
@@ -1565,7 +1593,7 @@
                 greeter_set_hint (greeter_session, "autologin-guest", "true");
         }
 
-        display_server = create_display_server (seat, session);
+        display_server = create_display_server (seat, session_get_session_type (session));
         session_set_display_server (session, display_server);
         if (!display_server || !display_server_start (display_server))
         {
@@ -1589,12 +1617,13 @@
     {
         DisplayServer *background_display_server;
 
-        background_display_server = create_display_server (seat, background_session);
+        background_display_server = create_display_server (seat, session_get_session_type (background_session));
         session_set_display_server (background_session, background_display_server);
         if (!display_server_start (background_display_server))
             l_warning (seat, "Failed to start display server for background session");
     }
 
+    seat->priv->started = TRUE;
     return TRUE;
 }
 
@@ -1709,6 +1738,7 @@
 {
     GObjectClass *object_class = G_OBJECT_CLASS (klass);
 
+    klass->get_start_local_sessions = seat_real_get_start_local_sessions;
     klass->setup = seat_real_setup;
     klass->start = seat_real_start;
     klass->create_greeter_session = seat_real_create_greeter_session;
diff -Naur lightdm-1.10.2.orig/src/seat.h lightdm-1.10.1/src/seat.h
--- lightdm-1.10.2.orig/src/seat.h	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/seat.h	2014-04-08 11:30:25.000000000 +0700
@@ -30,7 +30,7 @@
 
 typedef struct
 {
-    GObject      parent_instance;
+    GObject         parent_instance;
     SeatPrivate *priv;
 } Seat;
 
@@ -38,9 +38,10 @@
 {
     GObjectClass parent_class;
 
+    gboolean (*get_start_local_sessions) (Seat *seat);
     void (*setup)(Seat *seat);
     gboolean (*start)(Seat *seat);
-    DisplayServer *(*create_display_server) (Seat *seat, Session *session);
+    DisplayServer *(*create_display_server) (Seat *seat, const gchar *session_type);
     gboolean (*display_server_supports_session_type) (Seat *seat, DisplayServer *display_server, const gchar *session_type);
     Greeter *(*create_greeter_session) (Seat *seat);
     Session *(*create_session) (Seat *seat);
@@ -74,7 +75,7 @@
 
 const gchar *seat_get_name (Seat *seat);
 
-void seat_set_supports_multi_session (Seat *seat, gboolean supports_multi_session);
+void seat_set_can_switch (Seat *seat, gboolean can_switch);
 
 void seat_set_share_display_server (Seat *seat, gboolean share_display_server);
 
diff -Naur lightdm-1.10.2.orig/src/seat-surfaceflinger.c lightdm-1.10.1/src/seat-surfaceflinger.c
--- lightdm-1.10.2.orig/src/seat-surfaceflinger.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/seat-surfaceflinger.c	2014-04-08 11:30:25.000000000 +0700
@@ -20,17 +20,13 @@
 static void
 seat_surfaceflinger_setup (Seat *seat)
 {
-    seat_set_supports_multi_session (seat, FALSE);
+    seat_set_can_switch (seat, FALSE);
     SEAT_CLASS (seat_surfaceflinger_parent_class)->setup (seat);
 }
 
 static DisplayServer *
-seat_surfaceflinger_create_display_server (Seat *seat, Session *session)
+seat_surfaceflinger_create_display_server (Seat *seat, const gchar *session_type)
 {
-    const gchar *session_type;
-
-    session_type = session_get_session_type (session);
-
     /* Allow mir types too, because Mir sessions usually support surfaceflinger
        as an alternate mode, since Mir is frequently used on phones. */
     if (strcmp (session_type, "surfaceflinger") == 0 || strcmp (session_type, "mir") == 0)
diff -Naur lightdm-1.10.2.orig/src/seat-unity.c lightdm-1.10.1/src/seat-unity.c
--- lightdm-1.10.2.orig/src/seat-unity.c	2014-09-16 06:04:52.000000000 +0700
+++ lightdm-1.10.1/src/seat-unity.c	2014-04-08 11:30:25.000000000 +0700
@@ -27,9 +27,6 @@
     /* System compositor */
     UnitySystemCompositor *compositor;
 
-    /* X server being used for XDMCP */
-    XServerLocal *xdmcp_x_server;
-
     /* Next Mir ID to use for a Mir sessions, X server and greeters */
     gint next_session_id;
     gint next_x_server_id;
@@ -42,111 +39,41 @@
 
 G_DEFINE_TYPE (SeatUnity, seat_unity, SEAT_TYPE);
 
-static XServerLocal *create_x_server (Seat *seat);
-
-static void
-seat_unity_setup (Seat *seat)
-{
-    seat_set_supports_multi_session (seat, TRUE);
-    SEAT_CLASS (seat_unity_parent_class)->setup (seat);
-}
-
-static void
-check_stopped (SeatUnity *seat)
+static gboolean
+seat_unity_get_start_local_sessions (Seat *seat)
 {
-    if (!seat->priv->compositor && !seat->priv->xdmcp_x_server)
-        SEAT_CLASS (seat_unity_parent_class)->stop (SEAT (seat));
+    return !seat_get_string_property (seat, "xdmcp-manager");
 }
 
 static void
-xdmcp_x_server_stopped_cb (DisplayServer *display_server, Seat *seat)
+seat_unity_setup (Seat *seat)
 {
-    l_debug (seat, "XDMCP X server stopped");
-
-    g_signal_handlers_disconnect_matched (SEAT_UNITY (seat)->priv->xdmcp_x_server, G_SIGNAL_MATCH_DATA, 0, 0, NULL, NULL, seat);
-    SEAT_UNITY (seat)->priv->xdmcp_x_server = NULL;
-
-    g_object_unref (display_server);
-
-    if (seat_get_is_stopping (seat))
-        check_stopped (SEAT_UNITY (seat));
-    else
-        seat_stop (seat);
+    seat_set_can_switch (seat, TRUE);
+    SEAT_CLASS (seat_unity_parent_class)->setup (seat);
 }
 
 static void
 compositor_ready_cb (UnitySystemCompositor *compositor, SeatUnity *seat)
 {
-    const gchar *xdmcp_manager = NULL;
-
-    l_debug (seat, "Compositor ready");
-
-    /* If running as an XDMCP client then just start an X server */
-    xdmcp_manager = seat_get_string_property (SEAT (seat), "xdmcp-manager");
-    if (xdmcp_manager)
-    {
-        const gchar *key_name = NULL;
-        gint port = 0;
-
-        seat->priv->xdmcp_x_server = create_x_server (SEAT (seat));
-        x_server_local_set_xdmcp_server (seat->priv->xdmcp_x_server, xdmcp_manager);
-        port = seat_get_integer_property (SEAT (seat), "xdmcp-port");
-        if (port > 0)
-            x_server_local_set_xdmcp_port (seat->priv->xdmcp_x_server, port);
-        key_name = seat_get_string_property (SEAT (seat), "xdmcp-key");
-        if (key_name)
-        {
-            gchar *path;
-            GKeyFile *keys;
-            gboolean result;
-            GError *error = NULL;
-
-            path = g_build_filename (config_get_directory (config_get_instance ()), "keys.conf", NULL);
-
-            keys = g_key_file_new ();
-            result = g_key_file_load_from_file (keys, path, G_KEY_FILE_NONE, &error);
-            if (error)
-                l_debug (seat, "Error getting key %s", error->message);
-            g_clear_error (&error);      
-
-            if (result)
-            {
-                gchar *key = NULL;
-
-                if (g_key_file_has_key (keys, "keyring", key_name, NULL))
-                    key = g_key_file_get_string (keys, "keyring", key_name, NULL);
-                else
-                    l_debug (seat, "Key %s not defined", key_name);
-
-                if (key)
-                    x_server_local_set_xdmcp_key (seat->priv->xdmcp_x_server, key);
-                g_free (key);
-            }
-
-            g_free (path);
-            g_key_file_free (keys);
-        }
-
-        g_signal_connect (seat->priv->xdmcp_x_server, "stopped", G_CALLBACK (xdmcp_x_server_stopped_cb), seat);
-        if (!display_server_start (DISPLAY_SERVER (seat->priv->xdmcp_x_server)))
-            seat_stop (SEAT (seat));
-    }
-
+    l_debug (seat, "Compositor ready"); 
     SEAT_CLASS (seat_unity_parent_class)->start (SEAT (seat));
 }
 
 static void
 compositor_stopped_cb (UnitySystemCompositor *compositor, SeatUnity *seat)
 {
-    l_debug (seat, "Compositor stopped");
-
     g_object_unref (seat->priv->compositor);
     seat->priv->compositor = NULL;
 
     if (seat_get_is_stopping (SEAT (seat)))
-        check_stopped (seat);
-    else
-        seat_stop (SEAT (seat));
+    {
+        SEAT_CLASS (seat_unity_parent_class)->stop (SEAT (seat));
+        return;
+    }
+
+    l_debug (seat, "Stopping Unity seat, compositor terminated");
+
+    seat_stop (SEAT (seat));
 }
 
 static gboolean
@@ -177,26 +104,27 @@
         return FALSE;
     }
 
-    timeout = seat_get_integer_property (SEAT (seat), "unity-compositor-timeout");
+    timeout = seat_get_integer_property (seat, "unity-compositor-timeout");
     if (timeout <= 0)
         timeout = 60;
 
     SEAT_UNITY (seat)->priv->compositor = unity_system_compositor_new ();
     g_signal_connect (SEAT_UNITY (seat)->priv->compositor, "ready", G_CALLBACK (compositor_ready_cb), seat);
     g_signal_connect (SEAT_UNITY (seat)->priv->compositor, "stopped", G_CALLBACK (compositor_stopped_cb), seat);
-    unity_system_compositor_set_command (SEAT_UNITY (seat)->priv->compositor, seat_get_string_property (SEAT (seat), "unity-compositor-command"));
+    unity_system_compositor_set_command (SEAT_UNITY (seat)->priv->compositor, seat_get_string_property (seat, "unity-compositor-command"));
     unity_system_compositor_set_vt (SEAT_UNITY (seat)->priv->compositor, vt);
     unity_system_compositor_set_timeout (SEAT_UNITY (seat)->priv->compositor, timeout);
 
     return display_server_start (DISPLAY_SERVER (SEAT_UNITY (seat)->priv->compositor));
 }
 
-static XServerLocal *
+static DisplayServer *
 create_x_server (Seat *seat)
 {
     XServerLocal *x_server;
-    const gchar *command = NULL, *layout = NULL, *config_file = NULL;
+    const gchar *command = NULL, *layout = NULL, *config_file = NULL, *xdmcp_manager = NULL, *key_name = NULL;
     gboolean allow_tcp;
+    gint port = 0;
     gchar *id;
 
     l_debug (seat, "Starting X server on Unity compositor");
@@ -226,7 +154,51 @@
     allow_tcp = seat_get_boolean_property (seat, "xserver-allow-tcp");
     x_server_local_set_allow_tcp (x_server, allow_tcp);
 
-    return x_server;
+    xdmcp_manager = seat_get_string_property (seat, "xdmcp-manager");
+    if (xdmcp_manager)
+        x_server_local_set_xdmcp_server (x_server, xdmcp_manager);
+
+    port = seat_get_integer_property (seat, "xdmcp-port");
+    if (port > 0)
+        x_server_local_set_xdmcp_port (x_server, port);
+
+    key_name = seat_get_string_property (seat, "xdmcp-key");
+    if (key_name)
+    {
+        gchar *dir, *path;
+        GKeyFile *keys;
+        gboolean result;
+        GError *error = NULL;
+
+        dir = config_get_string (config_get_instance (), "LightDM", "config-directory");
+        path = g_build_filename (dir, "keys.conf", NULL);
+        g_free (dir);
+
+        keys = g_key_file_new ();
+        result = g_key_file_load_from_file (keys, path, G_KEY_FILE_NONE, &error);
+        if (error)
+            l_debug (seat, "Error getting key %s", error->message);
+        g_clear_error (&error);
+
+        if (result)
+        {
+            gchar *key = NULL;
+
+            if (g_key_file_has_key (keys, "keyring", key_name, NULL))
+                key = g_key_file_get_string (keys, "keyring", key_name, NULL);
+            else
+                l_debug (seat, "Key %s not defined", key_name);
+
+            if (key)
+                x_server_local_set_xdmcp_key (x_server, key);
+            g_free (key);
+        }
+
+        g_free (path);
+        g_key_file_free (keys);
+    }
+
+    return DISPLAY_SERVER (x_server);
 }
 
 static DisplayServer *
@@ -241,13 +213,10 @@
 }
 
 static DisplayServer *
-seat_unity_create_display_server (Seat *seat, Session *session)
+seat_unity_create_display_server (Seat *seat, const gchar *session_type)
 {  
-    const gchar *session_type;
-  
-    session_type = session_get_session_type (session);
     if (strcmp (session_type, "x") == 0)
-        return DISPLAY_SERVER (create_x_server (seat));
+        return create_x_server (seat);
     else if (strcmp (session_type, "mir") == 0)
         return create_mir_server (seat);
     else
@@ -380,16 +349,13 @@
 static void
 seat_unity_run_script (Seat *seat, DisplayServer *display_server, Process *script)
 {
-    if (IS_X_SERVER_LOCAL (display_server))
-    {
-        XServerLocal *x_server;
-        const gchar *path;
+    const gchar *path;
+    XServerLocal *x_server;
 
-        x_server = X_SERVER_LOCAL (display_server);
-        path = x_server_local_get_authority_file_path (x_server);
-        process_set_env (script, "DISPLAY", x_server_get_address (X_SERVER (x_server)));
-        process_set_env (script, "XAUTHORITY", path);
-    }
+    x_server = X_SERVER_LOCAL (display_server);
+    path = x_server_local_get_authority_file_path (x_server);
+    process_set_env (script, "DISPLAY", x_server_get_address (X_SERVER (x_server)));
+    process_set_env (script, "XAUTHORITY", path);
 
     SEAT_CLASS (seat_unity_parent_class)->run_script (seat, display_server, script);
 }
@@ -399,13 +365,12 @@
 {
     /* Stop the compositor first */
     if (SEAT_UNITY (seat)->priv->compositor)
+    {
         display_server_stop (DISPLAY_SERVER (SEAT_UNITY (seat)->priv->compositor));
+        return;
+    }
 
-    /* Stop the XDMCP X server first */
-    if (SEAT_UNITY (seat)->priv->xdmcp_x_server)
-        display_server_stop (DISPLAY_SERVER (SEAT_UNITY (seat)->priv->xdmcp_x_server));
-
-    check_stopped (SEAT_UNITY (seat));
+    SEAT_CLASS (seat_unity_parent_class)->stop (seat);
 }
 
 static void
@@ -421,11 +386,6 @@
 
     if (seat->priv->compositor)
         g_object_unref (seat->priv->compositor);
-    if (seat->priv->xdmcp_x_server)
-    {
-        g_signal_handlers_disconnect_matched (seat->priv->xdmcp_x_server, G_SIGNAL_MATCH_DATA, 0, 0, NULL, NULL, seat);
-        g_object_unref (seat->priv->xdmcp_x_server);
-    }
     if (seat->priv->active_session)
         g_object_unref (seat->priv->active_session);
     if (seat->priv->active_display_server)
@@ -441,6 +401,7 @@
     SeatClass *seat_class = SEAT_CLASS (klass);
 
     object_class->finalize = seat_unity_finalize;
+    seat_class->get_start_local_sessions = seat_unity_get_start_local_sessions;
     seat_class->setup = seat_unity_setup;
     seat_class->start = seat_unity_start;
     seat_class->create_display_server = seat_unity_create_display_server;
diff -Naur lightdm-1.10.2.orig/src/seat-xdmcp-session.c lightdm-1.10.1/src/seat-xdmcp-session.c
--- lightdm-1.10.2.orig/src/seat-xdmcp-session.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/seat-xdmcp-session.c	2014-04-08 11:30:25.000000000 +0700
@@ -34,13 +34,13 @@
 }
 
 static DisplayServer *
-seat_xdmcp_session_create_display_server (Seat *seat, Session *session)
+seat_xdmcp_session_create_display_server (Seat *seat, const gchar *session_type)
 {
     XAuthority *authority;
     gchar *host;
     XServerRemote *x_server;
 
-    if (strcmp (session_get_session_type (session), "x") != 0)
+    if (strcmp (session_type, "x") != 0)
         return NULL;
 
     authority = xdmcp_session_get_authority (SEAT_XDMCP_SESSION (seat)->priv->session);
diff -Naur lightdm-1.10.2.orig/src/seat-xlocal.c lightdm-1.10.1/src/seat-xlocal.c
--- lightdm-1.10.2.orig/src/seat-xlocal.c	2014-09-17 11:10:37.000000000 +0700
+++ lightdm-1.10.1/src/seat-xlocal.c	2014-04-08 11:30:25.000000000 +0700
@@ -18,102 +18,25 @@
 #include "plymouth.h"
 #include "vt.h"
 
-struct SeatXLocalPrivate
-{
-    /* X server being used for XDMCP */
-    XServerLocal *xdmcp_x_server;
-};
-
 G_DEFINE_TYPE (SeatXLocal, seat_xlocal, SEAT_TYPE);
 
-static XServerLocal *create_x_server (Seat *seat);
+static gboolean
+seat_xlocal_get_start_local_sessions (Seat *seat)
+{
+    return !seat_get_string_property (seat, "xdmcp-manager");
+}
 
 static void
 seat_xlocal_setup (Seat *seat)
 {
-    seat_set_supports_multi_session (seat, TRUE);
+    seat_set_can_switch (seat, TRUE);
     seat_set_share_display_server (seat, seat_get_boolean_property (seat, "xserver-share"));
     SEAT_CLASS (seat_xlocal_parent_class)->setup (seat);
 }
 
-static void
-check_stopped (SeatXLocal *seat)
-{
-    if (!seat->priv->xdmcp_x_server)
-        SEAT_CLASS (seat_xlocal_parent_class)->stop (SEAT (seat));
-}
-
-static void
-xdmcp_x_server_stopped_cb (DisplayServer *display_server, Seat *seat)
-{
-    l_debug (seat, "XDMCP X server stopped");
-
-    g_signal_handlers_disconnect_matched (SEAT_XLOCAL (seat)->priv->xdmcp_x_server, G_SIGNAL_MATCH_DATA, 0, 0, NULL, NULL, seat);
-    SEAT_XLOCAL (seat)->priv->xdmcp_x_server = NULL;
-    g_object_unref (display_server);
-    
-    if (seat_get_is_stopping (seat))
-        check_stopped (SEAT_XLOCAL (seat));
-    else
-        seat_stop (seat);
-}
-
 static gboolean
 seat_xlocal_start (Seat *seat)
 {
-    const gchar *xdmcp_manager = NULL;
-
-    /* If running as an XDMCP client then just start an X server */
-    xdmcp_manager = seat_get_string_property (seat, "xdmcp-manager");
-    if (xdmcp_manager)
-    {
-        SeatXLocal *s = SEAT_XLOCAL (seat);
-        const gchar *key_name = NULL;
-        gint port = 0;
-
-        s->priv->xdmcp_x_server = create_x_server (seat);
-        x_server_local_set_xdmcp_server (s->priv->xdmcp_x_server, xdmcp_manager);
-        port = seat_get_integer_property (seat, "xdmcp-port");
-        if (port > 0)
-            x_server_local_set_xdmcp_port (s->priv->xdmcp_x_server, port);
-        key_name = seat_get_string_property (seat, "xdmcp-key");
-        if (key_name)
-        {
-            gchar *path;
-            GKeyFile *keys;
-            gboolean result;
-            GError *error = NULL;
-
-            path = g_build_filename (config_get_directory (config_get_instance ()), "keys.conf", NULL);
-
-            keys = g_key_file_new ();
-            result = g_key_file_load_from_file (keys, path, G_KEY_FILE_NONE, &error);
-            if (error)
-                l_debug (seat, "Error getting key %s", error->message);
-            g_clear_error (&error);      
-
-            if (result)
-            {
-                gchar *key = NULL;
-
-                if (g_key_file_has_key (keys, "keyring", key_name, NULL))
-                    key = g_key_file_get_string (keys, "keyring", key_name, NULL);
-                else
-                    l_debug (seat, "Key %s not defined", key_name);
-
-                if (key)
-                    x_server_local_set_xdmcp_key (s->priv->xdmcp_x_server, key);
-                g_free (key);
-            }
-
-            g_free (path);
-            g_key_file_free (keys);
-        }
-
-        g_signal_connect (s->priv->xdmcp_x_server, "stopped", G_CALLBACK (xdmcp_x_server_stopped_cb), seat);
-        return display_server_start (DISPLAY_SERVER (s->priv->xdmcp_x_server));
-    }
-
     return SEAT_CLASS (seat_xlocal_parent_class)->start (seat);
 }
 
@@ -138,9 +61,7 @@
 get_vt (Seat *seat, DisplayServer *display_server)
 {
     gint vt = -1;
-
-    if (g_strcmp0 (seat_get_name (seat), "seat0") != 0)
-        return vt;
+    const gchar *xdg_seat = seat_get_string_property (seat, "xdg-seat");
 
     /* If Plymouth is running, stop it */
     if (plymouth_get_is_active () && plymouth_has_active_vt ())
@@ -158,19 +79,21 @@
     }
     if (plymouth_get_is_active ())
         plymouth_quit (FALSE);
-    if (vt < 0)
+    if (!xdg_seat)
+        xdg_seat = "seat0";
+    if (vt < 0 && g_strcmp0 (xdg_seat, "seat0") == 0)
         vt = vt_get_unused ();
 
     return vt;
 }
 
-static XServerLocal *
+static DisplayServer *
 create_x_server (Seat *seat)
 {
     XServerLocal *x_server;
-    const gchar *command = NULL, *layout = NULL, *config_file = NULL;
+    const gchar *command = NULL, *layout = NULL, *config_file = NULL, *xdmcp_manager = NULL, *key_name = NULL;
     gboolean allow_tcp;
-    gint vt;
+    gint vt, port = 0;
 
     x_server = x_server_local_new ();
 
@@ -196,8 +119,6 @@
         x_server_local_set_layout (x_server, layout);
 
     x_server_local_set_xdg_seat (x_server, seat_get_name (seat));
-    if (config_get_boolean (config_get_instance (), "LightDM", "logind-load-seats") && strcmp (seat_get_name (seat), "seat0") != 0)
-        x_server_local_set_sharevts (x_server, TRUE);
 
     config_file = seat_get_string_property (seat, "xserver-config");
     if (config_file)
@@ -206,7 +127,51 @@
     allow_tcp = seat_get_boolean_property (seat, "xserver-allow-tcp");
     x_server_local_set_allow_tcp (x_server, allow_tcp);    
 
-    return x_server;
+    xdmcp_manager = seat_get_string_property (seat, "xdmcp-manager");
+    if (xdmcp_manager)
+        x_server_local_set_xdmcp_server (x_server, xdmcp_manager);
+
+    port = seat_get_integer_property (seat, "xdmcp-port");
+    if (port > 0)
+        x_server_local_set_xdmcp_port (x_server, port);
+
+    key_name = seat_get_string_property (seat, "xdmcp-key");
+    if (key_name)
+    {
+        gchar *dir, *path;
+        GKeyFile *keys;
+        gboolean result;
+        GError *error = NULL;
+
+        dir = config_get_string (config_get_instance (), "LightDM", "config-directory");
+        path = g_build_filename (dir, "keys.conf", NULL);
+        g_free (dir);
+
+        keys = g_key_file_new ();
+        result = g_key_file_load_from_file (keys, path, G_KEY_FILE_NONE, &error);
+        if (error)
+            l_debug (seat, "Error getting key %s", error->message);
+        g_clear_error (&error);      
+
+        if (result)
+        {
+            gchar *key = NULL;
+
+            if (g_key_file_has_key (keys, "keyring", key_name, NULL))
+                key = g_key_file_get_string (keys, "keyring", key_name, NULL);
+            else
+                l_debug (seat, "Key %s not defined", key_name);
+
+            if (key)
+                x_server_local_set_xdmcp_key (x_server, key);
+            g_free (key);
+        }
+
+        g_free (path);
+        g_key_file_free (keys);
+    }
+
+    return DISPLAY_SERVER (x_server);
 }
 
 static DisplayServer *
@@ -247,27 +212,12 @@
 }
 
 static DisplayServer *
-seat_xlocal_create_display_server (Seat *seat, Session *session)
+seat_xlocal_create_display_server (Seat *seat, const gchar *session_type)
 {
-    const gchar *session_type;
-
-    session_type = session_get_session_type (session);
     if (strcmp (session_type, "x") == 0)
-        return DISPLAY_SERVER (create_x_server (seat));
+        return create_x_server (seat);
     else if (strcmp (session_type, "mir") == 0)
         return create_unity_system_compositor (seat);
-    else if (strcmp (session_type, "mir-container") == 0)
-    {
-        DisplayServer *compositor;
-        const gchar *compositor_command;
-
-        compositor = create_unity_system_compositor (seat);
-        compositor_command = session_config_get_compositor_command (session_get_config (session));
-        if (compositor_command)
-            unity_system_compositor_set_command (UNITY_SYSTEM_COMPOSITOR (compositor), compositor_command);
-      
-        return compositor;
-    }
     else
     {
         l_warning (seat, "Can't create unsupported display server '%s'", session_type);
@@ -300,17 +250,10 @@
 static void
 seat_xlocal_set_active_session (Seat *seat, Session *session)
 {
-    DisplayServer *display_server;
-
-    display_server = session_get_display_server (session);
-
-    gint vt = display_server_get_vt (display_server);
+    gint vt = display_server_get_vt (session_get_display_server (session));
     if (vt >= 0)
         vt_set_active (vt);
 
-    if (IS_UNITY_SYSTEM_COMPOSITOR (display_server) && strcmp (session_get_session_type (session), "mir-container") == 0)
-        unity_system_compositor_set_active_session (UNITY_SYSTEM_COMPOSITOR (display_server), IS_GREETER (session) ? "greeter-0" : "session-0");
-
     SEAT_CLASS (seat_xlocal_parent_class)->set_active_session (seat, session);
 }
 
@@ -340,58 +283,28 @@
 static void
 seat_xlocal_run_script (Seat *seat, DisplayServer *display_server, Process *script)
 {
-    if (IS_X_SERVER_LOCAL (display_server))
-    {
-        const gchar *path;
-        XServerLocal *x_server;
+    const gchar *path;
+    XServerLocal *x_server;
 
-        x_server = X_SERVER_LOCAL (display_server);
-        path = x_server_local_get_authority_file_path (x_server);
-        process_set_env (script, "DISPLAY", x_server_get_address (X_SERVER (x_server)));
-        process_set_env (script, "XAUTHORITY", path);
-    }
+    x_server = X_SERVER_LOCAL (display_server);
+    path = x_server_local_get_authority_file_path (x_server);
+    process_set_env (script, "DISPLAY", x_server_get_address (X_SERVER (x_server)));
+    process_set_env (script, "XAUTHORITY", path);
 
     SEAT_CLASS (seat_xlocal_parent_class)->run_script (seat, display_server, script);
 }
 
 static void
-seat_xlocal_stop (Seat *seat)
-{
-    /* Stop the XDMCP X server first */
-    if (SEAT_XLOCAL (seat)->priv->xdmcp_x_server)
-        display_server_stop (DISPLAY_SERVER (SEAT_XLOCAL (seat)->priv->xdmcp_x_server));
-
-    check_stopped (SEAT_XLOCAL (seat));
-}
-
-static void
 seat_xlocal_init (SeatXLocal *seat)
 {
-    seat->priv = G_TYPE_INSTANCE_GET_PRIVATE (seat, SEAT_XLOCAL_TYPE, SeatXLocalPrivate);
-}
-
-static void
-seat_xlocal_finalize (GObject *object)
-{
-    SeatXLocal *seat = SEAT_XLOCAL (object);
-
-    if (seat->priv->xdmcp_x_server)
-    {
-        g_signal_handlers_disconnect_matched (seat->priv->xdmcp_x_server, G_SIGNAL_MATCH_DATA, 0, 0, NULL, NULL, seat);
-        g_object_unref (seat->priv->xdmcp_x_server);
-    }
-
-    G_OBJECT_CLASS (seat_xlocal_parent_class)->finalize (object);
 }
 
 static void
 seat_xlocal_class_init (SeatXLocalClass *klass)
 {
-    GObjectClass *object_class = G_OBJECT_CLASS (klass);
     SeatClass *seat_class = SEAT_CLASS (klass);
 
-    object_class->finalize = seat_xlocal_finalize;
-
+    seat_class->get_start_local_sessions = seat_xlocal_get_start_local_sessions;
     seat_class->setup = seat_xlocal_setup;
     seat_class->start = seat_xlocal_start;
     seat_class->create_display_server = seat_xlocal_create_display_server;
@@ -400,7 +313,4 @@
     seat_class->set_active_session = seat_xlocal_set_active_session;
     seat_class->get_active_session = seat_xlocal_get_active_session;
     seat_class->run_script = seat_xlocal_run_script;
-    seat_class->stop = seat_xlocal_stop;
-
-    g_type_class_add_private (klass, sizeof (SeatXLocalPrivate));
 }
diff -Naur lightdm-1.10.2.orig/src/seat-xremote.c lightdm-1.10.1/src/seat-xremote.c
--- lightdm-1.10.2.orig/src/seat-xremote.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/seat-xremote.c	2014-04-08 11:30:25.000000000 +0700
@@ -20,19 +20,17 @@
 static void
 seat_xremote_setup (Seat *seat)
 {
-    seat_set_supports_multi_session (seat, FALSE);
+    seat_set_can_switch (seat, FALSE);
     SEAT_CLASS (seat_xremote_parent_class)->setup (seat);
 }
 
 static DisplayServer *
-seat_xremote_create_display_server (Seat *seat, Session *session)
+seat_xremote_create_display_server (Seat *seat, const gchar *session_type)
 {
-    const gchar *session_type;
     XServerRemote *x_server;
     const gchar *hostname;
     gint number;
 
-    session_type = session_get_session_type (session);
     if (strcmp (session_type, "x") != 0)
     {
         l_warning (seat, "X remote seat only supports X display servers, not '%s'", session_type);
diff -Naur lightdm-1.10.2.orig/src/seat-xvnc.c lightdm-1.10.1/src/seat-xvnc.c
--- lightdm-1.10.2.orig/src/seat-xvnc.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/seat-xvnc.c	2014-04-08 11:30:25.000000000 +0700
@@ -34,12 +34,12 @@
 }
 
 static DisplayServer *
-seat_xvnc_create_display_server (Seat *seat, Session *session)
+seat_xvnc_create_display_server (Seat *seat, const gchar *session_type)
 {
     XServerXVNC *x_server;
     const gchar *command = NULL;
 
-    if (strcmp (session_get_session_type (session), "x") != 0)
+    if (strcmp (session_type, "x") != 0)
         return NULL;
   
     x_server = x_server_xvnc_new ();
diff -Naur lightdm-1.10.2.orig/src/session.c lightdm-1.10.1/src/session.c
--- lightdm-1.10.2.orig/src/session.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/session.c	2014-04-28 04:47:43.000000000 +0700
@@ -38,8 +38,8 @@
 
 struct SessionPrivate
 {
-    /* Configuration for this session */
-    SessionConfig *config;
+    /* Session type */
+    gchar *session_type;
 
     /* Display server running on */
     DisplayServer *display_server;
@@ -131,27 +131,18 @@
 }
 
 void
-session_set_config (Session *session, SessionConfig *config)
+session_set_session_type (Session *session, const gchar *session_type)
 {
     g_return_if_fail (session != NULL);
-
-    if (session->priv->config)
-        g_object_unref (session->priv->config);
-    session->priv->config = g_object_ref (config);
-}
-
-SessionConfig *
-session_get_config (Session *session)
-{
-    g_return_val_if_fail (session != NULL, NULL);
-    return session->priv->config;
+    g_free (session->priv->session_type);
+    session->priv->session_type = g_strdup (session_type);
 }
 
 const gchar *
 session_get_session_type (Session *session)
 {
     g_return_val_if_fail (session != NULL, NULL);
-    return session_config_get_session_type (session_get_config (session));
+    return session->priv->session_type;
 }
 
 void
@@ -626,7 +617,7 @@
     close (from_child_input);
 
     /* Indicate what version of the protocol we are using */
-    version = 2;
+    version = 1;
     write_data (session, &version, sizeof (version));
 
     /* Send configuration */
@@ -805,8 +796,10 @@
     for (i = 0; i < argc; i++)
         write_string (session, session->priv->argv[i]);
 
-    session->priv->login1_session = read_string_from_child (session);
-    session->priv->console_kit_cookie = read_string_from_child (session);
+    if (login1_is_running ())
+        session->priv->login1_session = read_string_from_child (session);
+    if (!session->priv->login1_session)
+        session->priv->console_kit_cookie = read_string_from_child (session);
 }
 
 void
@@ -816,7 +809,7 @@
     if (getuid () == 0)
     {
         if (session->priv->login1_session)
-            login1_service_lock_session (login1_service_get_instance (), session->priv->login1_session);
+            login1_lock_session (session->priv->login1_session);
         else if (session->priv->console_kit_cookie)
             ck_lock_session (session->priv->console_kit_cookie);
     }
@@ -829,7 +822,7 @@
     if (getuid () == 0)
     {
         if (session->priv->login1_session)
-            login1_service_unlock_session (login1_service_get_instance (), session->priv->login1_session);
+            login1_unlock_session (session->priv->login1_session);
         else if (session->priv->console_kit_cookie)
             ck_unlock_session (session->priv->console_kit_cookie);
     }
@@ -842,7 +835,7 @@
     if (getuid () == 0)
     {
         if (session->priv->login1_session)
-            login1_service_activate_session (login1_service_get_instance (), session->priv->login1_session);
+            login1_activate_session (session->priv->login1_session);
         else if (session->priv->console_kit_cookie)
             ck_activate_session (session->priv->console_kit_cookie);
     }
@@ -911,8 +904,7 @@
     Session *self = SESSION (object);
     int i;
 
-    if (self->priv->config)
-        g_object_unref (self->priv->config);
+    g_free (self->priv->session_type);
     if (self->priv->display_server)
         g_object_unref (self->priv->display_server);
     if (self->priv->pid)
diff -Naur lightdm-1.10.2.orig/src/session-child.c lightdm-1.10.1/src/session-child.c
--- lightdm-1.10.2.orig/src/session-child.c	2014-09-03 14:19:58.000000000 +0700
+++ lightdm-1.10.1/src/session-child.c	2014-04-28 04:47:43.000000000 +0700
@@ -243,8 +243,8 @@
     XAuthority *x_authority = NULL;
     gchar *x_authority_filename;
     GDBusConnection *bus;
-    const gchar *login1_session = NULL;
     gchar *console_kit_cookie = NULL;
+    gchar *login1_session = NULL;
     const gchar *locale_value;
     gchar *locale_var;
     static const gchar * const locale_var_names[] = {
@@ -544,14 +544,13 @@
         return EXIT_FAILURE;
     }
 
-    login1_session = pam_getenv (pam_handle, "XDG_SESSION_ID");
-    if (login1_session)
+    if (login1_is_running ())
     {
+        login1_session = login1_get_session_id ();
         write_string (login1_session);
-        if (version >= 2)
-            write_string (NULL);
     }
-    else
+
+    if (!login1_session)
     {
         /* Open a Console Kit session */
         g_variant_builder_init (&ck_parameters, G_VARIANT_TYPE ("(a(sv))"));
@@ -573,8 +572,6 @@
         else
             g_variant_builder_add (&ck_parameters, "(sv)", "is-local", g_variant_new_boolean (TRUE));
         console_kit_cookie = ck_open_session (&ck_parameters);
-        if (version >= 2)
-            write_string (NULL);
         write_string (console_kit_cookie);
         if (console_kit_cookie)
         {
diff -Naur lightdm-1.10.2.orig/src/session-config.c lightdm-1.10.1/src/session-config.c
--- lightdm-1.10.2.orig/src/session-config.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/session-config.c	2014-04-14 04:30:10.000000000 +0700
@@ -21,9 +21,6 @@
 
     /* Command to run */
     gchar *command;
-
-    /* Compositor command to run (for type mir-container) */
-    gchar *compositor_command;
 };
 
 G_DEFINE_TYPE (SessionConfig, session_config, G_TYPE_OBJECT);
@@ -54,7 +51,6 @@
     if (!config->priv->session_type)
         config->priv->session_type = g_strdup ("x");
     config->priv->desktop_name = g_key_file_get_string (desktop_file, G_KEY_FILE_DESKTOP_GROUP, "X-LightDM-DesktopName", NULL);
-    config->priv->compositor_command = g_key_file_get_string (desktop_file, G_KEY_FILE_DESKTOP_GROUP, "X-LightDM-System-Compositor-Command", NULL);
 
     g_key_file_free (desktop_file);
 
@@ -82,13 +78,6 @@
     return config->priv->desktop_name;
 }
 
-const gchar *
-session_config_get_compositor_command (SessionConfig *config)
-{
-    g_return_val_if_fail (config != NULL, NULL);
-    return config->priv->compositor_command;
-}
-
 static void
 session_config_init (SessionConfig *config)
 {
@@ -103,7 +92,6 @@
     g_free (self->priv->session_type);
     g_free (self->priv->desktop_name);
     g_free (self->priv->command);
-    g_free (self->priv->compositor_command);
 
     G_OBJECT_CLASS (session_config_parent_class)->finalize (object);
 }
diff -Naur lightdm-1.10.2.orig/src/session-config.h lightdm-1.10.1/src/session-config.h
--- lightdm-1.10.2.orig/src/session-config.h	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/session-config.h	2014-04-08 11:30:25.000000000 +0700
@@ -44,8 +44,6 @@
 
 const gchar *session_config_get_desktop_name (SessionConfig *config);
 
-const gchar *session_config_get_compositor_command (SessionConfig *config);
-
 G_END_DECLS
 
 #endif /* SESSION_CONFIG_H_ */
diff -Naur lightdm-1.10.2.orig/src/session.h lightdm-1.10.1/src/session.h
--- lightdm-1.10.2.orig/src/session.h	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/src/session.h	2014-04-08 11:30:25.000000000 +0700
@@ -18,7 +18,6 @@
 
 typedef struct Session Session;
 
-#include "session-config.h"
 #include "display-server.h"
 #include "accounts.h"
 #include "x-authority.h"
@@ -62,9 +61,7 @@
 
 Session *session_new (void);
 
-void session_set_config (Session *session, SessionConfig *config);
-
-SessionConfig *session_get_config (Session *session);
+void session_set_session_type (Session *session, const gchar *session_type);
 
 const gchar *session_get_session_type (Session *session);
 
diff -Naur lightdm-1.10.2.orig/src/unity-system-compositor.c lightdm-1.10.1/src/unity-system-compositor.c
--- lightdm-1.10.2.orig/src/unity-system-compositor.c	2014-09-08 06:21:24.000000000 +0700
+++ lightdm-1.10.1/src/unity-system-compositor.c	2014-04-14 04:30:10.000000000 +0700
@@ -150,8 +150,6 @@
     errno = 0;
     if (write (compositor->priv->to_compositor_pipe[1], data, data_length) != data_length)
         l_warning (compositor, "Failed to write to compositor: %s", strerror (errno));
-
-    g_free (data);
 }
 
 void
diff -Naur lightdm-1.10.2.orig/src/x-server-local.c lightdm-1.10.1/src/x-server-local.c
--- lightdm-1.10.2.orig/src/x-server-local.c	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/x-server-local.c	2014-04-08 11:30:25.000000000 +0700
@@ -40,9 +40,6 @@
     /* Value for -seat argument */
     gchar *xdg_seat;
 
-    /* TRUE if should share VT with other X server */
-    gboolean sharevts;
-
     /* TRUE if TCP/IP connections are allowed */
     gboolean allow_tcp;
 
@@ -219,13 +216,6 @@
 }
 
 void
-x_server_local_set_sharevts (XServerLocal *server, gboolean sharevts)
-{
-    g_return_if_fail (server != NULL);
-    server->priv->sharevts = sharevts;
-}
-
-void
 x_server_local_set_allow_tcp (XServerLocal *server, gboolean allow_tcp)
 {
     g_return_if_fail (server != NULL);
@@ -473,9 +463,6 @@
     if (server->priv->xdg_seat)
         g_string_append_printf (command, " -seat %s", server->priv->xdg_seat);
 
-    if (server->priv->sharevts)
-        g_string_append (command, " -sharevts");
-
     write_authority_file (server);
     if (server->priv->authority_file)
         g_string_append_printf (command, " -auth %s", server->priv->authority_file);
diff -Naur lightdm-1.10.2.orig/src/x-server-local.h lightdm-1.10.1/src/x-server-local.h
--- lightdm-1.10.2.orig/src/x-server-local.h	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/src/x-server-local.h	2014-04-08 11:30:25.000000000 +0700
@@ -51,8 +51,6 @@
 
 void x_server_local_set_xdg_seat (XServerLocal *server, const gchar *xdg_seat);
 
-void x_server_local_set_sharevts (XServerLocal *server, gboolean sharevts);
-
 void x_server_local_set_allow_tcp (XServerLocal *server, gboolean allow_tcp);
 
 void x_server_local_set_xdmcp_server (XServerLocal *server, const gchar *hostname);
diff -Naur lightdm-1.10.2.orig/tests/data/sessions/mir-container.desktop lightdm-1.10.1/tests/data/sessions/mir-container.desktop
--- lightdm-1.10.2.orig/tests/data/sessions/mir-container.desktop	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/tests/data/sessions/mir-container.desktop	1970-01-01 07:00:00.000000000 +0700
@@ -1,6 +0,0 @@
-[Desktop Entry]
-Name=Test Session
-Comment=LightDM test Mir session
-Exec=test-session
-X-LightDM-Session-Type=mir-container
-X-LightDM-System-Compositor-Command=unity-system-compositor --container
diff -Naur lightdm-1.10.2.orig/tests/Makefile.am lightdm-1.10.1/tests/Makefile.am
--- lightdm-1.10.2.orig/tests/Makefile.am	2014-09-16 06:05:29.000000000 +0700
+++ lightdm-1.10.1/tests/Makefile.am	2014-04-28 04:47:43.000000000 +0700
@@ -20,7 +20,6 @@
 	test-headless \
 	test-autologin \
 	test-autologin-pam \
-	test-autologin-pam-config \
 	test-autologin-in-background \
 	test-autologin-guest-in-background \
 	test-autologin-timeout-in-background \
@@ -38,7 +37,6 @@
 	test-restart-authentication \
 	test-gobject-cancel-authentication \
 	test-login-pam \
-	test-login-pam-config \
 	test-denied \
 	test-expired \
 	test-cred-error \
@@ -67,7 +65,6 @@
 	test-user-renamed \
 	test-user-renamed-invalid \
 	test-user-name \
-	test-user-uid \
 	test-user-image \
 	test-user-background \
 	test-user-layout \
@@ -135,15 +132,12 @@
 	test-lock-seat-console-kit \
 	test-lock-seat-return-session-console-kit \
 	test-switch-to-greeter \
-	test-switch-to-greeter-disabled \
 	test-switch-to-greeter-new-session \
 	test-switch-to-greeter-return-session \
 	test-switch-to-greeter-return-session-pam \
 	test-switch-to-greeter-return-session-logout \
 	test-switch-to-guest \
-	test-switch-to-guest-disabled \
 	test-switch-to-user \
-	test-switch-to-user-disabled \
 	test-switch-to-user-no-password \
 	test-switch-to-user-active \
 	test-switch-to-user-existing \
@@ -172,19 +166,11 @@
 	test-open-file-descriptors \
 	test-xdmcp-server-open-file-descriptors \
 	test-multi-seat \
-	test-multi-seat-legacy \
-	test-multi-seat-seat0-non-graphical \
-	test-multi-seat-seat0-non-graphical-disabled \
-	test-multi-seat-non-graphical \
-	test-multi-seat-non-graphical-disabled \
-	test-multi-seat-change-graphical \
-	test-multi-seat-change-graphical-disabled \
 	test-mir-autologin \
 	test-mir-greeter \
 	test-mir-session \
 	test-mir-session-crash \
 	test-mir-session-compositor-crash \
-	test-mir-container-session \
 	test-unity-compositor-command \
 	test-unity-compositor-not-found \
 	test-unity-compositor-fail-start \
@@ -197,17 +183,14 @@
 	test-unity-login \
 	test-unity-switch \
 	test-unity-plymouth \
-	test-unity-script-hooks \
 	test-unity-mir-autologin \
 	test-unity-mir-greeter-x-session \
 	test-unity-mir-greeter-mir-session \
 	test-unity-mir-lock-seat \
 	test-unity-mir-session-x-greeter \
-	test-unity-mir-script-hooks \
 	test-unity-xdg-seat \
 	test-surfaceflinger-autologin
 
-#	test-mir-script-hooks \
 #	test-session-exit-error
 #	test-greeter-no-exit
 #   test-gobject-change-password
@@ -336,7 +319,6 @@
 	data/sessions/alternative.desktop \
 	data/sessions/default.desktop \
 	data/sessions/mir.desktop \
-	data/sessions/mir-container.desktop \
 	data/sessions/named.desktop \
 	data/sessions/surfaceflinger.desktop \
 	scripts/0-additional.conf \
@@ -355,7 +337,6 @@
 	scripts/autologin-in-background.conf \
 	scripts/autologin-invalid-greeter.conf \
 	scripts/autologin-pam.conf \
-	scripts/autologin-pam-config.conf \
 	scripts/autologin-timeout-in-background.conf \
 	scripts/autologin-invalid-session.conf \
 	scripts/autologin-invalid-user.conf \
@@ -427,7 +408,6 @@
 	scripts/login-new-authtok.conf \
 	scripts/login-no-password.conf \
 	scripts/login-pam.conf \
-	scripts/login-pam-config.conf \
 	scripts/login-pick-session.conf \
 	scripts/login-previous-session.conf \
 	scripts/login-remember-session.conf \
@@ -437,20 +417,11 @@
 	scripts/login-wrong-password.conf \
 	scripts/login-xserver-crash.conf \
 	scripts/mir-autologin.conf \
-	scripts/mir-container-session.conf \
 	scripts/mir-greeter.conf \
-	scripts/mir-script-hooks.conf \
 	scripts/mir-session.conf \
 	scripts/mir-session-compositor-crash.conf \
 	scripts/mir-session-crash.conf \
 	scripts/multi-seat.conf \
-	scripts/multi-seat-change-graphical.conf \
-	scripts/multi-seat-change-graphical-disabled.conf \
-	scripts/multi-seat-legacy.conf \
-	scripts/multi-seat-non-graphical.conf \
-	scripts/multi-seat-non-graphical-disabled.conf \
-	scripts/multi-seat-seat0-non-graphical.conf \
-	scripts/multi-seat-seat0-non-graphical-disabled.conf \
 	scripts/no-accounts-service.conf \
 	scripts/no-config.conf \
 	scripts/no-console-kit.conf \
@@ -482,17 +453,14 @@
 	scripts/session-stderr-backup.conf \
 	scripts/surfaceflinger-autologin.conf \
 	scripts/switch-to-greeter.conf \
-	scripts/switch-to-greeter-disabled.conf \
 	scripts/switch-to-greeter-new-session.conf \
 	scripts/switch-to-greeter-return-session.conf \
 	scripts/switch-to-greeter-return-session-logout.conf \
 	scripts/switch-to-greeter-return-session-pam.conf \
 	scripts/switch-to-guest.conf \
-	scripts/switch-to-guest-disabled.conf \
 	scripts/switch-to-user.conf \
 	scripts/switch-to-users.conf \
 	scripts/switch-to-user-active.conf \
-	scripts/switch-to-user-disabled.conf \
 	scripts/switch-to-user-existing.conf \
 	scripts/switch-to-user-existing-no-password.conf \
 	scripts/switch-to-user-logout-active.conf \
@@ -513,10 +481,8 @@
 	scripts/unity-mir-greeter-mir-session.conf \
 	scripts/unity-mir-lock-seat.conf \
 	scripts/unity-mir-greeter-x-session.conf \
-	scripts/unity-mir-script-hooks.conf \
 	scripts/unity-mir-session-x-greeter.conf \
 	scripts/unity-plymouth.conf \
-	scripts/unity-script-hooks.conf \
 	scripts/unity-switch.conf \
 	scripts/unity-xdg-seat.conf \
 	scripts/upstart-autologin.conf \
@@ -531,7 +497,6 @@
 	scripts/user-renamed.conf \
 	scripts/user-renamed-invalid.conf \
 	scripts/user-session.conf \
-	scripts/user-uid.conf \
 	scripts/utmp-autologin.conf \
 	scripts/utmp-login.conf \
 	scripts/utmp-wrong-password.conf \
diff -Naur lightdm-1.10.2.orig/tests/Makefile.in lightdm-1.10.1/tests/Makefile.in
--- lightdm-1.10.2.orig/tests/Makefile.in	2014-09-17 11:23:23.000000000 +0700
+++ lightdm-1.10.1/tests/Makefile.in	2014-04-28 04:53:59.000000000 +0700
@@ -575,8 +575,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
@@ -636,7 +634,6 @@
 top_srcdir = @top_srcdir@
 SUBDIRS = src
 
-#	test-mir-script-hooks \
 #	test-session-exit-error
 #	test-greeter-no-exit
 #   test-gobject-change-password
@@ -651,8 +648,7 @@
 	test-additional-config test-additional-config-priority \
 	test-additional-system-config \
 	test-additional-system-config-priority test-headless \
-	test-autologin test-autologin-pam test-autologin-pam-config \
-	test-autologin-in-background \
+	test-autologin test-autologin-pam test-autologin-in-background \
 	test-autologin-guest-in-background \
 	test-autologin-timeout-in-background \
 	test-autologin-invalid-user test-autologin-invalid-greeter \
@@ -662,12 +658,11 @@
 	test-autologin-gobject-timeout \
 	test-autologin-gobject-guest-timeout \
 	test-change-authentication test-restart-authentication \
-	test-gobject-cancel-authentication test-login-pam \
-	test-login-pam-config test-denied test-expired test-cred-error \
-	test-cred-expired test-cred-unavail \
-	test-autologin-session-error test-autologin-logout \
-	test-autologin-previous-session test-autologin-guest \
-	test-autologin-guest-session-config \
+	test-gobject-cancel-authentication test-login-pam test-denied \
+	test-expired test-cred-error test-cred-expired \
+	test-cred-unavail test-autologin-session-error \
+	test-autologin-logout test-autologin-previous-session \
+	test-autologin-guest test-autologin-guest-session-config \
 	test-autologin-guest-fail-setup-script \
 	test-autologin-guest-logout test-guest-wrapper \
 	test-login-guest-session-config test-group-membership \
@@ -676,9 +671,9 @@
 	test-session-stderr-multi-write test-session-stderr-backup \
 	test-xauthority test-corrupt-xauthority test-system-xauthority \
 	test-user-renamed test-user-renamed-invalid test-user-name \
-	test-user-uid test-user-image test-user-background \
-	test-user-layout test-user-has-messages test-user-session \
-	test-user-logged-in test-users-gobject test-language \
+	test-user-image test-user-background test-user-layout \
+	test-user-has-messages test-user-session test-user-logged-in \
+	test-users-gobject test-language \
 	test-language-no-accounts-service \
 	test-login-crash-authenticate test-login-invalid-greeter \
 	test-login-gobject test-login-gobject-manual \
@@ -721,13 +716,11 @@
 	test-lock-session-no-password test-lock-session-return-session \
 	test-lock-seat-console-kit \
 	test-lock-seat-return-session-console-kit \
-	test-switch-to-greeter test-switch-to-greeter-disabled \
-	test-switch-to-greeter-new-session \
+	test-switch-to-greeter test-switch-to-greeter-new-session \
 	test-switch-to-greeter-return-session \
 	test-switch-to-greeter-return-session-pam \
 	test-switch-to-greeter-return-session-logout \
-	test-switch-to-guest test-switch-to-guest-disabled \
-	test-switch-to-user test-switch-to-user-disabled \
+	test-switch-to-guest test-switch-to-user \
 	test-switch-to-user-no-password test-switch-to-user-active \
 	test-switch-to-user-existing \
 	test-switch-to-user-existing-no-password \
@@ -742,14 +735,8 @@
 	test-gobject-power-no-console-kit test-gobject-power-no-login1 \
 	test-gobject-power-no-services test-open-file-descriptors \
 	test-xdmcp-server-open-file-descriptors test-multi-seat \
-	test-multi-seat-legacy test-multi-seat-seat0-non-graphical \
-	test-multi-seat-seat0-non-graphical-disabled \
-	test-multi-seat-non-graphical \
-	test-multi-seat-non-graphical-disabled \
-	test-multi-seat-change-graphical \
-	test-multi-seat-change-graphical-disabled test-mir-autologin \
-	test-mir-greeter test-mir-session test-mir-session-crash \
-	test-mir-session-compositor-crash test-mir-container-session \
+	test-mir-autologin test-mir-greeter test-mir-session \
+	test-mir-session-crash test-mir-session-compositor-crash \
 	test-unity-compositor-command test-unity-compositor-not-found \
 	test-unity-compositor-fail-start \
 	test-unity-compositor-fail-ready test-unity-compositor-crash \
@@ -757,11 +744,10 @@
 	test-unity-compositor-next-session \
 	test-unity-compositor-mir-next-session test-unity-autologin \
 	test-unity-login test-unity-switch test-unity-plymouth \
-	test-unity-script-hooks test-unity-mir-autologin \
-	test-unity-mir-greeter-x-session \
+	test-unity-mir-autologin test-unity-mir-greeter-x-session \
 	test-unity-mir-greeter-mir-session test-unity-mir-lock-seat \
-	test-unity-mir-session-x-greeter test-unity-mir-script-hooks \
-	test-unity-xdg-seat test-surfaceflinger-autologin \
+	test-unity-mir-session-x-greeter test-unity-xdg-seat \
+	test-surfaceflinger-autologin \
 	test-python-cancel-authentication test-users-python \
 	test-login-python test-login-python-manual \
 	test-login-python-manual-previous-session \
@@ -798,7 +784,6 @@
 	data/sessions/alternative.desktop \
 	data/sessions/default.desktop \
 	data/sessions/mir.desktop \
-	data/sessions/mir-container.desktop \
 	data/sessions/named.desktop \
 	data/sessions/surfaceflinger.desktop \
 	scripts/0-additional.conf \
@@ -817,7 +802,6 @@
 	scripts/autologin-in-background.conf \
 	scripts/autologin-invalid-greeter.conf \
 	scripts/autologin-pam.conf \
-	scripts/autologin-pam-config.conf \
 	scripts/autologin-timeout-in-background.conf \
 	scripts/autologin-invalid-session.conf \
 	scripts/autologin-invalid-user.conf \
@@ -889,7 +873,6 @@
 	scripts/login-new-authtok.conf \
 	scripts/login-no-password.conf \
 	scripts/login-pam.conf \
-	scripts/login-pam-config.conf \
 	scripts/login-pick-session.conf \
 	scripts/login-previous-session.conf \
 	scripts/login-remember-session.conf \
@@ -899,20 +882,11 @@
 	scripts/login-wrong-password.conf \
 	scripts/login-xserver-crash.conf \
 	scripts/mir-autologin.conf \
-	scripts/mir-container-session.conf \
 	scripts/mir-greeter.conf \
-	scripts/mir-script-hooks.conf \
 	scripts/mir-session.conf \
 	scripts/mir-session-compositor-crash.conf \
 	scripts/mir-session-crash.conf \
 	scripts/multi-seat.conf \
-	scripts/multi-seat-change-graphical.conf \
-	scripts/multi-seat-change-graphical-disabled.conf \
-	scripts/multi-seat-legacy.conf \
-	scripts/multi-seat-non-graphical.conf \
-	scripts/multi-seat-non-graphical-disabled.conf \
-	scripts/multi-seat-seat0-non-graphical.conf \
-	scripts/multi-seat-seat0-non-graphical-disabled.conf \
 	scripts/no-accounts-service.conf \
 	scripts/no-config.conf \
 	scripts/no-console-kit.conf \
@@ -944,17 +918,14 @@
 	scripts/session-stderr-backup.conf \
 	scripts/surfaceflinger-autologin.conf \
 	scripts/switch-to-greeter.conf \
-	scripts/switch-to-greeter-disabled.conf \
 	scripts/switch-to-greeter-new-session.conf \
 	scripts/switch-to-greeter-return-session.conf \
 	scripts/switch-to-greeter-return-session-logout.conf \
 	scripts/switch-to-greeter-return-session-pam.conf \
 	scripts/switch-to-guest.conf \
-	scripts/switch-to-guest-disabled.conf \
 	scripts/switch-to-user.conf \
 	scripts/switch-to-users.conf \
 	scripts/switch-to-user-active.conf \
-	scripts/switch-to-user-disabled.conf \
 	scripts/switch-to-user-existing.conf \
 	scripts/switch-to-user-existing-no-password.conf \
 	scripts/switch-to-user-logout-active.conf \
@@ -975,10 +946,8 @@
 	scripts/unity-mir-greeter-mir-session.conf \
 	scripts/unity-mir-lock-seat.conf \
 	scripts/unity-mir-greeter-x-session.conf \
-	scripts/unity-mir-script-hooks.conf \
 	scripts/unity-mir-session-x-greeter.conf \
 	scripts/unity-plymouth.conf \
-	scripts/unity-script-hooks.conf \
 	scripts/unity-switch.conf \
 	scripts/unity-xdg-seat.conf \
 	scripts/upstart-autologin.conf \
@@ -993,7 +962,6 @@
 	scripts/user-renamed.conf \
 	scripts/user-renamed-invalid.conf \
 	scripts/user-session.conf \
-	scripts/user-uid.conf \
 	scripts/utmp-autologin.conf \
 	scripts/utmp-login.conf \
 	scripts/utmp-wrong-password.conf \
@@ -1424,13 +1392,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-autologin-pam-config.log: test-autologin-pam-config
-	@p='test-autologin-pam-config'; \
-	b='test-autologin-pam-config'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-autologin-in-background.log: test-autologin-in-background
 	@p='test-autologin-in-background'; \
 	b='test-autologin-in-background'; \
@@ -1550,13 +1511,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-login-pam-config.log: test-login-pam-config
-	@p='test-login-pam-config'; \
-	b='test-login-pam-config'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-denied.log: test-denied
 	@p='test-denied'; \
 	b='test-denied'; \
@@ -1753,13 +1707,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-user-uid.log: test-user-uid
-	@p='test-user-uid'; \
-	b='test-user-uid'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-user-image.log: test-user-image
 	@p='test-user-image'; \
 	b='test-user-image'; \
@@ -2229,13 +2176,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-switch-to-greeter-disabled.log: test-switch-to-greeter-disabled
-	@p='test-switch-to-greeter-disabled'; \
-	b='test-switch-to-greeter-disabled'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-switch-to-greeter-new-session.log: test-switch-to-greeter-new-session
 	@p='test-switch-to-greeter-new-session'; \
 	b='test-switch-to-greeter-new-session'; \
@@ -2271,13 +2211,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-switch-to-guest-disabled.log: test-switch-to-guest-disabled
-	@p='test-switch-to-guest-disabled'; \
-	b='test-switch-to-guest-disabled'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-switch-to-user.log: test-switch-to-user
 	@p='test-switch-to-user'; \
 	b='test-switch-to-user'; \
@@ -2285,13 +2218,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-switch-to-user-disabled.log: test-switch-to-user-disabled
-	@p='test-switch-to-user-disabled'; \
-	b='test-switch-to-user-disabled'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-switch-to-user-no-password.log: test-switch-to-user-no-password
 	@p='test-switch-to-user-no-password'; \
 	b='test-switch-to-user-no-password'; \
@@ -2488,55 +2414,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-legacy.log: test-multi-seat-legacy
-	@p='test-multi-seat-legacy'; \
-	b='test-multi-seat-legacy'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-seat0-non-graphical.log: test-multi-seat-seat0-non-graphical
-	@p='test-multi-seat-seat0-non-graphical'; \
-	b='test-multi-seat-seat0-non-graphical'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-seat0-non-graphical-disabled.log: test-multi-seat-seat0-non-graphical-disabled
-	@p='test-multi-seat-seat0-non-graphical-disabled'; \
-	b='test-multi-seat-seat0-non-graphical-disabled'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-non-graphical.log: test-multi-seat-non-graphical
-	@p='test-multi-seat-non-graphical'; \
-	b='test-multi-seat-non-graphical'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-non-graphical-disabled.log: test-multi-seat-non-graphical-disabled
-	@p='test-multi-seat-non-graphical-disabled'; \
-	b='test-multi-seat-non-graphical-disabled'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-change-graphical.log: test-multi-seat-change-graphical
-	@p='test-multi-seat-change-graphical'; \
-	b='test-multi-seat-change-graphical'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-multi-seat-change-graphical-disabled.log: test-multi-seat-change-graphical-disabled
-	@p='test-multi-seat-change-graphical-disabled'; \
-	b='test-multi-seat-change-graphical-disabled'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-mir-autologin.log: test-mir-autologin
 	@p='test-mir-autologin'; \
 	b='test-mir-autologin'; \
@@ -2572,13 +2449,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-mir-container-session.log: test-mir-container-session
-	@p='test-mir-container-session'; \
-	b='test-mir-container-session'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-unity-compositor-command.log: test-unity-compositor-command
 	@p='test-unity-compositor-command'; \
 	b='test-unity-compositor-command'; \
@@ -2663,13 +2533,6 @@
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-unity-script-hooks.log: test-unity-script-hooks
-	@p='test-unity-script-hooks'; \
-	b='test-unity-script-hooks'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-unity-mir-autologin.log: test-unity-mir-autologin
 	@p='test-unity-mir-autologin'; \
 	b='test-unity-mir-autologin'; \
@@ -2704,13 +2567,6 @@
 	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
-	"$$tst" $(AM_TESTS_FD_REDIRECT)
-test-unity-mir-script-hooks.log: test-unity-mir-script-hooks
-	@p='test-unity-mir-script-hooks'; \
-	b='test-unity-mir-script-hooks'; \
-	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
-	--log-file $$b.log --trs-file $$b.trs \
-	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
 test-unity-xdg-seat.log: test-unity-xdg-seat
 	@p='test-unity-xdg-seat'; \
diff -Naur lightdm-1.10.2.orig/tests/scripts/autologin-guest-timeout.conf lightdm-1.10.1/tests/scripts/autologin-guest-timeout.conf
--- lightdm-1.10.2.orig/tests/scripts/autologin-guest-timeout.conf	2014-09-08 07:24:34.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/autologin-guest-timeout.conf	2014-04-14 04:30:10.000000000 +0700
@@ -4,7 +4,7 @@
 
 [SeatDefaults]
 autologin-guest=true
-autologin-user-timeout=99
+autologin-user-timeout=1
 user-session=default
 
 #?*START-DAEMON
@@ -26,8 +26,8 @@
 #?GREETER-X-0 CONNECT-TO-DAEMON
 #?GREETER-X-0 CONNECTED-TO-DAEMON
 
-# Greeter is requested to timeout
-#?GREETER-X-0 AUTOLOGIN-GUEST TIMEOUT=99
+# Autologin timer expires
+#?GREETER-X-0 AUTOLOGIN-TIMER-EXPIRED
 
 # Trigger autologin
 #?*GREETER-X-0 AUTHENTICATE-AUTOLOGIN
diff -Naur lightdm-1.10.2.orig/tests/scripts/autologin-pam-config.conf lightdm-1.10.1/tests/scripts/autologin-pam-config.conf
--- lightdm-1.10.2.orig/tests/scripts/autologin-pam-config.conf	2014-09-08 07:15:25.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/autologin-pam-config.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,44 +0,0 @@
-#
-# Check we can configure the PAM service for automatic login
-#
-
-[SeatDefaults]
-autologin-user=no-password1
-user-session=default
-pam-autologin-service=lightdm-autologin-alternative
-
-[test-pam]
-log-events=true
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Session authenticates
-#?PAM-no-password1 START SERVICE=lightdm-autologin-alternative USER=no-password1
-#?PAM-no-password1 AUTHENTICATE
-#?PAM-no-password1 ACCT-MGMT
-#?PAM-no-password1 SETCRED ESTABLISH_CRED
-#?PAM-no-password1 OPEN-SESSION
-
-# Session starts
-#?SESSION-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/no-password1 DESKTOP_SESSION=default USER=no-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?SESSION-X-0 CONNECT-XSERVER
-
-# Cleanup
-#?*STOP-DAEMON
-#?SESSION-X-0 TERMINATE SIGNAL=15
-#?PAM-no-password1 CLOSE-SESSION
-#?PAM-no-password1 SETCRED DELETE_CRED
-#?PAM-no-password1 END
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/autologin-timeout.conf lightdm-1.10.1/tests/scripts/autologin-timeout.conf
--- lightdm-1.10.2.orig/tests/scripts/autologin-timeout.conf	2014-09-08 07:24:34.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/autologin-timeout.conf	2014-04-14 04:30:10.000000000 +0700
@@ -4,7 +4,7 @@
 
 [SeatDefaults]
 autologin-user=have-password1
-autologin-user-timeout=99
+autologin-user-timeout=1
 user-session=default
 
 #?*START-DAEMON
@@ -26,8 +26,8 @@
 #?GREETER-X-0 CONNECT-TO-DAEMON
 #?GREETER-X-0 CONNECTED-TO-DAEMON
 
-# Greeter is requested to timeout
-#?GREETER-X-0 AUTOLOGIN-USER USERNAME=have-password1 TIMEOUT=99
+# Autologin timer expires
+#?GREETER-X-0 AUTOLOGIN-TIMER-EXPIRED
 
 # Trigger autologin
 #?*GREETER-X-0 AUTHENTICATE-AUTOLOGIN
diff -Naur lightdm-1.10.2.orig/tests/scripts/autologin-timeout-in-background.conf lightdm-1.10.1/tests/scripts/autologin-timeout-in-background.conf
--- lightdm-1.10.2.orig/tests/scripts/autologin-timeout-in-background.conf	2014-09-08 07:24:34.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/autologin-timeout-in-background.conf	2014-04-14 04:30:10.000000000 +0700
@@ -4,7 +4,7 @@
 
 [SeatDefaults]
 autologin-user=have-password1
-autologin-user-timeout=99
+autologin-user-timeout=1
 autologin-in-background=true
 user-session=default
 
@@ -33,8 +33,8 @@
 #?XSERVER-1 ACCEPT-CONNECT
 #?SESSION-X-1 CONNECT-XSERVER
 
-# Greeter is requested to timeout
-#?GREETER-X-0 AUTOLOGIN-USER USERNAME=have-password1 TIMEOUT=99
+# Autologin timer expires
+#?GREETER-X-0 AUTOLOGIN-TIMER-EXPIRED
 
 # Trigger autologin
 #?*GREETER-X-0 AUTHENTICATE-AUTOLOGIN
diff -Naur lightdm-1.10.2.orig/tests/scripts/lock-seat.conf lightdm-1.10.1/tests/scripts/lock-seat.conf
--- lightdm-1.10.2.orig/tests/scripts/lock-seat.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/lock-seat.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/lock-seat-return-session.conf lightdm-1.10.1/tests/scripts/lock-seat-return-session.conf
--- lightdm-1.10.2.orig/tests/scripts/lock-seat-return-session.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/lock-seat-return-session.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
@@ -58,7 +58,7 @@
 #?*GREETER-X-1 START-SESSION
 
 # Old session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # Return to session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/lock-session.conf lightdm-1.10.1/tests/scripts/lock-session.conf
--- lightdm-1.10.2.orig/tests/scripts/lock-session.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/lock-session.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts with session user selected
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/lock-session-no-password.conf lightdm-1.10.1/tests/scripts/lock-session-no-password.conf
--- lightdm-1.10.2.orig/tests/scripts/lock-session-no-password.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/lock-session-no-password.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts with session user selected
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/lock-session-return-session.conf lightdm-1.10.1/tests/scripts/lock-session-return-session.conf
--- lightdm-1.10.2.orig/tests/scripts/lock-session-return-session.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/lock-session-return-session.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts with session user selected
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
@@ -59,7 +59,7 @@
 #?*GREETER-X-1 START-SESSION
 
 # Existing session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # Return to session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/login-pam-config.conf lightdm-1.10.1/tests/scripts/login-pam-config.conf
--- lightdm-1.10.2.orig/tests/scripts/login-pam-config.conf	2014-09-08 07:15:47.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/login-pam-config.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,70 +0,0 @@
-#
-# Check we can configure the PAM service for login
-#
-
-[SeatDefaults]
-user-session=default
-pam-service=lightdm-alternative
-pam-greeter-service=lightdm-greeter-alternative
-
-[test-pam]
-log-events=true
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Create PAM session for greeter
-#?PAM-lightdm START SERVICE=lightdm-greeter-alternative USER=lightdm
-#?PAM-lightdm SETCRED ESTABLISH_CRED
-#?PAM-lightdm OPEN-SESSION
-
-# Greeter starts
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Greeter does authentication via PAM
-#?*GREETER-X-0 AUTHENTICATE USERNAME=have-password1
-#?PAM-have-password1 START SERVICE=lightdm-alternative USER=have-password1
-#?PAM-have-password1 AUTHENTICATE
-#?GREETER-X-0 SHOW-PROMPT TEXT="Password:"
-#?*GREETER-X-0 RESPOND TEXT="password"
-#?PAM-have-password1 ACCT-MGMT
-#?GREETER-X-0 AUTHENTICATION-COMPLETE USERNAME=have-password1 AUTHENTICATED=TRUE
-
-# User session starts
-#?*GREETER-X-0 START-SESSION
-#?PAM-have-password1 SETCRED ESTABLISH_CRED
-#?PAM-have-password1 OPEN-SESSION
-
-# Greeter session stops
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?PAM-lightdm CLOSE-SESSION
-#?PAM-lightdm SETCRED DELETE_CRED
-#?PAM-lightdm END
-
-# Session starts
-#?SESSION-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/have-password1 DESKTOP_SESSION=default USER=have-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?XSERVER-0 ACCEPT-CONNECT
-#?SESSION-X-0 CONNECT-XSERVER
-
-# Cleanup
-#?*STOP-DAEMON
-#?SESSION-X-0 TERMINATE SIGNAL=15
-#?PAM-have-password1 CLOSE-SESSION
-#?PAM-have-password1 SETCRED DELETE_CRED
-#?PAM-have-password1 END
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/mir-container-session.conf lightdm-1.10.1/tests/scripts/mir-container-session.conf
--- lightdm-1.10.2.orig/tests/scripts/mir-container-session.conf	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/mir-container-session.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,54 +0,0 @@
-#
-# Check can login into a containerised Mir session on a VT based seat
-#
-
-[SeatDefaults]
-user-session=mir-container
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Greeter starts
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Attempt to log into account
-#?*GREETER-X-0 AUTHENTICATE USERNAME=no-password1
-#?GREETER-X-0 AUTHENTICATION-COMPLETE USERNAME=no-password1 AUTHENTICATED=TRUE
-#?*GREETER-X-0 START-SESSION
-
-# System compositor starts
-#?UNITY-SYSTEM-COMPOSITOR START FILE=/tmp/lightdm-mir-0 VT=8 ENABLE-HARDWARE-CURSOR=TRUE XDG_VTNR=8 CONTAINER=TRUE
-#?*UNITY-SYSTEM-COMPOSITOR READY
-
-# Switch to system compositor
-#?VT ACTIVATE VT=8
-
-# Greeter terminates
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-
-# Session starts
-#?SESSION-MIR-session-0 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password1 DESKTOP_SESSION=mir-container USER=no-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-
-# Session shown
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=session-0
-
-# Cleanup
-#?*STOP-DAEMON
-#?SESSION-MIR-session-0 TERMINATE SIGNAL=15
-#?UNITY-SYSTEM-COMPOSITOR TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/mir-script-hooks.conf lightdm-1.10.1/tests/scripts/mir-script-hooks.conf
--- lightdm-1.10.2.orig/tests/scripts/mir-script-hooks.conf	2014-09-16 10:33:29.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/mir-script-hooks.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,71 +0,0 @@
-#
-# Check LightDM runs the script hooks correctly for autologin and the greeter
-#
-
-[SeatDefaults]
-display-setup-script=test-script-hook DISPLAY-SETUP
-display-stopped-script=test-script-hook DISPLAY-STOPPED
-greeter-setup-script=test-script-hook GREETER-SETUP
-session-setup-script=test-script-hook SESSION-SETUP
-session-cleanup-script=test-script-hook SESSION-CLEANUP
-autologin-user=have-password1
-user-session=mir
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# System compositor starts
-#?UNITY-SYSTEM-COMPOSITOR START FILE=/tmp/lightdm-mir-0 VT=7 ENABLE-HARDWARE-CURSOR=TRUE XDG_VTNR=7
-#?*UNITY-SYSTEM-COMPOSITOR READY
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-SETUP
-#?SCRIPT-HOOK SESSION-SETUP USER=have-password1
-
-# Session starts
-#?SESSION-MIR-session-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/have-password1 DESKTOP_SESSION=mir USER=have-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-
-# Session shown
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=session-0
-
-# Logout session
-#?*SESSION-MIR-session-0 LOGOUT
-
-# Script hooks runs
-#?SCRIPT-HOOK SESSION-CLEANUP USER=have-password1
-
-# System compositor stops
-#?UNITY-SYSTEM-COMPOSITOR TERMINATE SIGNAL=15
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-STOPPED
-
-# System compositor starts
-#?UNITY-SYSTEM-COMPOSITOR START FILE=/tmp/lightdm-mir-0 VT=7 ENABLE-HARDWARE-CURSOR=TRUE XDG_VTNR=7
-#?*UNITY-SYSTEM-COMPOSITOR READY
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-SETUP
-#?SCRIPT-HOOK GREETER-SETUP USER=.*
-
-# Greeter starts
-#?GREETER-MIR-greeter-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?GREETER-MIR-greeter-0 CONNECT-TO-DAEMON
-# FIXME: Not occurring?
-#?GREETER-MIR-greeter-0 CONNECTED-TO-DAEMON
-
-# System compositor switches to greeter
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=greeter-0
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-MIR-greeter-0 TERMINATE SIGNAL=15
-#?UNITY-SYSTEM-COMPOSITOR TERMINATE SIGNAL=15
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-STOPPED
-
-# Finish cleanup
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-change-graphical.conf lightdm-1.10.1/tests/scripts/multi-seat-change-graphical.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-change-graphical.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-change-graphical.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,67 +0,0 @@
-#
-# Check seat can change graphical status
-#
-
-[LightDM]
-logind-load-seats=true
-logind-check-graphical=true
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Add seat1
-#?*ADD-SEAT ID=seat1
-
-# seat1 starts
-#?XSERVER-1 START SEAT=seat1 SHAREVTS=TRUE
-#?*XSERVER-1 INDICATE-READY
-#?XSERVER-1 INDICATE-READY
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 START XDG_SEAT=seat1 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 CONNECT-XSERVER
-#?GREETER-X-1 CONNECT-TO-DAEMON
-#?GREETER-X-1 CONNECTED-TO-DAEMON
-
-# Remove graphical status from seat
-#?*UPDATE-SEAT ID=seat1 CAN-GRAPHICAL=FALSE
-
-# seat1 stops
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-
-# Add graphical status back
-#?*UPDATE-SEAT ID=seat1 CAN-GRAPHICAL=TRUE
-
-# seat1 starts
-#?XSERVER-1 START SEAT=seat1 SHAREVTS=TRUE
-#?*XSERVER-1 INDICATE-READY
-#?XSERVER-1 INDICATE-READY
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 START XDG_SEAT=seat1 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c2
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 CONNECT-XSERVER
-#?GREETER-X-1 CONNECT-TO-DAEMON
-#?GREETER-X-1 CONNECTED-TO-DAEMON
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-change-graphical-disabled.conf lightdm-1.10.1/tests/scripts/multi-seat-change-graphical-disabled.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-change-graphical-disabled.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-change-graphical-disabled.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,56 +0,0 @@
-#
-# Check seat graphical status is ignored
-#
-
-[LightDM]
-logind-load-seats=true
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Add seat1
-#?*ADD-SEAT ID=seat1
-
-# seat1 starts
-#?XSERVER-1 START SEAT=seat1 SHAREVTS=TRUE
-#?*XSERVER-1 INDICATE-READY
-#?XSERVER-1 INDICATE-READY
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 START XDG_SEAT=seat1 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 CONNECT-XSERVER
-#?GREETER-X-1 CONNECT-TO-DAEMON
-#?GREETER-X-1 CONNECTED-TO-DAEMON
-
-# Remove graphical status from seat
-#?*UPDATE-SEAT ID=seat1 CAN-GRAPHICAL=FALSE
-
-# Nothing happens
-#?*WAIT
-
-# Add graphical status back
-#?*UPDATE-SEAT ID=seat1 CAN-GRAPHICAL=TRUE
-
-# Nothing happens
-#?*WAIT
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat.conf lightdm-1.10.1/tests/scripts/multi-seat.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat.conf	2014-04-08 11:30:25.000000000 +0700
@@ -1,14 +1,17 @@
 #
-# Check can run two seats at once (added from logind)
+# Check can run two seats at once
 #
 
-[LightDM]
-logind-load-seats=true
+[Seat:0]
+xdg-seat=seat0
+
+[Seat:1]
+xdg-seat=seat1
 
 #?*START-DAEMON
 #?RUNNER DAEMON-START
 
-# seat0 starts
+# Seat0 starts
 #?XSERVER-0 START VT=7 SEAT=seat0
 #?*XSERVER-0 INDICATE-READY
 #?XSERVER-0 INDICATE-READY
@@ -20,11 +23,8 @@
 #?GREETER-X-0 CONNECT-TO-DAEMON
 #?GREETER-X-0 CONNECTED-TO-DAEMON
 
-# Add seat1
-#?*ADD-SEAT ID=seat1
-
-# seat1 starts
-#?XSERVER-1 START SEAT=seat1 SHAREVTS=TRUE
+# Seat1 starts (can't use VTs)
+#?XSERVER-1 START SEAT=seat1
 #?*XSERVER-1 INDICATE-READY
 #?XSERVER-1 INDICATE-READY
 #?XSERVER-1 ACCEPT-CONNECT
@@ -35,15 +35,10 @@
 #?GREETER-X-1 CONNECT-TO-DAEMON
 #?GREETER-X-1 CONNECTED-TO-DAEMON
 
-# Remove seat1
-#?*REMOVE-SEAT ID=seat1
-
-# seat1 stops
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-
 # Cleanup
 #?*STOP-DAEMON
 #?GREETER-X-0 TERMINATE SIGNAL=15
+#?GREETER-X-1 TERMINATE SIGNAL=15
 #?XSERVER-0 TERMINATE SIGNAL=15
+#?XSERVER-1 TERMINATE SIGNAL=15
 #?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-legacy.conf lightdm-1.10.1/tests/scripts/multi-seat-legacy.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-legacy.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-legacy.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,44 +0,0 @@
-#
-# Check can run two seats at once (legacy method before logind support was added)
-#
-
-[Seat:0]
-xdg-seat=seat0
-
-[Seat:1]
-xdg-seat=seat1
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# Seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Seat1 starts (can't use VTs)
-#?XSERVER-1 START SEAT=seat1
-#?*XSERVER-1 INDICATE-READY
-#?XSERVER-1 INDICATE-READY
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 START XDG_SEAT=seat1 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 CONNECT-XSERVER
-#?GREETER-X-1 CONNECT-TO-DAEMON
-#?GREETER-X-1 CONNECTED-TO-DAEMON
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-non-graphical.conf lightdm-1.10.1/tests/scripts/multi-seat-non-graphical.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-non-graphical.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-non-graphical.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,34 +0,0 @@
-#
-# Check non graphical seats are ignored
-#
-
-[LightDM]
-logind-load-seats=true
-logind-check-graphical=true
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Add seat1
-#?*ADD-SEAT ID=seat1 CAN-GRAPHICAL=FALSE
-
-# Check no seat is added
-#?*WAIT
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-non-graphical-disabled.conf lightdm-1.10.1/tests/scripts/multi-seat-non-graphical-disabled.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-non-graphical-disabled.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-non-graphical-disabled.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,44 +0,0 @@
-#
-# Check non graphical seats are started anyway
-#
-
-[LightDM]
-logind-load-seats=true
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Add seat1
-#?*ADD-SEAT ID=seat1 CAN-GRAPHICAL=FALSE
-
-# seat1 starts
-#?XSERVER-1 START SEAT=seat1 SHAREVTS=TRUE
-#?*XSERVER-1 INDICATE-READY
-#?XSERVER-1 INDICATE-READY
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 START XDG_SEAT=seat1 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 CONNECT-XSERVER
-#?GREETER-X-1 CONNECT-TO-DAEMON
-#?GREETER-X-1 CONNECTED-TO-DAEMON
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-seat0-non-graphical.conf lightdm-1.10.1/tests/scripts/multi-seat-seat0-non-graphical.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-seat0-non-graphical.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-seat0-non-graphical.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,37 +0,0 @@
-#
-# Check seat0 is started only once it becomes graphical
-#
-
-[LightDM]
-logind-load-seats=true
-logind-check-graphical=true
-
-[test-runner-config]
-seat0-can-graphical=false
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# Check no seat is added
-#?*WAIT
-
-# Go graphical
-#?*UPDATE-SEAT ID=seat0 CAN-GRAPHICAL=TRUE
-
-# seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/multi-seat-seat0-non-graphical-disabled.conf lightdm-1.10.1/tests/scripts/multi-seat-seat0-non-graphical-disabled.conf
--- lightdm-1.10.2.orig/tests/scripts/multi-seat-seat0-non-graphical-disabled.conf	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/multi-seat-seat0-non-graphical-disabled.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,30 +0,0 @@
-#
-# Check seat0 is started even if it is marked as non-graphical
-#
-
-[LightDM]
-logind-load-seats=true
-
-[test-runner-config]
-seat0-can-graphical=false
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# seat0 starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-greeter.conf lightdm-1.10.1/tests/scripts/switch-to-greeter.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-greeter.conf	2014-09-08 06:49:04.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-greeter.conf	2014-04-14 04:30:10.000000000 +0700
@@ -23,10 +23,6 @@
 #?XSERVER-0 ACCEPT-CONNECT
 #?SESSION-X-0 CONNECT-XSERVER
 
-# Check daemon says we can switch
-#?*SEAT-CAN-SWITCH
-#?RUNNER SEAT-CAN-SWITCH CAN-SWITCH=TRUE
-
 # Show the greeter
 #?*SWITCH-TO-GREETER
 #?RUNNER SWITCH-TO-GREETER
@@ -40,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-disabled.conf lightdm-1.10.1/tests/scripts/switch-to-greeter-disabled.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-disabled.conf	2014-09-08 06:59:53.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-greeter-disabled.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,39 +0,0 @@
-#
-# Check can't switch to greeter when disabled
-#
-
-[SeatDefaults]
-autologin-user=have-password1
-user-session=default
-allow-user-switching=false
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Session starts
-#?SESSION-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/have-password1 DESKTOP_SESSION=default USER=have-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?SESSION-X-0 CONNECT-XSERVER
-
-# Check daemon says we can't switch
-#?*SEAT-CAN-SWITCH
-#?RUNNER SEAT-CAN-SWITCH CAN-SWITCH=FALSE
-
-# Attempt to show the greeter
-#?*SWITCH-TO-GREETER
-#?RUNNER SWITCH-TO-GREETER FAILED
-
-# Cleanup
-#?*STOP-DAEMON
-#?SESSION-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-new-session.conf lightdm-1.10.1/tests/scripts/switch-to-greeter-new-session.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-new-session.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-greeter-new-session.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-return-session.conf lightdm-1.10.1/tests/scripts/switch-to-greeter-return-session.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-return-session.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-greeter-return-session.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
@@ -57,7 +57,7 @@
 #?*GREETER-X-1 START-SESSION
 
 # Session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # Switch to session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-return-session-logout.conf lightdm-1.10.1/tests/scripts/switch-to-greeter-return-session-logout.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-return-session-logout.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-greeter-return-session-logout.conf	2014-04-14 04:30:10.000000000 +0700
@@ -36,7 +36,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
@@ -57,7 +57,7 @@
 #?*GREETER-X-1 START-SESSION
 
 # Session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # Switch to session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-return-session-pam.conf lightdm-1.10.1/tests/scripts/switch-to-greeter-return-session-pam.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-greeter-return-session-pam.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-greeter-return-session-pam.conf	2014-04-28 04:47:43.000000000 +0700
@@ -46,7 +46,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Create PAM session for greeter
 #?PAM-lightdm START SERVICE=lightdm-greeter USER=lightdm
@@ -79,7 +79,7 @@
 #?PAM-have-password1 END
 
 # Session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # Switch to session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-guest.conf lightdm-1.10.1/tests/scripts/switch-to-guest.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-guest.conf	2014-09-08 06:49:04.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-guest.conf	2014-04-14 04:30:10.000000000 +0700
@@ -24,14 +24,6 @@
 #?XSERVER-0 ACCEPT-CONNECT
 #?SESSION-X-0 CONNECT-XSERVER
 
-# Check daemon says we can switch
-#?*SEAT-CAN-SWITCH
-#?RUNNER SEAT-CAN-SWITCH CAN-SWITCH=TRUE
-
-# Check daemon says we have a guest account
-#?*SEAT-HAS-GUEST-ACCOUNT
-#?RUNNER SEAT-HAS-GUEST-ACCOUNT HAS-GUEST-ACCOUNT=TRUE
-
 # Switch to guest
 #?*SWITCH-TO-GUEST
 #?RUNNER SWITCH-TO-GUEST
@@ -45,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Guest account created
 #?GUEST-ACCOUNT ADD USERNAME=guest-.*
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-guest-disabled.conf lightdm-1.10.1/tests/scripts/switch-to-guest-disabled.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-guest-disabled.conf	2014-09-08 06:59:50.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-guest-disabled.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,44 +0,0 @@
-#
-# Check can't switch to guest when disabled
-#
-
-[SeatDefaults]
-autologin-user=have-password1
-user-session=default
-allow-user-switching=false
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-#?*WAIT
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Default session starts
-#?SESSION-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/have-password1 DESKTOP_SESSION=default USER=have-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?SESSION-X-0 CONNECT-XSERVER
-
-# Check daemon says we can't switch
-#?*SEAT-CAN-SWITCH
-#?RUNNER SEAT-CAN-SWITCH CAN-SWITCH=FALSE
-
-# Check daemon says we have a guest account
-#?*SEAT-HAS-GUEST-ACCOUNT
-#?RUNNER SEAT-HAS-GUEST-ACCOUNT HAS-GUEST-ACCOUNT=TRUE
-
-# Attempt to switch to guest
-#?*SWITCH-TO-GUEST
-#?RUNNER SWITCH-TO-GUEST FAILED
-
-# Cleanup
-#?*STOP-DAEMON
-#?SESSION-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user.conf lightdm-1.10.1/tests/scripts/switch-to-user.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user.conf	2014-09-08 06:49:04.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user.conf	2014-04-14 04:30:10.000000000 +0700
@@ -24,10 +24,6 @@
 #?XSERVER-0 ACCEPT-CONNECT
 #?SESSION-X-0 CONNECT-XSERVER
 
-# Check daemon says we can switch
-#?*SEAT-CAN-SWITCH
-#?RUNNER SEAT-CAN-SWITCH CAN-SWITCH=TRUE
-
 # Switch to an account with a password
 #?*SWITCH-TO-USER USERNAME=have-password1
 #?RUNNER SWITCH-TO-USER USERNAME=have-password1
@@ -41,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user-disabled.conf lightdm-1.10.1/tests/scripts/switch-to-user-disabled.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user-disabled.conf	2014-09-08 06:59:47.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user-disabled.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,40 +0,0 @@
-#
-# Check that can't switch to a user when switching disabled
-#
-
-[SeatDefaults]
-autologin-user=no-password1
-user-session=default
-allow-user-switching=false
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-#?*WAIT
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Session starts
-#?SESSION-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/no-password1 DESKTOP_SESSION=default USER=no-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?SESSION-X-0 CONNECT-XSERVER
-
-# Check daemon says we can't switch
-#?*SEAT-CAN-SWITCH
-#?RUNNER SEAT-CAN-SWITCH CAN-SWITCH=FALSE
-
-# Attempt to switch to an account
-#?*SWITCH-TO-USER USERNAME=have-password1
-#?RUNNER SWITCH-TO-USER USERNAME=have-password1 FAILED
-
-# Cleanup
-#?*STOP-DAEMON
-#?SESSION-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user-existing.conf lightdm-1.10.1/tests/scripts/switch-to-user-existing.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user-existing.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user-existing.conf	2014-04-14 04:30:10.000000000 +0700
@@ -37,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Old session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # New session starts
 #?SESSION-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password1 DESKTOP_SESSION=default USER=no-password1
@@ -61,7 +61,7 @@
 #?XSERVER-2 ACCEPT-CONNECT
 
 # New session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c1
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-2 START XDG_SEAT=seat0 XDG_VTNR=9 XDG_SESSION_CLASS=greeter
@@ -87,7 +87,7 @@
 #?XSERVER-2 TERMINATE SIGNAL=15
 
 # Old session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # Switch to first session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user-existing-no-password.conf lightdm-1.10.1/tests/scripts/switch-to-user-existing-no-password.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user-existing-no-password.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user-existing-no-password.conf	2014-04-14 04:30:10.000000000 +0700
@@ -37,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Old session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # New session starts
 #?SESSION-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password2 DESKTOP_SESSION=default USER=no-password2
@@ -53,10 +53,10 @@
 #?RUNNER SWITCH-TO-USER USERNAME=no-password1
 
 # Old session is unlocked
-#?LOGIN1 UNLOCK-SESSION SESSION=c0
+#?LOGIN1 UNLOCK-SESSION
 
 # New session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c1
+#?LOGIN1 LOCK-SESSION
 
 # Switch to first session
 #?LOGIN1 ACTIVATE-SESSION SESSION=c0
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user-logout-active.conf lightdm-1.10.1/tests/scripts/switch-to-user-logout-active.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user-logout-active.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user-logout-active.conf	2014-04-14 04:30:10.000000000 +0700
@@ -37,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Session starts
 #?SESSION-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password2 DESKTOP_SESSION=default USER=no-password2
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user-logout-inactive.conf lightdm-1.10.1/tests/scripts/switch-to-user-logout-inactive.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user-logout-inactive.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user-logout-inactive.conf	2014-04-14 04:30:10.000000000 +0700
@@ -37,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Session starts
 #?SESSION-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password2 DESKTOP_SESSION=default USER=no-password2
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-user-no-password.conf lightdm-1.10.1/tests/scripts/switch-to-user-no-password.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-user-no-password.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-user-no-password.conf	2014-04-14 04:30:10.000000000 +0700
@@ -37,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # New session starts
 #?SESSION-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password1 DESKTOP_SESSION=default USER=no-password1
diff -Naur lightdm-1.10.2.orig/tests/scripts/switch-to-users.conf lightdm-1.10.1/tests/scripts/switch-to-users.conf
--- lightdm-1.10.2.orig/tests/scripts/switch-to-users.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/switch-to-users.conf	2014-04-14 04:30:10.000000000 +0700
@@ -37,7 +37,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # New session starts
 #?SESSION-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_GREETER_DATA_DIR=.*/no-password1 DESKTOP_SESSION=default USER=no-password1
@@ -61,7 +61,7 @@
 #?XSERVER-2 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c1
+#?LOGIN1 LOCK-SESSION
 
 # New session starts
 #?SESSION-X-2 START XDG_SEAT=seat0 XDG_VTNR=9 XDG_GREETER_DATA_DIR=.*/no-password2 DESKTOP_SESSION=default USER=no-password2
diff -Naur lightdm-1.10.2.orig/tests/scripts/unity-mir-lock-seat.conf lightdm-1.10.1/tests/scripts/unity-mir-lock-seat.conf
--- lightdm-1.10.2.orig/tests/scripts/unity-mir-lock-seat.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/unity-mir-lock-seat.conf	2014-04-14 04:30:10.000000000 +0700
@@ -26,7 +26,7 @@
 #?SESSION-MIR-session-0 LOCK-SEAT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-MIR-greeter-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/unity-mir-script-hooks.conf lightdm-1.10.1/tests/scripts/unity-mir-script-hooks.conf
--- lightdm-1.10.2.orig/tests/scripts/unity-mir-script-hooks.conf	2014-09-16 10:33:18.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/unity-mir-script-hooks.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,61 +0,0 @@
-#
-# Check LightDM runs the script hooks correctly for autologin and the greeter
-#
-
-[SeatDefaults]
-type=unity
-display-setup-script=test-script-hook DISPLAY-SETUP
-display-stopped-script=test-script-hook DISPLAY-STOPPED
-greeter-setup-script=test-script-hook GREETER-SETUP
-session-setup-script=test-script-hook SESSION-SETUP
-session-cleanup-script=test-script-hook SESSION-CLEANUP
-autologin-user=have-password1
-user-session=mir
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# System compositor starts
-#?UNITY-SYSTEM-COMPOSITOR START FILE=/tmp/mir_socket VT=7 XDG_VTNR=7
-#?*UNITY-SYSTEM-COMPOSITOR READY
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-SETUP
-#?SCRIPT-HOOK SESSION-SETUP USER=have-password1
-
-# Session starts
-#?SESSION-MIR-session-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/have-password1 DESKTOP_SESSION=mir USER=have-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-
-# System compositor switches to session
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=session-0
-
-# Logout session
-#?*SESSION-MIR-session-0 LOGOUT
-
-# Script hooks runs
-#?SCRIPT-HOOK SESSION-CLEANUP USER=have-password1
-# FIXME: order wrong here?
-#?SCRIPT-HOOK DISPLAY-SETUP
-#?SCRIPT-HOOK DISPLAY-STOPPED
-#?SCRIPT-HOOK GREETER-SETUP USER=.*
-
-# Greeter starts
-#?GREETER-MIR-greeter-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?GREETER-MIR-greeter-0 CONNECT-TO-DAEMON
-#?GREETER-MIR-greeter-0 CONNECTED-TO-DAEMON
-
-# System compositor switches to greeter
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=greeter-0
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-MIR-greeter-0 TERMINATE SIGNAL=15
-#?UNITY-SYSTEM-COMPOSITOR TERMINATE SIGNAL=15
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-STOPPED
-
-# Finish cleanup
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/unity-script-hooks.conf lightdm-1.10.1/tests/scripts/unity-script-hooks.conf
--- lightdm-1.10.2.orig/tests/scripts/unity-script-hooks.conf	2014-09-16 10:33:35.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/unity-script-hooks.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,87 +0,0 @@
-#
-# Check LightDM runs the script hooks correctly for autologin and the greeter
-#
-
-[SeatDefaults]
-type=unity
-display-setup-script=test-script-hook DISPLAY-SETUP
-display-stopped-script=test-script-hook DISPLAY-STOPPED
-greeter-setup-script=test-script-hook GREETER-SETUP
-session-setup-script=test-script-hook SESSION-SETUP
-session-cleanup-script=test-script-hook SESSION-CLEANUP
-autologin-user=have-password1
-user-session=default
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# System compositor starts
-#?UNITY-SYSTEM-COMPOSITOR START FILE=/tmp/mir_socket VT=7 XDG_VTNR=7
-#?*UNITY-SYSTEM-COMPOSITOR READY
-
-# X server starts
-#?XSERVER-0 START SEAT=seat0 MIR-ID=x-0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-#?SCRIPT-HOOK DISPLAY-SETUP
-#?SCRIPT-HOOK SESSION-SETUP USER=have-password1
-
-# Session starts
-#?SESSION-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_GREETER_DATA_DIR=.*/have-password1 DESKTOP_SESSION=default USER=have-password1
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?SESSION-X-0 CONNECT-XSERVER
-
-# System compositor switches to session
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=x-0
-
-# Logout session
-#?*SESSION-X-0 LOGOUT
-
-# Script hook runs
-#?SCRIPT-HOOK SESSION-CLEANUP USER=have-password1
-
-# X server stops
-#?XSERVER-0 TERMINATE SIGNAL=15
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-STOPPED
-
-# X server starts
-#?XSERVER-1 START SEAT=seat0 MIR-ID=x-1
-
-# Daemon connects when X server is ready
-#?*XSERVER-1 INDICATE-READY
-#?XSERVER-1 INDICATE-READY
-#?XSERVER-1 ACCEPT-CONNECT
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-SETUP
-#?SCRIPT-HOOK GREETER-SETUP USER=.*
-
-# Greeter starts
-#?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c1
-#?XSERVER-1 ACCEPT-CONNECT
-#?GREETER-X-1 CONNECT-XSERVER
-#?GREETER-X-1 CONNECT-TO-DAEMON
-#?GREETER-X-1 CONNECTED-TO-DAEMON
-
-# System compositor switches to session
-#?UNITY-SYSTEM-COMPOSITOR SET-ACTIVE-SESSION ID=x-1
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-1 TERMINATE SIGNAL=15
-#?XSERVER-1 TERMINATE SIGNAL=15
-
-# Script hooks run
-#?SCRIPT-HOOK DISPLAY-STOPPED
-
-# Finish cleanup
-#?UNITY-SYSTEM-COMPOSITOR TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/scripts/unity-switch.conf lightdm-1.10.1/tests/scripts/unity-switch.conf
--- lightdm-1.10.2.orig/tests/scripts/unity-switch.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/unity-switch.conf	2014-04-14 04:30:10.000000000 +0700
@@ -44,7 +44,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Lock session
-#?LOGIN1 LOCK-SESSION SESSION=c0
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/user-logged-in.conf lightdm-1.10.1/tests/scripts/user-logged-in.conf
--- lightdm-1.10.2.orig/tests/scripts/user-logged-in.conf	2014-09-03 14:32:36.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/user-logged-in.conf	2014-04-14 04:30:10.000000000 +0700
@@ -56,7 +56,7 @@
 #?XSERVER-1 ACCEPT-CONNECT
 
 # Session is locked
-#?LOGIN1 LOCK-SESSION SESSION=c1
+#?LOGIN1 LOCK-SESSION
 
 # Greeter starts
 #?GREETER-X-1 START XDG_SEAT=seat0 XDG_VTNR=8 XDG_SESSION_CLASS=greeter
diff -Naur lightdm-1.10.2.orig/tests/scripts/user-uid.conf lightdm-1.10.1/tests/scripts/user-uid.conf
--- lightdm-1.10.2.orig/tests/scripts/user-uid.conf	2014-09-08 07:43:58.000000000 +0700
+++ lightdm-1.10.1/tests/scripts/user-uid.conf	1970-01-01 07:00:00.000000000 +0700
@@ -1,32 +0,0 @@
-#
-# Check returns correct UID for a user
-#
-
-#?*START-DAEMON
-#?RUNNER DAEMON-START
-
-# X server starts
-#?XSERVER-0 START VT=7 SEAT=seat0
-
-# Daemon connects when X server is ready
-#?*XSERVER-0 INDICATE-READY
-#?XSERVER-0 INDICATE-READY
-#?XSERVER-0 ACCEPT-CONNECT
-
-# Greeter starts
-#?GREETER-X-0 START XDG_SEAT=seat0 XDG_VTNR=7 XDG_SESSION_CLASS=greeter
-#?LOGIN1 ACTIVATE-SESSION SESSION=c0
-#?XSERVER-0 ACCEPT-CONNECT
-#?GREETER-X-0 CONNECT-XSERVER
-#?GREETER-X-0 CONNECT-TO-DAEMON
-#?GREETER-X-0 CONNECTED-TO-DAEMON
-
-# Check correct UID
-#?*GREETER-X-0 LOG-USER USERNAME=have-password1 FIELDS=UID
-#?GREETER-X-0 LOG-USER USERNAME=have-password1 UID=1000
-
-# Cleanup
-#?*STOP-DAEMON
-#?GREETER-X-0 TERMINATE SIGNAL=15
-#?XSERVER-0 TERMINATE SIGNAL=15
-#?RUNNER DAEMON-EXIT STATUS=0
diff -Naur lightdm-1.10.2.orig/tests/src/libsystem.c lightdm-1.10.1/tests/src/libsystem.c
--- lightdm-1.10.2.orig/tests/src/libsystem.c	2014-09-03 14:18:10.000000000 +0700
+++ lightdm-1.10.1/tests/src/libsystem.c	2014-04-28 04:47:43.000000000 +0700
@@ -1210,9 +1210,6 @@
 int
 pam_open_session (pam_handle_t *pamh, int flags)
 {
-    GVariant *result;
-    GError *error = NULL;
-
     if (pamh == NULL)
         return PAM_SYSTEM_ERR;
 
@@ -1240,33 +1237,6 @@
         g_mkdir_with_parents (entry->pw_dir, 0755);
     }
 
-    /* Open logind session */
-    result = g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                          "org.freedesktop.login1",
-                                          "/org/freedesktop/login1",
-                                          "org.freedesktop.login1.Manager",
-                                          "CreateSession",
-                                          g_variant_new ("()", ""),
-                                          G_VARIANT_TYPE ("(so)"),
-                                          G_DBUS_CALL_FLAGS_NONE,
-                                          G_MAXINT,
-                                          NULL,
-                                          &error);
-    if (result)
-    {
-        gchar *e;
-        const gchar *id;
-
-        g_variant_get (result, "(&so)", &id, NULL);
-        e = g_strdup_printf ("XDG_SESSION_ID=%s", id);
-        pam_putenv (pamh, e);
-        g_free (e);
-        g_variant_unref (result);
-    }
-    else
-        g_printerr ("Failed to create logind session: %s\n", error->message);
-    g_clear_error (&error);
-
     return PAM_SUCCESS;
 }
 
diff -Naur lightdm-1.10.2.orig/tests/src/Makefile.am lightdm-1.10.1/tests/src/Makefile.am
--- lightdm-1.10.2.orig/tests/src/Makefile.am	2014-09-08 06:17:00.000000000 +0700
+++ lightdm-1.10.1/tests/src/Makefile.am	2014-04-08 11:30:25.000000000 +0700
@@ -4,6 +4,7 @@
                   test-gobject-greeter \
                   test-greeter-wrapper \
                   test-guest-wrapper \
+                  test-mir-greeter \
                   test-runner \
                   test-script-hook \
                   test-session \
@@ -120,6 +121,18 @@
 	$(GIO_UNIX_LIBS) \
 	$(XCB_LIBS)
 
+test_mir_greeter_SOURCES = test-mir-greeter.c status.c status.h
+test_mir_greeter_CFLAGS = \
+	-I$(top_srcdir)/liblightdm-gobject \
+	$(WARN_CFLAGS) \
+	$(GLIB_CFLAGS) \
+	$(GIO_UNIX_CFLAGS)
+test_mir_greeter_LDADD = \
+	-L$(top_builddir)/liblightdm-gobject \
+	-llightdm-gobject-1 \
+	$(GLIB_LIBS) \
+	$(GIO_UNIX_LIBS)
+
 guest_account_SOURCES = guest-account.c status.c status.h
 guest_account_CFLAGS = \
 	$(WARN_CFLAGS) \
diff -Naur lightdm-1.10.2.orig/tests/src/Makefile.in lightdm-1.10.1/tests/src/Makefile.in
--- lightdm-1.10.2.orig/tests/src/Makefile.in	2014-09-17 11:23:23.000000000 +0700
+++ lightdm-1.10.1/tests/src/Makefile.in	2014-04-28 04:54:00.000000000 +0700
@@ -82,11 +82,11 @@
 host_triplet = @host@
 noinst_PROGRAMS = dbus-env$(EXEEXT) initctl$(EXEEXT) plymouth$(EXEEXT) \
 	test-gobject-greeter$(EXEEXT) test-greeter-wrapper$(EXEEXT) \
-	test-guest-wrapper$(EXEEXT) test-runner$(EXEEXT) \
-	test-script-hook$(EXEEXT) test-session$(EXEEXT) \
-	guest-account$(EXEEXT) unity-system-compositor$(EXEEXT) \
-	vnc-client$(EXEEXT) X$(EXEEXT) Xvnc$(EXEEXT) $(am__EXEEXT_1) \
-	$(am__EXEEXT_2)
+	test-guest-wrapper$(EXEEXT) test-mir-greeter$(EXEEXT) \
+	test-runner$(EXEEXT) test-script-hook$(EXEEXT) \
+	test-session$(EXEEXT) guest-account$(EXEEXT) \
+	unity-system-compositor$(EXEEXT) vnc-client$(EXEEXT) \
+	X$(EXEEXT) Xvnc$(EXEEXT) $(am__EXEEXT_1) $(am__EXEEXT_2)
 @COMPILE_LIBLIGHTDM_QT4_TRUE@am__append_1 = test-qt4-greeter
 @COMPILE_LIBLIGHTDM_QT5_TRUE@am__append_2 = test-qt5-greeter
 subdir = tests/src
@@ -197,6 +197,16 @@
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(test_guest_wrapper_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
+am_test_mir_greeter_OBJECTS =  \
+	test_mir_greeter-test-mir-greeter.$(OBJEXT) \
+	test_mir_greeter-status.$(OBJEXT)
+test_mir_greeter_OBJECTS = $(am_test_mir_greeter_OBJECTS)
+test_mir_greeter_DEPENDENCIES = $(am__DEPENDENCIES_1) \
+	$(am__DEPENDENCIES_1)
+test_mir_greeter_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC \
+	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
+	$(test_mir_greeter_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
+	-o $@
 am__objects_1 = test_qt4_greeter-test-qt-greeter.$(OBJEXT) \
 	test_qt4_greeter-status.$(OBJEXT)
 am_test_qt4_greeter_OBJECTS = $(am__objects_1)
@@ -326,19 +336,19 @@
 	dbus-env.c $(guest_account_SOURCES) $(initctl_SOURCES) \
 	$(plymouth_SOURCES) $(test_gobject_greeter_SOURCES) \
 	$(test_greeter_wrapper_SOURCES) $(test_guest_wrapper_SOURCES) \
-	$(test_qt4_greeter_SOURCES) $(nodist_test_qt4_greeter_SOURCES) \
-	$(test_qt5_greeter_SOURCES) $(nodist_test_qt5_greeter_SOURCES) \
-	$(test_runner_SOURCES) $(test_script_hook_SOURCES) \
-	$(test_session_SOURCES) $(unity_system_compositor_SOURCES) \
-	$(vnc_client_SOURCES)
+	$(test_mir_greeter_SOURCES) $(test_qt4_greeter_SOURCES) \
+	$(nodist_test_qt4_greeter_SOURCES) $(test_qt5_greeter_SOURCES) \
+	$(nodist_test_qt5_greeter_SOURCES) $(test_runner_SOURCES) \
+	$(test_script_hook_SOURCES) $(test_session_SOURCES) \
+	$(unity_system_compositor_SOURCES) $(vnc_client_SOURCES)
 DIST_SOURCES = $(libsystem_la_SOURCES) $(X_SOURCES) $(Xvnc_SOURCES) \
 	dbus-env.c $(guest_account_SOURCES) $(initctl_SOURCES) \
 	$(plymouth_SOURCES) $(test_gobject_greeter_SOURCES) \
 	$(test_greeter_wrapper_SOURCES) $(test_guest_wrapper_SOURCES) \
-	$(test_qt4_greeter_SOURCES) $(test_qt5_greeter_SOURCES) \
-	$(test_runner_SOURCES) $(test_script_hook_SOURCES) \
-	$(test_session_SOURCES) $(unity_system_compositor_SOURCES) \
-	$(vnc_client_SOURCES)
+	$(test_mir_greeter_SOURCES) $(test_qt4_greeter_SOURCES) \
+	$(test_qt5_greeter_SOURCES) $(test_runner_SOURCES) \
+	$(test_script_hook_SOURCES) $(test_session_SOURCES) \
+	$(unity_system_compositor_SOURCES) $(vnc_client_SOURCES)
 am__can_run_installinfo = \
   case $$AM_UPDATE_INFO_DIR in \
     n|no|NO) false;; \
@@ -493,8 +503,6 @@
 XCB_LIBS = @XCB_LIBS@
 XGETTEXT = @XGETTEXT@
 XMLLINT = @XMLLINT@
-YELP_LC_DIST = @YELP_LC_DIST@
-YELP_LC_MEDIA_LINKS = @YELP_LC_MEDIA_LINKS@
 abs_builddir = @abs_builddir@
 abs_srcdir = @abs_srcdir@
 abs_top_builddir = @abs_top_builddir@
@@ -659,6 +667,19 @@
 	$(GIO_UNIX_LIBS) \
 	$(XCB_LIBS)
 
+test_mir_greeter_SOURCES = test-mir-greeter.c status.c status.h
+test_mir_greeter_CFLAGS = \
+	-I$(top_srcdir)/liblightdm-gobject \
+	$(WARN_CFLAGS) \
+	$(GLIB_CFLAGS) \
+	$(GIO_UNIX_CFLAGS)
+
+test_mir_greeter_LDADD = \
+	-L$(top_builddir)/liblightdm-gobject \
+	-llightdm-gobject-1 \
+	$(GLIB_LIBS) \
+	$(GIO_UNIX_LIBS)
+
 guest_account_SOURCES = guest-account.c status.c status.h
 guest_account_CFLAGS = \
 	$(WARN_CFLAGS) \
@@ -884,6 +905,10 @@
 	@rm -f test-guest-wrapper$(EXEEXT)
 	$(AM_V_CCLD)$(test_guest_wrapper_LINK) $(test_guest_wrapper_OBJECTS) $(test_guest_wrapper_LDADD) $(LIBS)
 
+test-mir-greeter$(EXEEXT): $(test_mir_greeter_OBJECTS) $(test_mir_greeter_DEPENDENCIES) $(EXTRA_test_mir_greeter_DEPENDENCIES) 
+	@rm -f test-mir-greeter$(EXEEXT)
+	$(AM_V_CCLD)$(test_mir_greeter_LINK) $(test_mir_greeter_OBJECTS) $(test_mir_greeter_LDADD) $(LIBS)
+
 test-qt4-greeter$(EXEEXT): $(test_qt4_greeter_OBJECTS) $(test_qt4_greeter_DEPENDENCIES) $(EXTRA_test_qt4_greeter_DEPENDENCIES) 
 	@rm -f test-qt4-greeter$(EXEEXT)
 	$(AM_V_CXXLD)$(test_qt4_greeter_LINK) $(test_qt4_greeter_OBJECTS) $(test_qt4_greeter_LDADD) $(LIBS)
@@ -944,6 +969,8 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_greeter_wrapper-test-greeter-wrapper.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_guest_wrapper-status.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_guest_wrapper-test-guest-wrapper.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_mir_greeter-status.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_mir_greeter-test-mir-greeter.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_qt4_greeter-status.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_qt4_greeter-test-qt-greeter.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/test_qt4_greeter-test-qt4-greeter_moc4.Po@am__quote@
@@ -1331,6 +1358,34 @@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_guest_wrapper_CFLAGS) $(CFLAGS) -c -o test_guest_wrapper-status.obj `if test -f 'status.c'; then $(CYGPATH_W) 'status.c'; else $(CYGPATH_W) '$(srcdir)/status.c'; fi`
 
+test_mir_greeter-test-mir-greeter.o: test-mir-greeter.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -MT test_mir_greeter-test-mir-greeter.o -MD -MP -MF $(DEPDIR)/test_mir_greeter-test-mir-greeter.Tpo -c -o test_mir_greeter-test-mir-greeter.o `test -f 'test-mir-greeter.c' || echo '$(srcdir)/'`test-mir-greeter.c
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/test_mir_greeter-test-mir-greeter.Tpo $(DEPDIR)/test_mir_greeter-test-mir-greeter.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='test-mir-greeter.c' object='test_mir_greeter-test-mir-greeter.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -c -o test_mir_greeter-test-mir-greeter.o `test -f 'test-mir-greeter.c' || echo '$(srcdir)/'`test-mir-greeter.c
+
+test_mir_greeter-test-mir-greeter.obj: test-mir-greeter.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -MT test_mir_greeter-test-mir-greeter.obj -MD -MP -MF $(DEPDIR)/test_mir_greeter-test-mir-greeter.Tpo -c -o test_mir_greeter-test-mir-greeter.obj `if test -f 'test-mir-greeter.c'; then $(CYGPATH_W) 'test-mir-greeter.c'; else $(CYGPATH_W) '$(srcdir)/test-mir-greeter.c'; fi`
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/test_mir_greeter-test-mir-greeter.Tpo $(DEPDIR)/test_mir_greeter-test-mir-greeter.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='test-mir-greeter.c' object='test_mir_greeter-test-mir-greeter.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -c -o test_mir_greeter-test-mir-greeter.obj `if test -f 'test-mir-greeter.c'; then $(CYGPATH_W) 'test-mir-greeter.c'; else $(CYGPATH_W) '$(srcdir)/test-mir-greeter.c'; fi`
+
+test_mir_greeter-status.o: status.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -MT test_mir_greeter-status.o -MD -MP -MF $(DEPDIR)/test_mir_greeter-status.Tpo -c -o test_mir_greeter-status.o `test -f 'status.c' || echo '$(srcdir)/'`status.c
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/test_mir_greeter-status.Tpo $(DEPDIR)/test_mir_greeter-status.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='status.c' object='test_mir_greeter-status.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -c -o test_mir_greeter-status.o `test -f 'status.c' || echo '$(srcdir)/'`status.c
+
+test_mir_greeter-status.obj: status.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -MT test_mir_greeter-status.obj -MD -MP -MF $(DEPDIR)/test_mir_greeter-status.Tpo -c -o test_mir_greeter-status.obj `if test -f 'status.c'; then $(CYGPATH_W) 'status.c'; else $(CYGPATH_W) '$(srcdir)/status.c'; fi`
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/test_mir_greeter-status.Tpo $(DEPDIR)/test_mir_greeter-status.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='status.c' object='test_mir_greeter-status.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_mir_greeter_CFLAGS) $(CFLAGS) -c -o test_mir_greeter-status.obj `if test -f 'status.c'; then $(CYGPATH_W) 'status.c'; else $(CYGPATH_W) '$(srcdir)/status.c'; fi`
+
 test_qt4_greeter-status.o: status.c
 @am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(test_qt4_greeter_CFLAGS) $(CFLAGS) -MT test_qt4_greeter-status.o -MD -MP -MF $(DEPDIR)/test_qt4_greeter-status.Tpo -c -o test_qt4_greeter-status.o `test -f 'status.c' || echo '$(srcdir)/'`status.c
 @am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/test_qt4_greeter-status.Tpo $(DEPDIR)/test_qt4_greeter-status.Po
diff -Naur lightdm-1.10.2.orig/tests/src/test-gobject-greeter.c lightdm-1.10.1/tests/src/test-gobject-greeter.c
--- lightdm-1.10.2.orig/tests/src/test-gobject-greeter.c	2014-09-08 07:43:58.000000000 +0700
+++ lightdm-1.10.1/tests/src/test-gobject-greeter.c	2014-04-08 11:30:25.000000000 +0700
@@ -45,6 +45,7 @@
 static void
 autologin_timer_expired_cb (LightDMGreeter *greeter)
 {
+    status_notify ("%s AUTOLOGIN-TIMER-EXPIRED", greeter_id);
 }
 
 static gboolean
@@ -64,41 +65,6 @@
 }
 
 static void
-notify_hints (LightDMGreeter *greeter)
-{
-    int timeout = lightdm_greeter_get_autologin_timeout_hint (greeter);
-
-    if (lightdm_greeter_get_select_user_hint (greeter))
-        status_notify ("%s SELECT-USER-HINT USERNAME=%s", greeter_id, lightdm_greeter_get_select_user_hint (greeter));
-    if (lightdm_greeter_get_select_guest_hint (greeter))
-        status_notify ("%s SELECT-GUEST-HINT", greeter_id);
-    if (lightdm_greeter_get_lock_hint (greeter))
-        status_notify ("%s LOCK-HINT", greeter_id);
-    if (!lightdm_greeter_get_has_guest_account_hint (greeter))
-        status_notify ("%s HAS-GUEST-ACCOUNT-HINT=FALSE", greeter_id);
-    if (lightdm_greeter_get_hide_users_hint (greeter))
-        status_notify ("%s HIDE-USERS-HINT", greeter_id);
-    if (lightdm_greeter_get_show_manual_login_hint (greeter))
-        status_notify ("%s SHOW-MANUAL-LOGIN-HINT", greeter_id);
-    if (!lightdm_greeter_get_show_remote_login_hint (greeter))
-        status_notify ("%s SHOW-REMOTE-LOGIN-HINT=FALSE", greeter_id);
-    if (lightdm_greeter_get_autologin_user_hint (greeter))
-    {
-        if (timeout != 0)
-            status_notify ("%s AUTOLOGIN-USER USERNAME=%s TIMEOUT=%d", greeter_id, lightdm_greeter_get_autologin_user_hint (greeter), timeout);
-        else
-            status_notify ("%s AUTOLOGIN-USER USERNAME=%s", greeter_id, lightdm_greeter_get_autologin_user_hint (greeter));
-    }
-    else if (lightdm_greeter_get_autologin_guest_hint (greeter))
-    {
-        if (timeout != 0)
-            status_notify ("%s AUTOLOGIN-GUEST TIMEOUT=%d", greeter_id, timeout);
-        else
-            status_notify ("%s AUTOLOGIN-GUEST", greeter_id);
-    }
-}
-
-static void
 user_changed_cb (LightDMUser *user)
 {
     status_notify ("%s USER-CHANGED USERNAME=%s", greeter_id, lightdm_user_get_name (user));
@@ -263,13 +229,11 @@
                 g_string_append_printf (status_text, " LOGGED-IN=%s", lightdm_user_get_logged_in (user) ? "TRUE" : "FALSE");
             else if (strcmp (fields[i], "HAS-MESSAGES") == 0)
                 g_string_append_printf (status_text, " HAS-MESSAGES=%s", lightdm_user_get_has_messages (user) ? "TRUE" : "FALSE");
-            else if (strcmp (fields[i], "UID") == 0)
-                g_string_append_printf (status_text, " UID=%d", lightdm_user_get_uid (user));
         }
         g_strfreev (fields);
         g_free (layouts_text);
 
-        status_notify ("%s", status_text->str);
+        status_notify (status_text->str);
         g_string_free (status_text, TRUE);
     }
 
@@ -357,7 +321,7 @@
 int
 main (int argc, char **argv)
 {
-    gchar *display, *xdg_seat, *xdg_vtnr, *xdg_session_cookie, *xdg_session_class, *mir_socket, *mir_vt, *mir_id, *path;
+    gchar *display, *xdg_seat, *xdg_vtnr, *xdg_session_cookie, *xdg_session_class, *mir_socket, *mir_vt, *mir_id;
     GString *status_text;
 
 #if !defined(GLIB_VERSION_2_36)
@@ -405,13 +369,11 @@
         g_string_append_printf (status_text, " XDG_SESSION_CLASS=%s", xdg_session_class);
     if (mir_vt > 0)
         g_string_append_printf (status_text, " MIR_SERVER_VT=%s", mir_vt);
-    status_notify ("%s", status_text->str);
+    status_notify (status_text->str);
     g_string_free (status_text, TRUE);
 
     config = g_key_file_new ();
-    path = g_build_filename (g_getenv ("LIGHTDM_TEST_ROOT"), "script", NULL);
-    g_key_file_load_from_file (config, path, G_KEY_FILE_NONE, NULL);
-    g_free (path);
+    g_key_file_load_from_file (config, g_build_filename (g_getenv ("LIGHTDM_TEST_ROOT"), "script", NULL), G_KEY_FILE_NONE, NULL);
 
     if (g_key_file_has_key (config, "test-greeter-config", "return-value", NULL))
     {
@@ -452,7 +414,20 @@
 
     status_notify ("%s CONNECTED-TO-DAEMON", greeter_id);
 
-    notify_hints (greeter);
+    if (lightdm_greeter_get_select_user_hint (greeter))
+        status_notify ("%s SELECT-USER-HINT USERNAME=%s", greeter_id, lightdm_greeter_get_select_user_hint (greeter));
+    if (lightdm_greeter_get_select_guest_hint (greeter))
+        status_notify ("%s SELECT-GUEST-HINT", greeter_id);
+    if (lightdm_greeter_get_lock_hint (greeter))
+        status_notify ("%s LOCK-HINT", greeter_id);
+    if (!lightdm_greeter_get_has_guest_account_hint (greeter))
+        status_notify ("%s HAS-GUEST-ACCOUNT-HINT=FALSE", greeter_id);
+    if (lightdm_greeter_get_hide_users_hint (greeter))
+        status_notify ("%s HIDE-USERS-HINT", greeter_id);
+    if (lightdm_greeter_get_show_manual_login_hint (greeter))
+        status_notify ("%s SHOW-MANUAL-LOGIN-HINT", greeter_id);
+    if (!lightdm_greeter_get_show_remote_login_hint (greeter))
+        status_notify ("%s SHOW-REMOTE-LOGIN-HINT=FALSE", greeter_id);
 
     g_main_loop_run (loop);
 
diff -Naur lightdm-1.10.2.orig/tests/src/test-mir-greeter.c lightdm-1.10.1/tests/src/test-mir-greeter.c
--- lightdm-1.10.2.orig/tests/src/test-mir-greeter.c	1970-01-01 07:00:00.000000000 +0700
+++ lightdm-1.10.1/tests/src/test-mir-greeter.c	2014-04-08 11:30:25.000000000 +0700
@@ -0,0 +1,123 @@
+/* -*- Mode: C; indent-tabs-mode: nil; tab-width: 4 -*- */
+
+#include <stdlib.h>
+#include <stdio.h>
+#include <string.h>
+#include <lightdm.h>
+
+#include "status.h"
+
+static gchar *greeter_id;
+static GMainLoop *loop;
+static LightDMGreeter *greeter;
+static GKeyFile *config;
+
+static void
+show_message_cb (LightDMGreeter *greeter, const gchar *text, LightDMMessageType type)
+{
+    status_notify ("%s SHOW-MESSAGE TEXT=\"%s\"", greeter_id, text);
+}
+
+static void
+show_prompt_cb (LightDMGreeter *greeter, const gchar *text, LightDMPromptType type)
+{
+    status_notify ("%s SHOW-PROMPT TEXT=\"%s\"", greeter_id, text);
+}
+
+static void
+authentication_complete_cb (LightDMGreeter *greeter)
+{
+    if (lightdm_greeter_get_authentication_user (greeter))
+        status_notify ("%s AUTHENTICATION-COMPLETE USERNAME=%s AUTHENTICATED=%s",
+                       greeter_id,
+                       lightdm_greeter_get_authentication_user (greeter),
+                       lightdm_greeter_get_is_authenticated (greeter) ? "TRUE" : "FALSE");
+    else
+        status_notify ("%s AUTHENTICATION-COMPLETE AUTHENTICATED=%s",
+                       greeter_id,
+                       lightdm_greeter_get_is_authenticated (greeter) ? "TRUE" : "FALSE");
+}
+
+static void
+signal_cb (int signum)
+{
+    status_notify ("%s TERMINATE SIGNAL=%d", greeter_id, signum);
+    exit (EXIT_SUCCESS);
+}
+
+static void
+request_cb (const gchar *name, GHashTable *params)
+{
+    if (!name)
+    {
+        g_main_loop_quit (loop);
+        return;
+    }
+  
+    if (strcmp (name, "AUTHENTICATE") == 0)
+        lightdm_greeter_authenticate (greeter, g_hash_table_lookup (params, "USERNAME"));
+
+    if (strcmp (name, "RESPOND") == 0)
+    {
+        gchar *text = g_strdup (g_hash_table_lookup (params, "TEXT"));
+        text[strlen (text) - 1] = '\0';
+        lightdm_greeter_respond (greeter, text);
+        g_free (text);
+    }
+
+    if (strcmp (name, "CANCEL-AUTHENTICATION") == 0)
+        lightdm_greeter_cancel_authentication (greeter);
+
+    if (strcmp (name, "START-SESSION") == 0)
+    {
+        if (!lightdm_greeter_start_session_sync (greeter, g_hash_table_lookup (params, "SESSION"), NULL))
+            status_notify ("%s SESSION-FAILED", greeter_id); 
+    }
+}
+
+int
+main (int argc, char **argv)
+{
+    signal (SIGINT, signal_cb);
+    signal (SIGTERM, signal_cb);
+
+#if !defined(GLIB_VERSION_2_36)
+    g_type_init ();
+#endif
+
+    greeter_id = g_strdup ("GREETER-MIR");
+
+    loop = g_main_loop_new (NULL, FALSE);
+
+    status_connect (request_cb, greeter_id);
+
+    status_notify ("%s START", greeter_id);
+
+    config = g_key_file_new ();
+    g_key_file_load_from_file (config, g_build_filename (g_getenv ("LIGHTDM_TEST_ROOT"), "script", NULL), G_KEY_FILE_NONE, NULL);
+
+    if (g_key_file_has_key (config, "test-greeter-config", "return-value", NULL))
+    {
+        int return_value = g_key_file_get_integer (config, "test-greeter-config", "return-value", NULL);
+        status_notify ("%s EXIT CODE=%d", greeter_id, return_value);
+        return return_value;
+    }
+
+    greeter = lightdm_greeter_new ();
+    g_signal_connect (greeter, "show-message", G_CALLBACK (show_message_cb), NULL);
+    g_signal_connect (greeter, "show-prompt", G_CALLBACK (show_prompt_cb), NULL);
+    g_signal_connect (greeter, "authentication-complete", G_CALLBACK (authentication_complete_cb), NULL);
+
+    status_notify ("%s CONNECT-TO-DAEMON", greeter_id);
+    if (!lightdm_greeter_connect_sync (greeter, NULL))
+    {
+        status_notify ("%s FAIL-CONNECT-DAEMON", greeter_id);
+        return EXIT_FAILURE;
+    }
+
+    status_notify ("%s CONNECTED-TO-DAEMON", greeter_id);
+
+    g_main_loop_run (loop);
+
+    return EXIT_SUCCESS;
+}
diff -Naur lightdm-1.10.2.orig/tests/src/test-python-greeter lightdm-1.10.1/tests/src/test-python-greeter
--- lightdm-1.10.2.orig/tests/src/test-python-greeter	2014-09-08 07:27:25.000000000 +0700
+++ lightdm-1.10.1/tests/src/test-python-greeter	2014-04-08 11:30:25.000000000 +0700
@@ -185,33 +185,6 @@
 
     return True
 
-def notify_hints (greeter):
-    if greeter.get_select_user_hint () is not None:
-        status_notify ('%s SELECT-USER-HINT USERNAME=%s' % (greeter_id, greeter.get_select_user_hint ()))
-    if greeter.get_select_guest_hint ():
-        status_notify ('%s SELECT-GUEST-HINT' % greeter_id)
-    if greeter.get_lock_hint ():
-        status_notify ('%s LOCK-HINT' % greeter_id)
-    if not greeter.get_has_guest_account_hint ():
-        status_notify ('%s HAS-GUEST-ACCOUNT-HINT=FALSE' % greeter_id)
-    if greeter.get_hide_users_hint ():
-        status_notify ('%s HIDE-USERS-HINT' % greeter_id)
-    if greeter.get_show_manual_login_hint ():
-        status_notify ('%s SHOW-MANUAL-LOGIN-HINT' % greeter_id)
-    if not greeter.get_show_remote_login_hint ():
-        status_notify ('%s SHOW-REMOTE-LOGIN-HINT=FALSE' % greeter_id)
-    timeout = greeter.get_autologin_timeout_hint ()
-    if greeter.get_autologin_user_hint () is not None:
-        if timeout != 0:
-            status_notify ('%s AUTOLOGIN-USER USERNAME=%s TIMEOUT=%d' % (greeter_id, greeter.get_autologin_user_hint (), timeout))
-        else:
-            status_notify ('%s AUTOLOGIN-USER USERNAME=%s' % (greeter_id, greeter.get_autologin_user_hint ()))
-    elif greeter.get_autologin_guest_hint ():
-        if timeout != 0:
-            status_notify ('%s AUTOLOGIN-GUEST TIMEOUT=%d' % (greeter_id, timeout))
-        else:
-            status_notify ('%s AUTOLOGIN-GUEST' % greeter_id)
-
 path = os.getenv ('LIGHTDM_TEST_ROOT') + '/.s'
 status_socket = socket.socket (socket.AF_UNIX, socket.SOCK_STREAM)
 status_socket.connect (path)
@@ -260,7 +233,7 @@
         status_notify ('%s AUTHENTICATION-COMPLETE AUTHENTICATED=%s' % (greeter_id, is_authenticated))
 
 def autologin_timer_expired_cb (greeter):
-    pass
+    status_notify ('%s AUTOLOGIN-TIMER-EXPIRED' % greeter_id)
 
 greeter = LightDM.Greeter ()
 greeter.connect ('show-message', show_message_cb)
@@ -288,5 +261,19 @@
 
 status_notify ('%s CONNECTED-TO-DAEMON' % greeter_id)
 
-notify_hints (greeter)
+if greeter.get_select_user_hint () is not None:
+    status_notify ('%s SELECT-USER-HINT USERNAME=%s' % (greeter_id, greeter.get_select_user_hint ()))
+if greeter.get_select_guest_hint ():
+    status_notify ('%s SELECT-GUEST-HINT' % greeter_id)
+if greeter.get_lock_hint ():
+    status_notify ('%s LOCK-HINT' % greeter_id)
+if not greeter.get_has_guest_account_hint ():
+    status_notify ('%s HAS-GUEST-ACCOUNT-HINT=FALSE' % greeter_id)
+if greeter.get_hide_users_hint ():
+    status_notify ('%s HIDE-USERS-HINT' % greeter_id)
+if greeter.get_show_manual_login_hint ():
+    status_notify ('%s SHOW-MANUAL-LOGIN-HINT' % greeter_id)
+if not greeter.get_show_remote_login_hint ():
+    status_notify ('%s SHOW-REMOTE-LOGIN-HINT=FALSE' % greeter_id)
+
 loop.run ()
diff -Naur lightdm-1.10.2.orig/tests/src/test-qt-greeter.cpp lightdm-1.10.1/tests/src/test-qt-greeter.cpp
--- lightdm-1.10.2.orig/tests/src/test-qt-greeter.cpp	2014-09-08 07:28:15.000000000 +0700
+++ lightdm-1.10.1/tests/src/test-qt-greeter.cpp	2014-04-08 11:30:25.000000000 +0700
@@ -51,39 +51,7 @@
 
 void TestGreeter::autologinTimerExpired ()
 {
-}
-
-void TestGreeter::printHints ()
-{
-    if (selectUserHint() != "")
-        status_notify ("%s SELECT-USER-HINT USERNAME=%s", greeter_id, greeter->selectUserHint ().toAscii ().constData ());
-    if (selectGuestHint())
-        status_notify ("%s SELECT-GUEST-HINT", greeter_id);
-    if (lockHint())
-        status_notify ("%s LOCK-HINT", greeter_id);
-    if (!hasGuestAccountHint ())
-        status_notify ("%s HAS-GUEST-ACCOUNT-HINT=FALSE", greeter_id);
-    if (hideUsersHint ())
-        status_notify ("%s HIDE-USERS-HINT", greeter_id);
-    if (showManualLoginHint ())
-        status_notify ("%s SHOW-MANUAL-LOGIN-HINT", greeter_id);
-    if (!showRemoteLoginHint ())
-        status_notify ("%s SHOW-REMOTE-LOGIN-HINT=FALSE", greeter_id);
-    int timeout = autologinTimeoutHint ();
-    if (autologinUserHint () != "")
-    {
-        if (timeout != 0)
-            status_notify ("%s AUTOLOGIN-USER USERNAME=%s TIMEOUT=%d", greeter_id, greeter->autologinUserHint ().toAscii ().constData (), timeout);
-        else
-            status_notify ("%s AUTOLOGIN-USER USERNAME=%s", greeter_id, greeter->autologinUserHint ().toAscii ().constData ());
-    }
-    else if (autologinGuestHint ())
-    {
-        if (timeout != 0)
-            status_notify ("%s AUTOLOGIN-GUEST TIMEOUT=%d", greeter_id, timeout);
-        else
-            status_notify ("%s AUTOLOGIN-GUEST", greeter_id);
-    }
+    status_notify ("%s AUTOLOGIN-TIMER-EXPIRED", greeter_id);
 }
 
 void TestGreeter::userRowsInserted (const QModelIndex & parent, int start, int end)
@@ -258,11 +226,6 @@
 
     status_connect (request_cb, greeter_id);
 
-    /* Workaround for Qt being confused by libsystem */
-#if QT_VERSION >= QT_VERSION_CHECK (5, 3, 0)
-    QCoreApplication::setSetuidAllowed (true);
-#endif  
-
     app = new QCoreApplication (argc, argv);
 
     signal (SIGINT, signal_cb);
@@ -278,7 +241,7 @@
         g_string_append_printf (status_text, " XDG_SESSION_COOKIE=%s", xdg_session_cookie);
     if (xdg_session_class)
         g_string_append_printf (status_text, " XDG_SESSION_CLASS=%s", xdg_session_class);
-    status_notify ("%s", status_text->str);
+    status_notify (status_text->str);
     g_string_free (status_text, TRUE);
 
     config = new QSettings (g_build_filename (getenv ("LIGHTDM_TEST_ROOT"), "script", NULL), QSettings::IniFormat);
@@ -314,7 +277,20 @@
 
     status_notify ("%s CONNECTED-TO-DAEMON", greeter_id);
 
-    greeter->printHints();
+    if (greeter->selectUserHint() != "")
+        status_notify ("%s SELECT-USER-HINT USERNAME=%s", greeter_id, greeter->selectUserHint ().toAscii ().constData ());
+    if (greeter->selectGuestHint())
+        status_notify ("%s SELECT-GUEST-HINT", greeter_id);
+    if (greeter->lockHint())
+        status_notify ("%s LOCK-HINT", greeter_id);
+    if (!greeter->hasGuestAccountHint ())
+        status_notify ("%s HAS-GUEST-ACCOUNT-HINT=FALSE", greeter_id);
+    if (greeter->hideUsersHint ())
+        status_notify ("%s HIDE-USERS-HINT", greeter_id);
+    if (greeter->showManualLoginHint ())
+        status_notify ("%s SHOW-MANUAL-LOGIN-HINT", greeter_id);
+    if (!greeter->showRemoteLoginHint ())
+        status_notify ("%s SHOW-REMOTE-LOGIN-HINT=FALSE", greeter_id);
 
     return app->exec();
 }
diff -Naur lightdm-1.10.2.orig/tests/src/test-qt-greeter.h lightdm-1.10.1/tests/src/test-qt-greeter.h
--- lightdm-1.10.2.orig/tests/src/test-qt-greeter.h	2014-09-08 07:29:48.000000000 +0700
+++ lightdm-1.10.1/tests/src/test-qt-greeter.h	2014-04-08 11:30:25.000000000 +0700
@@ -8,8 +8,6 @@
 public:
     TestGreeter ();
 
-    void printHints();
-
 private Q_SLOTS:
     void showMessage(QString text, QLightDM::Greeter::MessageType type);
     void showPrompt(QString text, QLightDM::Greeter::PromptType type);
diff -Naur lightdm-1.10.2.orig/tests/src/test-runner.c lightdm-1.10.1/tests/src/test-runner.c
--- lightdm-1.10.2.orig/tests/src/test-runner.c	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/src/test-runner.c	2014-04-08 11:30:25.000000000 +0700
@@ -107,21 +107,6 @@
 
 typedef struct
 {
-    gchar *id;
-    gchar *path;
-    gboolean can_graphical;
-    gboolean can_multi_session;
-} Login1Seat;
-
-static GList *login1_seats = NULL;
-
-static Login1Seat *add_login1_seat (GDBusConnection *connection, const gchar *id, gboolean emit_signal);
-static Login1Seat *find_login1_seat (const gchar *id);
-static void remove_login1_seat (GDBusConnection *connection, const gchar *id);
-
-typedef struct
-{
-    gchar *id;
     gchar *path;
     guint pid;
     gboolean locked;
@@ -462,66 +447,6 @@
         g_main_loop_run (loop);
         g_main_loop_unref (loop);
     }
-    else if (strcmp (name, "ADD-SEAT") == 0)
-    {
-        const gchar *id, *v;
-        Login1Seat *seat;
-
-        id = g_hash_table_lookup (params, "ID");      
-        seat = add_login1_seat (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL), id, TRUE);
-        v = g_hash_table_lookup (params, "CAN-GRAPHICAL");
-        if (v)
-            seat->can_graphical = strcmp (v, "TRUE") == 0;
-        v = g_hash_table_lookup (params, "CAN-MULTI-SESSION");
-        if (v)
-            seat->can_multi_session = strcmp (v, "TRUE") == 0;
-    }
-    else if (strcmp (name, "UPDATE-SEAT") == 0)
-    {
-        Login1Seat *seat;
-        const gchar *id;
-      
-        id = g_hash_table_lookup (params, "ID");
-        seat = find_login1_seat (id);
-        if (seat)
-        {
-            const gchar *v;
-            GVariantBuilder invalidated_properties;
-            GError *error = NULL;
-
-            g_variant_builder_init (&invalidated_properties, G_VARIANT_TYPE_ARRAY);
-
-            v = g_hash_table_lookup (params, "CAN-GRAPHICAL");
-            if (v)
-            {
-                seat->can_graphical = strcmp (v, "TRUE") == 0;
-                g_variant_builder_add (&invalidated_properties, "s", "CanGraphical");
-            }
-            v = g_hash_table_lookup (params, "CAN-MULTI-SESSION");
-            if (v)
-            {
-                seat->can_multi_session = strcmp (v, "TRUE") == 0;
-                g_variant_builder_add (&invalidated_properties, "s", "CanMultiSession");
-            }
-
-            g_dbus_connection_emit_signal (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                           NULL,
-                                           seat->path,
-                                           "org.freedesktop.DBus.Properties",
-                                           "PropertiesChanged",
-                                           g_variant_new ("(sa{sv}as)", "org.freedesktop.login1.Seat", NULL, &invalidated_properties),
-                                           &error);
-            if (error)
-                g_warning ("Failed to emit PropertiesChanged: %s", error->message);
-            g_clear_error (&error);
-        }
-    }
-    else if (strcmp (name, "REMOVE-SEAT") == 0)
-    {
-        const gchar *id;
-        id = g_hash_table_lookup (params, "ID");
-        remove_login1_seat (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL), id);
-    }
     else if (strcmp (name, "LIST-SEATS") == 0)
     {
         GVariant *result, *value;
@@ -538,7 +463,7 @@
                                               g_variant_new ("(ss)", "org.freedesktop.DisplayManager", "Seats"),
                                               G_VARIANT_TYPE ("(v)"),
                                               G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
+                                              1000,
                                               NULL,
                                               NULL);
 
@@ -574,7 +499,7 @@
                                               g_variant_new ("(ss)", "org.freedesktop.DisplayManager", "Sessions"),
                                               G_VARIANT_TYPE ("(v)"),
                                               G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
+                                              1000,
                                               NULL,
                                               NULL);
 
@@ -594,132 +519,55 @@
         check_status (status->str);
         g_string_free (status, TRUE);
     }
-    else if (strcmp (name, "SEAT-CAN-SWITCH") == 0)
-    {
-        GVariant *result, *value;
-        gchar *status;
-
-        result = g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                              "org.freedesktop.DisplayManager",
-                                              "/org/freedesktop/DisplayManager/Seat0",
-                                              "org.freedesktop.DBus.Properties",
-                                              "Get",
-                                              g_variant_new ("(ss)", "org.freedesktop.DisplayManager.Seat", "CanSwitch"),
-                                              G_VARIANT_TYPE ("(v)"),
-                                              G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
-                                              NULL,
-                                              NULL);
-
-        g_variant_get (result, "(v)", &value);
-        status = g_strdup_printf ("RUNNER SEAT-CAN-SWITCH CAN-SWITCH=%s", g_variant_get_boolean (value) ? "TRUE" : "FALSE");
-        g_variant_unref (value);
-        g_variant_unref (result);
-        check_status (status);
-        g_free (status);
-    }
-    else if (strcmp (name, "SEAT-HAS-GUEST-ACCOUNT") == 0)
-    {
-        GVariant *result, *value;
-        gchar *status;
-
-        result = g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                              "org.freedesktop.DisplayManager",
-                                              "/org/freedesktop/DisplayManager/Seat0",
-                                              "org.freedesktop.DBus.Properties",
-                                              "Get",
-                                              g_variant_new ("(ss)", "org.freedesktop.DisplayManager.Seat", "HasGuestAccount"),
-                                              G_VARIANT_TYPE ("(v)"),
-                                              G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
-                                              NULL,
-                                              NULL);
-
-        g_variant_get (result, "(v)", &value);
-        status = g_strdup_printf ("RUNNER SEAT-HAS-GUEST-ACCOUNT HAS-GUEST-ACCOUNT=%s", g_variant_get_boolean (value) ? "TRUE" : "FALSE");
-        g_variant_unref (value);
-        g_variant_unref (result);
-        check_status (status);
-        g_free (status);
-    }
     else if (strcmp (name, "SWITCH-TO-GREETER") == 0)
     {
-        GVariant *result;
-
-        result = g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                              "org.freedesktop.DisplayManager",
-                                              "/org/freedesktop/DisplayManager/Seat0",
-                                              "org.freedesktop.DisplayManager.Seat",
-                                              "SwitchToGreeter",
-                                              g_variant_new ("()"),
-                                              G_VARIANT_TYPE ("()"),
-                                              G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
-                                              NULL,
-                                              NULL);
-        if (result)
-        {
-            check_status ("RUNNER SWITCH-TO-GREETER");
-            g_variant_unref (result);
-        }
-        else
-            check_status ("RUNNER SWITCH-TO-GREETER FAILED");
+        g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
+                                     "org.freedesktop.DisplayManager",
+                                     "/org/freedesktop/DisplayManager/Seat0",
+                                     "org.freedesktop.DisplayManager.Seat",
+                                     "SwitchToGreeter",
+                                     g_variant_new ("()"),
+                                     G_VARIANT_TYPE ("()"),
+                                     G_DBUS_CALL_FLAGS_NONE,
+                                     1000,
+                                     NULL,
+                                     NULL);
+        check_status ("RUNNER SWITCH-TO-GREETER");
     }
     else if (strcmp (name, "SWITCH-TO-USER") == 0)
     {
-        GVariant *result;
-        const gchar *username;
+        gchar *status_text, *username;
 
         username = g_hash_table_lookup (params, "USERNAME");
-        result = g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                              "org.freedesktop.DisplayManager",
-                                              "/org/freedesktop/DisplayManager/Seat0",
-                                              "org.freedesktop.DisplayManager.Seat",
-                                              "SwitchToUser",
-                                              g_variant_new ("(ss)", username, ""),
-                                              G_VARIANT_TYPE ("()"),
-                                              G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
-                                              NULL,
-                                              NULL);
-        if (result)
-        {
-            gchar *status_text;
-            status_text = g_strdup_printf ("RUNNER SWITCH-TO-USER USERNAME=%s", username);
-            check_status (status_text);
-            g_free (status_text);
-            g_variant_unref (result);
-        }
-        else
-        {
-            gchar *status_text;
-            status_text = g_strdup_printf ("RUNNER SWITCH-TO-USER USERNAME=%s FAILED", username);
-            check_status (status_text);
-            g_free (status_text);
-        }
+        g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
+                                     "org.freedesktop.DisplayManager",
+                                     "/org/freedesktop/DisplayManager/Seat0",
+                                     "org.freedesktop.DisplayManager.Seat",
+                                     "SwitchToUser",
+                                     g_variant_new ("(ss)", username, ""),
+                                     G_VARIANT_TYPE ("()"),
+                                     G_DBUS_CALL_FLAGS_NONE,
+                                     1000,
+                                     NULL,
+                                     NULL);
+        status_text = g_strdup_printf ("RUNNER SWITCH-TO-USER USERNAME=%s", username);
+        check_status (status_text);
+        g_free (status_text);
     }
     else if (strcmp (name, "SWITCH-TO-GUEST") == 0)
     {
-        GVariant *result;
-
-        result = g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
-                                              "org.freedesktop.DisplayManager",
-                                              "/org/freedesktop/DisplayManager/Seat0",
-                                              "org.freedesktop.DisplayManager.Seat",
-                                              "SwitchToGuest",
-                                              g_variant_new ("(s)", ""),
-                                              G_VARIANT_TYPE ("()"),
-                                              G_DBUS_CALL_FLAGS_NONE,
-                                              G_MAXINT,
-                                              NULL,
-                                              NULL);
-        if (result)
-        {
-            check_status ("RUNNER SWITCH-TO-GUEST");
-            g_variant_unref (result);
-        }
-        else
-            check_status ("RUNNER SWITCH-TO-GUEST FAILED");
+        g_dbus_connection_call_sync (g_bus_get_sync (G_BUS_TYPE_SYSTEM, NULL, NULL),
+                                     "org.freedesktop.DisplayManager",
+                                     "/org/freedesktop/DisplayManager/Seat0",
+                                     "org.freedesktop.DisplayManager.Seat",
+                                     "SwitchToGuest",
+                                     g_variant_new ("(s)", ""),
+                                     G_VARIANT_TYPE ("()"),
+                                     G_DBUS_CALL_FLAGS_NONE,
+                                     1000,
+                                     NULL,
+                                     NULL);
+        check_status ("RUNNER SWITCH-TO-GUEST");
     }
     else if (strcmp (name, "STOP-DAEMON") == 0)
         stop_process (lightdm_process);
@@ -1421,147 +1269,6 @@
 }
 
 static void
-handle_login1_seat_call (GDBusConnection       *connection,
-                         const gchar           *sender,
-                         const gchar           *object_path,
-                         const gchar           *interface_name,
-                         const gchar           *method_name,
-                         GVariant              *parameters,
-                         GDBusMethodInvocation *invocation,
-                         gpointer               user_data)
-{
-    g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "No such method: %s", method_name);
-}
-
-static GVariant *
-handle_login1_seat_get_property (GDBusConnection       *connection,
-                                 const gchar           *sender,
-                                 const gchar           *object_path,
-                                 const gchar           *interface_name,
-                                 const gchar           *property_name,
-                                 GError               **error,
-                                 gpointer               user_data)
-{
-    Login1Seat *seat = user_data;
-
-    if (strcmp (property_name, "CanGraphical") == 0)
-        return g_variant_new_boolean (seat->can_graphical);
-    else if (strcmp (property_name, "CanMultiSession") == 0)
-        return g_variant_new_boolean (seat->can_multi_session);
-    else if (strcmp (property_name, "Id") == 0)
-        return g_variant_new_string (seat->id);
-    else
-        return NULL;
-}
-
-static Login1Seat *
-add_login1_seat (GDBusConnection *connection, const gchar *id, gboolean emit_signal)
-{
-    Login1Seat *seat;
-    GError *error = NULL;
-    GDBusNodeInfo *login1_seat_info;
-
-    const gchar *login1_seat_interface =
-        "<node>"
-        "  <interface name='org.freedesktop.login1.Seat'>"
-        "    <property name='CanGraphical' type='b' access='read'/>"
-        "    <property name='CanMultiSession' type='b' access='read'/>"
-        "    <property name='Id' type='s' access='read'/>"
-        "  </interface>"
-        "</node>";
-    static const GDBusInterfaceVTable login1_seat_vtable =
-    {
-        handle_login1_seat_call,
-        handle_login1_seat_get_property,
-    };
-
-    seat = g_malloc0 (sizeof (Login1Seat));
-    login1_seats = g_list_append (login1_seats, seat);
-    seat->id = g_strdup (id);
-    seat->path = g_strdup_printf ("/org/freedesktop/login1/seat/%s", seat->id);
-    seat->can_graphical = TRUE;
-    seat->can_multi_session = TRUE;
-
-    login1_seat_info = g_dbus_node_info_new_for_xml (login1_seat_interface, &error);
-    if (error)
-        g_warning ("Failed to parse login1 seat D-Bus interface: %s", error->message);
-    g_clear_error (&error);
-    if (!login1_seat_info)
-        return NULL;
-
-    g_dbus_connection_register_object (connection,
-                                       seat->path,
-                                       login1_seat_info->interfaces[0],
-                                       &login1_seat_vtable,
-                                       seat,
-                                       NULL,
-                                       &error);
-    if (error)
-        g_warning ("Failed to register login1 seat: %s", error->message);
-    g_clear_error (&error);
-    g_dbus_node_info_unref (login1_seat_info);
-
-    if (emit_signal)
-    {
-        g_dbus_connection_emit_signal (connection,
-                                       NULL,
-                                       "/org/freedesktop/login1",
-                                       "org.freedesktop.login1.Manager",
-                                       "SeatNew",
-                                       g_variant_new ("(so)", seat->id, seat->path),
-                                       &error);
-        if (error)
-            g_warning ("Failed to emit SeatNew: %s", error->message);
-        g_clear_error (&error);
-    }
-
-    return seat;
-}
-
-static Login1Seat *
-find_login1_seat (const gchar *id)
-{
-    Login1Seat *seat;
-    GList *link;
-
-    for (link = login1_seats; link; link = link->next)
-    {
-        seat = link->data;
-        if (strcmp (seat->id, id) == 0)
-            return seat;
-    }
-
-    return NULL;
-}
-
-static void
-remove_login1_seat (GDBusConnection *connection, const gchar *id)
-{
-    Login1Seat *seat;
-    GError *error = NULL;
-
-    seat = find_login1_seat (id);
-    if (!seat)
-        return;
-
-    g_dbus_connection_emit_signal (connection,
-                                   NULL,
-                                   "/org/freedesktop/login1",
-                                   "org.freedesktop.login1.Manager",
-                                   "SeatRemoved",
-                                   g_variant_new ("(so)", seat->id, seat->path),
-                                   &error);
-    if (error)
-        g_warning ("Failed to emit SeatNew: %s", error->message);
-    g_clear_error (&error);
-  
-    login1_seats = g_list_remove (login1_seats, seat);
-    g_free (seat->id);
-    g_free (seat->path);
-    g_free (seat);
-}
-
-static void
 handle_login1_session_call (GDBusConnection       *connection,
                             const gchar           *sender,
                             const gchar           *object_path,
@@ -1571,12 +1278,37 @@
                             GDBusMethodInvocation *invocation,
                             gpointer               user_data)
 {
-    /*Login1Session *session = user_data;*/
-    g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "No such method: %s", method_name);
+    Login1Session *session = user_data;
+
+    if (strcmp (method_name, "Lock") == 0)
+    {
+        if (!session->locked)
+            check_status ("LOGIN1 LOCK-SESSION");
+        session->locked = TRUE;
+        g_dbus_method_invocation_return_value (invocation, g_variant_new ("()"));
+    }
+    else if (strcmp (method_name, "Unlock") == 0)
+    {
+        if (session->locked)
+            check_status ("LOGIN1 UNLOCK-SESSION");
+        session->locked = FALSE;
+        g_dbus_method_invocation_return_value (invocation, g_variant_new ("()"));
+    }
+    else if (strcmp (method_name, "Activate") == 0)
+    {
+        gchar *status = g_strdup_printf ("LOGIN1 ACTIVATE-SESSION SESSION=%s", strrchr (object_path, '/') + 1);
+        check_status (status);
+        g_free (status);
+
+        g_dbus_method_invocation_return_value (invocation, g_variant_new ("()"));
+    }
+    else
+        g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "No such method: %s", method_name);
 }
 
 static Login1Session *
-create_login1_session (GDBusConnection *connection)
+open_login1_session (GDBusConnection *connection,
+                     GVariant *params)
 {
     Login1Session *session;
     GError *error = NULL;
@@ -1585,6 +1317,9 @@
     const gchar *login1_session_interface =
         "<node>"
         "  <interface name='org.freedesktop.login1.Session'>"
+        "    <method name='Lock'/>"
+        "    <method name='Unlock'/>"
+        "    <method name='Activate'/>"
         "  </interface>"
         "</node>";
     static const GDBusInterfaceVTable login1_session_vtable =
@@ -1595,12 +1330,16 @@
     session = g_malloc0 (sizeof (Login1Session));
     login1_sessions = g_list_append (login1_sessions, session);
 
-    session->id = g_strdup_printf ("c%d", login1_session_index++);
-    session->path = g_strdup_printf ("/org/freedesktop/login1/Session/%s", session->id);
+    session->path = g_strdup_printf("/org/freedesktop/login1/Session/c%d",
+                                    login1_session_index++);
+
+
 
-    login1_session_info = g_dbus_node_info_new_for_xml (login1_session_interface, &error);
+    login1_session_info = g_dbus_node_info_new_for_xml (login1_session_interface,
+                                                        &error);
     if (error)
-        g_warning ("Failed to parse login1 session D-Bus interface: %s", error->message);
+        g_warning ("Failed to parse login1 session D-Bus interface: %s",
+                   error->message);
     g_clear_error (&error);
     if (!login1_session_info)
         return NULL;
@@ -1620,20 +1359,6 @@
     return session;
 }
 
-static Login1Session *
-find_login1_session (const gchar *id)
-{
-    GList *link;
-
-    for (link = login1_sessions; link; link = link->next)
-    {
-        Login1Session *session = link->data;
-        if (strcmp (session->id, id) == 0)
-            return session;
-    }
-
-    return NULL;
-}
 
 static void
 handle_login1_call (GDBusConnection       *connection,
@@ -1645,89 +1370,34 @@
                     GDBusMethodInvocation *invocation,
                     gpointer               user_data)
 {
-    if (strcmp (method_name, "ListSeats") == 0)
-    {
-        GVariantBuilder seats;
-        GList *link;
-
-        g_variant_builder_init (&seats, G_VARIANT_TYPE ("a(so)"));
-        for (link = login1_seats; link; link = link->next)
-        {
-            Login1Seat *seat = link->data;
-            g_variant_builder_add (&seats, "(so)", seat->id, seat->path);
-        }
-        g_dbus_method_invocation_return_value (invocation, g_variant_new ("(a(so))", &seats));
-    }
-    else if (strcmp (method_name, "CreateSession") == 0)
-    {
-        /* Note: this is not the full CreateSession as used by logind, we just
-           need one so our fake PAM stack can communicate with this service */
-        Login1Session *session = create_login1_session (connection);
-        g_dbus_method_invocation_return_value (invocation, g_variant_new ("(so)", session->id, session->path));
 
-    }
-    else if (strcmp (method_name, "LockSession") == 0)
+    if (strcmp (method_name, "GetSessionByPID") == 0)
     {
-        const gchar *id;
-        Login1Session *session;
-
-        g_variant_get (parameters, "(&s)", &id);
-        session = find_login1_session (id);
-        if (!session)
-        {
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "No such session: %s", id);
-            return;
-        }
-
-        if (!session->locked)
-        {
-            gchar *status = g_strdup_printf ("LOGIN1 LOCK-SESSION SESSION=%s", id);
-            check_status (status);
-            g_free (status);
-        }
-        session->locked = TRUE;
-        g_dbus_method_invocation_return_value (invocation, g_variant_new ("()"));
-    }
-    else if (strcmp (method_name, "UnlockSession") == 0)
-    {
-        const gchar *id;
-        Login1Session *session;
-
-        g_variant_get (parameters, "(&s)", &id);
-        session = find_login1_session (id);
-        if (!session)
-        {
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "No such session: %s", id);
-            return;
-        }
+        /* Look for a session with our PID, and create one if we don't have one
+           already. */
+        GList *link;
+        guint pid;
+        Login1Session *ret = NULL;
 
-        if (session->locked)
-        {
-            gchar *status = g_strdup_printf ("LOGIN1 UNLOCK-SESSION SESSION=%s", id);
-            check_status (status);
-            g_free (status);
-        }
-        session->locked = FALSE;
-        g_dbus_method_invocation_return_value (invocation, g_variant_new ("()"));
-    }
-    else if (strcmp (method_name, "ActivateSession") == 0)
-    {
-        const gchar *id;
-        Login1Session *session;
+        g_variant_get (parameters, "(u)", &pid);
 
-        g_variant_get (parameters, "(&s)", &id);
-        session = find_login1_session (id);
-        if (!session)
+        for (link = login1_sessions; link; link = link->next)
         {
-            g_dbus_method_invocation_return_error (invocation, G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "No such session: %s", id);
-            return;
+            Login1Session *session;
+            session = link->data;
+            if (session->pid == pid)
+            {
+                ret = session;
+                break;
+            }
         }
+        /* Not found */
+        if (!ret)
+            ret = open_login1_session (connection, parameters);
 
-        gchar *status = g_strdup_printf ("LOGIN1 ACTIVATE-SESSION SESSION=%s", id);
-        check_status (status);
-        g_free (status);
+        g_dbus_method_invocation_return_value (invocation,
+                                               g_variant_new("(o)", ret->path));
 
-        g_dbus_method_invocation_return_value (invocation, g_variant_new ("()"));
     }
     else if (strcmp (method_name, "CanReboot") == 0)
     {
@@ -1789,21 +1459,9 @@
     const gchar *login1_interface =
         "<node>"
         "  <interface name='org.freedesktop.login1.Manager'>"
-        "    <method name='ListSeats'>"
-        "      <arg name='seats' type='a(so)' direction='out'/>"
-        "    </method>"
-        "    <method name='CreateSession'>"
-        "      <arg name='id' type='s' direction='out'/>"
-        "      <arg name='path' type='o' direction='out'/>"
-        "    </method>"
-        "    <method name='LockSession'>"
-        "      <arg name='id' type='s' direction='in'/>"
-        "    </method>"
-        "    <method name='UnlockSession'>"
-        "      <arg name='id' type='s' direction='in'/>"
-        "    </method>"
-        "    <method name='ActivateSession'>"
-        "      <arg name='id' type='s' direction='in'/>"
+        "    <method name='GetSessionByPID'>"
+        "      <arg name='pid' type='u' direction='in'/>"
+        "      <arg name='session' type='o' direction='out'/>"
         "    </method>"
         "    <method name='CanReboot'>"
         "      <arg name='result' direction='out' type='s'/>"
@@ -1829,12 +1487,6 @@
         "    <method name='Hibernate'>"
         "      <arg name='interactive' direction='in' type='b'/>"
         "    </method>"
-        "    <signal name='SeatNew'>"
-        "      <arg name='seat' type='so'/>"
-        "    </signal>"
-        "    <signal name='SeatRemoved'>"
-        "      <arg name='seat' type='so'/>"
-        "    </signal>"
         "  </interface>"
         "</node>";
     static const GDBusInterfaceVTable login1_vtable =
@@ -1842,7 +1494,6 @@
         handle_login1_call,
     };
     GDBusNodeInfo *login1_info;
-    Login1Seat *seat0;
     GError *error = NULL;
 
     login1_info = g_dbus_node_info_new_for_xml (login1_interface, &error);
@@ -1862,13 +1513,6 @@
     g_clear_error (&error);
     g_dbus_node_info_unref (login1_info);
 
-    /* We always have seat0 */
-    seat0 = add_login1_seat (connection, "seat0", FALSE);
-    if (g_key_file_has_key (config, "test-runner-config", "seat0-can-graphical", NULL))
-        seat0->can_graphical = g_key_file_get_boolean (config, "test-runner-config", "seat0-can-graphical", NULL);
-    if (g_key_file_has_key (config, "test-runner-config", "seat0-can-multi-session", NULL))
-        seat0->can_multi_session = g_key_file_get_boolean (config, "test-runner-config", "seat0-can-multi-session", NULL);
-
     service_count--;
     if (service_count == 0)
         ready ();
diff -Naur lightdm-1.10.2.orig/tests/src/unity-system-compositor.c lightdm-1.10.1/tests/src/unity-system-compositor.c
--- lightdm-1.10.2.orig/tests/src/unity-system-compositor.c	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/tests/src/unity-system-compositor.c	2014-04-08 11:30:25.000000000 +0700
@@ -144,7 +144,7 @@
 {
     int i;
     GString *status_text;
-    gboolean test = FALSE, container = FALSE;
+    gboolean test = FALSE;
     int vt_number = -1;
     gboolean enable_hardware_cursor = FALSE;
     const gchar *file = NULL;
@@ -188,8 +188,6 @@
         }
         else if (strcmp (arg, "--test") == 0)
             test = TRUE;
-        else if (strcmp (arg, "--container") == 0)
-            container = TRUE;
         else
             return EXIT_FAILURE;
     }
@@ -207,8 +205,6 @@
         g_string_append_printf (status_text, " XDG_VTNR=%s", g_getenv ("XDG_VTNR"));
     if (test)
         g_string_append (status_text, " TEST=TRUE");
-    if (container)
-        g_string_append (status_text, " CONTAINER=TRUE");
     status_notify (status_text->str);
     g_string_free (status_text, TRUE);
 
diff -Naur lightdm-1.10.2.orig/tests/src/X.c lightdm-1.10.1/tests/src/X.c
--- lightdm-1.10.2.orig/tests/src/X.c	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/src/X.c	2014-04-08 11:30:25.000000000 +0700
@@ -205,7 +205,6 @@
     gchar *seat = NULL;
     gchar *mir_id = NULL;
     gchar *lock_filename;
-    gboolean sharevts = FALSE;
     int lock_file;
     GString *status_text;
 
@@ -277,10 +276,6 @@
             seat = argv[i+1];
             i++;
         }
-        else if (strcmp (arg, "-sharevts") == 0)
-        {
-            sharevts = TRUE;
-        }
         else if (strcmp (arg, "-mir") == 0)
         {
             mir_id = argv[i+1];
@@ -303,7 +298,6 @@
                         "-broadcast             Broadcast for XDMCP\n"
                         "-port port-num         UDP port number to send messages to\n"
                         "-seat string           seat to run on\n"
-                        "-sharevts              share VTs with another X server\n"
                         "-mir id                Mir ID to use\n"
                         "-mirSocket name        Mir socket to use\n"
                         "vtxx                   Use virtual terminal xx instead of the next available\n",
@@ -326,8 +320,6 @@
         g_string_append_printf (status_text, " VT=%d", vt_number);
     if (seat != NULL)
         g_string_append_printf (status_text, " SEAT=%s", seat);
-    if (sharevts)
-        g_string_append (status_text, " SHAREVTS=TRUE");
     if (mir_id != NULL)
         g_string_append_printf (status_text, " MIR-ID=%s", mir_id);
     status_notify (status_text->str);
diff -Naur lightdm-1.10.2.orig/tests/test-autologin-pam-config lightdm-1.10.1/tests/test-autologin-pam-config
--- lightdm-1.10.2.orig/tests/test-autologin-pam-config	2014-09-08 07:13:40.000000000 +0700
+++ lightdm-1.10.1/tests/test-autologin-pam-config	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner autologin-pam-config test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-login-pam-config lightdm-1.10.1/tests/test-login-pam-config
--- lightdm-1.10.2.orig/tests/test-login-pam-config	2014-09-08 07:13:40.000000000 +0700
+++ lightdm-1.10.1/tests/test-login-pam-config	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner login-pam-config test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-mir-container-session lightdm-1.10.1/tests/test-mir-container-session
--- lightdm-1.10.2.orig/tests/test-mir-container-session	2014-09-12 07:04:40.000000000 +0700
+++ lightdm-1.10.1/tests/test-mir-container-session	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner mir-container-session test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-change-graphical lightdm-1.10.1/tests/test-multi-seat-change-graphical
--- lightdm-1.10.2.orig/tests/test-multi-seat-change-graphical	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-change-graphical	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-change-graphical test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-change-graphical-disabled lightdm-1.10.1/tests/test-multi-seat-change-graphical-disabled
--- lightdm-1.10.2.orig/tests/test-multi-seat-change-graphical-disabled	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-change-graphical-disabled	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-change-graphical-disabled test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-legacy lightdm-1.10.1/tests/test-multi-seat-legacy
--- lightdm-1.10.2.orig/tests/test-multi-seat-legacy	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-legacy	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-legacy test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-non-graphical lightdm-1.10.1/tests/test-multi-seat-non-graphical
--- lightdm-1.10.2.orig/tests/test-multi-seat-non-graphical	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-non-graphical	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-non-graphical test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-non-graphical-disabled lightdm-1.10.1/tests/test-multi-seat-non-graphical-disabled
--- lightdm-1.10.2.orig/tests/test-multi-seat-non-graphical-disabled	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-non-graphical-disabled	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-non-graphical-disabled test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-seat0-non-graphical lightdm-1.10.1/tests/test-multi-seat-seat0-non-graphical
--- lightdm-1.10.2.orig/tests/test-multi-seat-seat0-non-graphical	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-seat0-non-graphical	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-seat0-non-graphical test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-multi-seat-seat0-non-graphical-disabled lightdm-1.10.1/tests/test-multi-seat-seat0-non-graphical-disabled
--- lightdm-1.10.2.orig/tests/test-multi-seat-seat0-non-graphical-disabled	2014-09-11 08:07:11.000000000 +0700
+++ lightdm-1.10.1/tests/test-multi-seat-seat0-non-graphical-disabled	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner multi-seat-seat0-non-graphical-disabled test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-switch-to-greeter-disabled lightdm-1.10.1/tests/test-switch-to-greeter-disabled
--- lightdm-1.10.2.orig/tests/test-switch-to-greeter-disabled	2014-09-08 06:49:04.000000000 +0700
+++ lightdm-1.10.1/tests/test-switch-to-greeter-disabled	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner switch-to-greeter-disabled test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-switch-to-guest-disabled lightdm-1.10.1/tests/test-switch-to-guest-disabled
--- lightdm-1.10.2.orig/tests/test-switch-to-guest-disabled	2014-09-08 06:49:04.000000000 +0700
+++ lightdm-1.10.1/tests/test-switch-to-guest-disabled	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner switch-to-guest-disabled test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-switch-to-user-disabled lightdm-1.10.1/tests/test-switch-to-user-disabled
--- lightdm-1.10.2.orig/tests/test-switch-to-user-disabled	2014-09-08 06:49:04.000000000 +0700
+++ lightdm-1.10.1/tests/test-switch-to-user-disabled	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner switch-to-user-disabled test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-unity-mir-script-hooks lightdm-1.10.1/tests/test-unity-mir-script-hooks
--- lightdm-1.10.2.orig/tests/test-unity-mir-script-hooks	2014-09-16 06:04:52.000000000 +0700
+++ lightdm-1.10.1/tests/test-unity-mir-script-hooks	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner unity-mir-script-hooks test-mir-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-unity-script-hooks lightdm-1.10.1/tests/test-unity-script-hooks
--- lightdm-1.10.2.orig/tests/test-unity-script-hooks	2014-09-16 06:04:52.000000000 +0700
+++ lightdm-1.10.1/tests/test-unity-script-hooks	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner unity-script-hooks test-gobject-greeter
diff -Naur lightdm-1.10.2.orig/tests/test-user-uid lightdm-1.10.1/tests/test-user-uid
--- lightdm-1.10.2.orig/tests/test-user-uid	2014-09-08 07:43:58.000000000 +0700
+++ lightdm-1.10.1/tests/test-user-uid	1970-01-01 07:00:00.000000000 +0700
@@ -1,2 +0,0 @@
-#!/bin/sh
-./src/dbus-env ./src/test-runner user-uid test-gobject-greeter
